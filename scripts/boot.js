/*
 RequireJS text 2.0.0 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/text for details
*/
var d=void 0,r=!0,u=null,v=!1;function la(){return function(){}}function Ba(a){return function(){return a}}var Za;define("cs",{load:function(a){throw Error("Dynamic load not allowed: "+a);}});
(function(){function a(a,b){return b?f(a).Ml():a}function b(a){this.ag=a}function c(a){return a.replace(k,function(a,b){return R[b]})}function e(){}function f(a){return new b(a)}function h(a,b,c){if(a===b)return 0!==a||1/a==1/b;if(a==u||b==u)return a===b;a.hh&&(a=a.ag);b.hh&&(b=b.ag);if(a.isEqual&&f.Od(a.isEqual))return a.isEqual(b);if(b.isEqual&&f.Od(b.isEqual))return b.isEqual(a);var e=o.call(a);if(e!=o.call(b))return v;switch(e){case "[object String]":return a==String(b);case "[object Number]":return a!=
+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return v;for(var g=c.length;g--;)if(c[g]==a)return r;c.push(a);var g=0,i=r;if("[object Array]"==e){if(g=a.length,i=g==b.length)for(;g--&&(i=g in a==g in b&&h(a[g],b[g],c)););}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return v;
for(var j in a)if(f.re(a,j)&&(g++,!(i=f.re(b,j)&&h(a[j],b[j],c))))break;if(i){for(j in b)if(f.re(b,j)&&!g--)break;i=!g}}return c.pop(),i}var g=this,i=g.Li,j={},l=Array.prototype,m=Object.prototype,q=l.push,p=l.slice,s=l.unshift,o=m.toString,n=m.hasOwnProperty,t=l.forEach,w=l.map,z=l.reduce,y=l.reduceRight,x=l.filter,F=l.every,M=l.some,S=l.indexOf,O=l.lastIndexOf,m=Array.isArray,G=Object.keys,B=Function.prototype.bind;"undefined"!=typeof exports?("undefined"!=typeof module&&module.Yt&&(exports=module.Yt=
f),exports.Li=f):g.Li=f;f.VERSION="1.3.3";var N=f.vj=f.forEach=function(a,b,c){if(a!=u)if(t&&a.forEach===t)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,g=a.length;e<g&&!(e in a&&b.call(c,a[e],e,a)===j);e++);else for(e in a)if(f.re(a,e)&&b.call(c,a[e],e,a)===j)break};f.map=f.By=function(a,b,c){var e=[];return a==u?e:w&&a.map===w?a.map(b,c):(N(a,function(a,f,g){e[e.length]=b.call(c,a,f,g)}),a.length===+a.length&&(e.length=a.length),e)};f.reduce=f.ez=f.Az=function(a,b,c,e){var g=2<arguments.length;
a==u&&(a=[]);if(z&&a.reduce===z)return e&&(b=f.bind(b,e)),g?a.reduce(b,c):a.reduce(b);N(a,function(a,f,h){g?c=b.call(e,c,a,f,h):(c=a,g=r)});if(!g)throw new TypeError("Reduce of empty array with no initial value");return c};f.reduceRight=f.fz=function(a,b,c,e){var g=2<arguments.length;a==u&&(a=[]);if(y&&a.reduceRight===y)return e&&(b=f.bind(b,e)),g?a.reduceRight(b,c):a.reduceRight(b);var h=f.yk(a).reverse();return e&&!g&&(b=f.bind(b,e)),g?f.reduce(h,b,c,e):f.reduce(h,b)};f.find=f.Ry=function(a,b,c){var e;
return U(a,function(a,f,g){if(b.call(c,a,f,g))return e=a,r}),e};f.filter=f.select=function(a,b,c){var e=[];return a==u?e:x&&a.filter===x?a.filter(b,c):(N(a,function(a,f,g){b.call(c,a,f,g)&&(e[e.length]=a)}),e)};f.NA=function(a,b,c){var e=[];return a==u?e:(N(a,function(a,f,g){b.call(c,a,f,g)||(e[e.length]=a)}),e)};f.every=f.all=function(a,b,c){var e=r;return a==u?e:F&&a.every===F?a.every(b,c):(N(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return j}),!!e)};var U=f.some=f.Zx=function(a,b,c){b||(b=f.pf);
var e=v;return a==u?e:M&&a.some===M?a.some(b,c):(N(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return j}),!!e)};f.Kp=f.contains=function(a,b){var c=v;return a==u?c:S&&a.indexOf===S?-1!=a.indexOf(b):(c=U(a,function(a){return a===b}),c)};f.Fz=function(a,b){var c=p.call(arguments,2);return f.map(a,function(a){return(f.Od(b)?b||a:a[b]).apply(a,c)})};f.mn=function(a,b){return f.map(a,function(a){return a[b]})};f.max=function(a,b,c){if(!b&&f.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&
f.Gj(a))return-Infinity;var e={sh:-Infinity};return N(a,function(a,f,g){f=b?b.call(c,a,f,g):a;f>=e.sh&&(e={value:a,sh:f})}),e.value};f.min=function(a,b,c){if(!b&&f.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&f.Gj(a))return Infinity;var e={sh:Infinity};return N(a,function(a,f,g){f=b?b.call(c,a,f,g):a;f<e.sh&&(e={value:a,sh:f})}),e.value};f.gB=function(a){var b=[],c;return N(a,function(a,e){c=Math.floor(Math.random()*(e+1));b[e]=b[c];b[c]=a}),b};f.kB=function(a,b,c){var e=f.Od(b)?
b:function(a){return a[b]};return f.mn(f.map(a,function(a,b,f){return{value:a,jp:e.call(c,a,b,f)}}).sort(function(a,b){var c=a.jp,e=b.jp;return c===d?1:e===d?-1:c<e?-1:c>e?1:0}),"value")};f.nz=function(a,b){var c={},e=f.Od(b)?b:function(a){return a[b]};return N(a,function(a,b){var f=e(a,b);(c[f]||(c[f]=[])).push(a)}),c};f.Ew=function(a,b){var c;c||(c=f.pf);for(var e=c(b),g=0,h=a.length;g<h;){var i=g+h>>1;c(a[i])<e?g=i+1:h=i}return g};f.yk=function(a){return a?f.isArray(a)?p.call(a):f.Cm(a)?p.call(a):
a.yk&&f.Od(a.yk)?a.yk():f.fx(a):[]};f.size=function(a){return f.isArray(a)?a.length:f.keys(a).length};f.bz=f.head=f.wB=function(a,b,c){return b!=u&&!c?p.call(a,0,b):a[0]};f.zz=function(a,b,c){return p.call(a,0,a.length-(b==u||c?1:b))};f.Hu=function(a){return a[a.length-1]};f.PA=f.vB=function(a,b,c){return p.call(a,b==u||c?1:b)};f.compact=function(a){return f.filter(a,function(a){return!!a})};f.nm=function(a,b){return function H(a,c){return N(a,function(a){f.isArray(a)?b?q.apply(c,a):H(a,c):c.push(a)}),
c}(a,[])};f.gC=function(a){return f.Pt(a,p.call(arguments,1))};f.lr=f.unique=function(a,b,c){var c=c?f.map(a,c):a,e=[];return 3>a.length&&(b=r),f.reduce(c,function(c,g,h){if(b?f.Hu(c)!==g||!c.length:!f.Kp(c,g))c.push(g),e.push(a[h]);return c},[]),e};f.QB=function(){return f.lr(f.nm(arguments,r))};f.Ez=f.Cz=function(a){var b=p.call(arguments,1);return f.filter(f.lr(a),function(a){return f.every(b,function(b){return 0<=f.indexOf(b,a)})})};f.Pt=function(a){var b=f.nm(p.call(arguments,1),r);return f.filter(a,
function(a){return!f.Kp(b,a)})};f.jC=function(){for(var a=p.call(arguments),b=f.max(f.mn(a,"length")),c=Array(b),e=0;e<b;e++)c[e]=f.mn(a,""+e);return c};f.indexOf=function(a,b,c){if(a==u)return-1;var e;if(c)return e=f.Ew(a,b),a[e]===b?e:-1;if(S&&a.indexOf===S)return a.indexOf(b);e=0;for(c=a.length;e<c;e++)if(e in a&&a[e]===b)return e;return-1};f.lastIndexOf=function(a,b){if(a==u)return-1;if(O&&a.lastIndexOf===O)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};
f.LA=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);for(var c=arguments[2]||1,e=Math.max(Math.ceil((b-a)/c),0),f=0,g=Array(e);f<e;)g[f++]=a,a+=c;return g};f.bind=function(a,b){var c,g;if(a.bind===B&&B)return B.apply(a,p.call(arguments,1));if(!f.Od(a))throw new TypeError;return g=p.call(arguments,2),c=function(){if(this instanceof c){e.prototype=a.prototype;var f=new e,h=a.apply(f,g.concat(p.call(arguments)));return Object(h)===h?h:f}return a.apply(b,g.concat(p.call(arguments)))}};f.iy=function(a){var b=
p.call(arguments,1);return 0==b.length&&(b=f.yp(a)),N(b,function(b){a[b]=f.bind(a[b],a)}),a};f.gA=function(a,b){var c={};return b||(b=f.pf),function(){var e=b.apply(this,arguments);return f.re(c,e)?c[e]:c[e]=a.apply(this,arguments)}};f.jg=function(a,b){var c=p.call(arguments,2);return setTimeout(function(){return a.apply(u,c)},b)};f.defer=function(a){return f.jg.apply(f,[a,1].concat(p.call(arguments,1)))};f.BB=function(a,b){var c,e,g,h,i,j,k=f.Mt(function(){i=h=v},b);return function(){c=this;e=arguments;
return g||(g=setTimeout(function(){g=u;i&&a.apply(c,e);k()},b)),h?i=r:(h=r,j=a.apply(c,e)),k(),j}};f.Mt=function(a,b){var c;return function(){var e=this,f=arguments;clearTimeout(c);c=setTimeout(function(){c=u;a.apply(e,f)},b)}};f.xA=function(a){var b=v,c;return function(){return b?c:(b=r,c=a.apply(this,arguments))}};f.ti=function(a,b){return function(){var c=[a].concat(p.call(arguments,0));return b.apply(this,c)}};f.gp=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=
c;c--)b=[a[c].apply(this,b)];return b[0]}};f.Yx=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};f.keys=G||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)f.re(a,c)&&(b[b.length]=c);return b};f.fx=function(a){return f.map(a,f.pf)};f.yp=f.hA=function(a){var b=[],c;for(c in a)f.Od(a[c])&&b.push(c);return b.sort()};f.extend=function(a){return N(p.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a};f.BA=function(a){var b=
{};return N(f.nm(p.call(arguments,1)),function(c){c in a&&(b[c]=a[c])}),b};f.jf=function(a){return N(p.call(arguments,1),function(b){for(var c in b)a[c]==u&&(a[c]=b[c])}),a};f.e=function(a){return f.Au(a)?f.isArray(a)?a.slice():f.extend({},a):a};f.yB=function(a,b){return b(a),a};f.isEqual=function(a,b){return h(a,b,[])};f.Gj=function(a){if(a==u)return r;if(f.isArray(a)||f.Bu(a))return 0===a.length;for(var b in a)if(f.re(a,b))return v;return r};f.Iz=function(a){return!!a&&1==a.nodeType};f.isArray=
m||function(a){return"[object Array]"==o.call(a)};f.Au=function(a){return a===Object(a)};f.Cm=function(a){return"[object Arguments]"==o.call(a)};f.Cm(arguments)||(f.Cm=function(a){return!!a&&!!f.re(a,"callee")});f.Od=function(a){return"[object Function]"==o.call(a)};f.Bu=function(a){return"[object String]"==o.call(a)};f.zu=function(a){return"[object Number]"==o.call(a)};f.Jz=function(a){return f.zu(a)&&isFinite(a)};f.Kz=function(a){return a!==a};f.Gz=function(a){return a===r||a===v||"[object Boolean]"==
o.call(a)};f.Hz=function(a){return"[object Date]"==o.call(a)};f.Mz=function(a){return"[object RegExp]"==o.call(a)};f.Lz=function(a){return a===u};f.Nz=function(a){return a===d};f.re=function(a,b){return n.call(a,b)};f.oA=function(){return g.Li=i,this};f.pf=function(a){return a};f.CB=function(a,b,c){for(var e=0;e<a;e++)b.call(c,e)};f.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};
f.result=function(a,b){if(a==u)return u;var c=a[b];return f.Od(c)?c.call(a):c};f.mv=function(c){N(f.yp(c),function(e){var g=f[e]=c[e];b.prototype[e]=function(){var b=p.call(arguments);return s.call(b,this.ag),a(g.apply(f,b),this.hh)}})};var X=0;f.RB=function(a){var b=X++;return a?a+b:b};f.Ww={evaluate:/<%([\s\S]+?)%>/g,Hb:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/.^/,R={"\\":"\\","'":"'",h:"\r",mA:"\n",pB:"\t",JB:"\u2028",KB:"\u2029"},I;for(I in R)R[R[I]]=I;var J=/\\|'|\r|\n|\t|\u2028|\u2029/g,
k=/\\(\\|'|r|n|t|u2028|u2029)/g;f.zB=function(a,b,e){function g(a){return h.call(this,a,f)}e=f.jf(e||{},f.Ww);a="__p+='"+a.replace(J,function(a){return"\\"+R[a]}).replace(e.escape||T,function(a,b){return"'+\n((__t=("+c(b)+"))==null?'':_.escape(__t))+\n'"}).replace(e.Hb||T,function(a,b){return"'+\n((__t=("+c(b)+"))==null?'':__t)+\n'"}).replace(e.evaluate||T,function(a,b){return"';\n"+c(b)+"\n;__p+='"})+"';\n";e.or||(a="with(obj||{}){\n"+a+"}\n");var a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'')};\n"+
a+"return __p;\n",h=new Function(e.or||"obj","_",a);return b?h(b,f):(g.source="function("+(e.or||"obj")+"){\n"+a+"}",g)};f.Ml=function(a){return f(a).Ml()};f.prototype=b.prototype;f.mv(f);N("pop push reverse shift sort splice unshift".split(" "),function(c){var e=l[c];b.prototype[c]=function(){var b=this.ag;return e.apply(b,arguments),(c=="shift"||c=="splice")&&b.length===0&&delete b[0],a(b,this.hh)}});N(["concat","join","slice"],function(c){var e=l[c];b.prototype[c]=function(){return a(e.apply(this.ag,
arguments),this.hh)}});b.prototype.Ml=function(){return this.hh=r,this};b.prototype.value=function(){return this.ag}}).call(this);var cb=this;define("Underscore",function(){return cb.Li});var A=A||{Gi:"49"};self.Or||(self.Or=Array,self.Bx=Array);for(var db=0,ob=["ms","moz","webkit","o"],yb=0;yb<ob.length&&!window.requestAnimationFrame;++yb)window.requestAnimationFrame=window[ob[yb]+"RequestAnimationFrame"],window.fp=window[ob[yb]+"CancelAnimationFrame"]||window[ob[yb]+"CancelRequestAnimationFrame"];
window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(0,16-(b-db)),e=window.setTimeout(function(){a(b+c)},c);return db=b+c,e});window.fp||(window.fp=function(a){clearTimeout(a)});A.Gk=function(a){this.dt=a!==d?a:r;this.elapsedTime=this.fn=this.startTime=0;this.ik=v};A.Gk.prototype.start=function(){this.fn=this.startTime=Date.now();this.ik=r};A.Gk.prototype.stop=function(){this.elapsedTime+=Cb(this);this.ik=v};
function Cb(a){var b=0;a.dt&&!a.ik&&a.start();if(a.ik){var c=Date.now(),b=0.0010*(c-a.fn);a.fn=c;a.elapsedTime+=b}return b}A.v=function(a){return a!==d&&Ub(this,a),this};A.v.prototype={constructor:A.v,h:1,i:1,b:1,copy:function(a){return this.h=a.h,this.i=a.i,this.b=a.b,this},fa:function(a,b){return this.h+=(a.h-this.h)*b,this.i+=(a.i-this.i)*b,this.b+=(a.b-this.b)*b,this},e:function(){return ac(new A.v,this.h,this.i,this.b)}};
function bc(a){return"rgb("+Math.floor(255*a.h)+","+Math.floor(255*a.i)+","+Math.floor(255*a.b)+")"}function Ub(a,b){b=Math.floor(b);a.h=(b>>16&255)/255;a.i=(b>>8&255)/255;a.b=(b&255)/255}function ac(a,b,c,e){return a.h=b,a.i=c,a.b=e,a}function tc(a,b){a.h=b.h*b.h;a.i=b.i*b.i;a.b=b.b*b.b}A.r=function(a,b){this.x=a||0;this.y=b||0};
A.r.prototype={constructor:A.r,set:function(a,b){return this.x=a,this.y=b,this},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},L:function(a){return this.x+=a.x,this.y+=a.y,this},sub:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},Ia:function(a){return this.x-=a.x,this.y-=a.y,this},X:function(a){return this.x*=a,this.y*=a,this},pc:function(a){return a?(this.x/=a,this.y/=a):this.set(0,0),this},Rj:function(){return this.X(-1)},
Fa:function(a){return this.x*a.x+this.y*a.y},Rc:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.Rc())},normalize:function(){return this.pc(this.length())},Gb:function(a){return Math.sqrt(this.tj(a))},tj:function(a){var b=this.x-a.x,a=this.y-a.y;return b*b+a*a},Yc:function(a){return this.normalize().X(a)},fa:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},km:function(a){return a.x===this.x&&a.y===this.y},Lp:function(){return 1E-4>this.Rc()},
e:function(){return new A.r(this.x,this.y)}};A.d=function(a,b,c){this.x=a||0;this.y=b||0;this.a=c||0};
A.d.prototype={constructor:A.d,set:function(a,b,c){return this.x=a,this.y=b,this.a=c,this},copy:function(a){return this.x=a.x,this.y=a.y,this.a=a.a,this},add:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.a=a.a+b.a,this},L:function(a){return this.x+=a.x,this.y+=a.y,this.a+=a.a,this},sub:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.a=a.a-b.a,this},Ia:function(a){return this.x-=a.x,this.y-=a.y,this.a-=a.a,this},multiply:function(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.a=a.a*
b.a,this},vf:function(a){return this.x*=a.x,this.y*=a.y,this.a*=a.a,this},X:function(a){return this.x*=a,this.y*=a,this.a*=a,this},pc:function(a){return a?(this.x/=a,this.y/=a,this.a/=a):this.a=this.y=this.x=0,this},Rj:function(){return this.X(-1)},Fa:function(a){return this.x*a.x+this.y*a.y+this.a*a.a},Rc:function(){return this.x*this.x+this.y*this.y+this.a*this.a},length:function(){return Math.sqrt(this.Rc())},normalize:function(){return this.pc(this.length())},Yc:function(a){return this.normalize().X(a)},
fa:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.a+=(a.a-this.a)*b,this},Gb:function(a){return Math.sqrt(this.tj(a))},tj:function(a){return(new A.d).sub(this,a).Rc()},km:function(a){return a.x===this.x&&a.y===this.y&&a.a===this.a},Lp:function(){return 1E-4>this.Rc()},e:function(){return new A.d(this.x,this.y,this.a)}};
function Ec(a,b,c){var e=c?c.x:1,f=c?c.y:1,c=c?c.a:1,h=b.elements[0]/e,g=b.elements[4]/f,e=b.elements[1]/e,f=b.elements[5]/f,i=b.elements[9]/c,j=b.elements[10]/c;a.y=Math.asin(b.elements[8]/c);c=Math.cos(a.y);1E-5<Math.abs(c)?(a.x=Math.atan2(-i/c,j/c),a.a=Math.atan2(-g/c,h/c)):(a.x=0,a.a=Math.atan2(e,f))}function Oc(a,b){var c=a.x,e=a.y,f=a.a;return a.x=e*b.a-f*b.y,a.y=f*b.x-c*b.a,a.a=c*b.y-e*b.x,a}function Pc(a,b,c){return a.x=b.y*c.a-b.a*c.y,a.y=b.a*c.x-b.x*c.a,a.a=b.x*c.y-b.y*c.x,a}
A.$a=function(a,b,c,e){this.x=a||0;this.y=b||0;this.a=c||0;this.j=e!==d?e:1};
A.$a.prototype={constructor:A.$a,set:function(a,b,c,e){return this.x=a,this.y=b,this.a=c,this.j=e,this},copy:function(a){return this.x=a.x,this.y=a.y,this.a=a.a,this.j=a.j!==d?a.j:1,this},add:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.a=a.a+b.a,this.j=a.j+b.j,this},L:function(a){return this.x+=a.x,this.y+=a.y,this.a+=a.a,this.j+=a.j,this},sub:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.a=a.a-b.a,this.j=a.j-b.j,this},Ia:function(a){return this.x-=a.x,this.y-=a.y,this.a-=a.a,
this.j-=a.j,this},X:function(a){return this.x*=a,this.y*=a,this.a*=a,this.j*=a,this},pc:function(a){return a?(this.x/=a,this.y/=a,this.a/=a,this.j/=a):(this.a=this.y=this.x=0,this.j=1),this},Rj:function(){return this.X(-1)},Fa:function(a){return this.x*a.x+this.y*a.y+this.a*a.a+this.j*a.j},Rc:function(){return this.Fa(this)},length:function(){return Math.sqrt(this.Rc())},normalize:function(){return this.pc(this.length())},Yc:function(a){return this.normalize().X(a)},fa:function(a,b){return this.x+=
(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.a+=(a.a-this.a)*b,this.j+=(a.j-this.j)*b,this},e:function(){return new A.$a(this.x,this.y,this.a,this.j)}};A.Se=function(){this.kq=[new A.$a,new A.$a,new A.$a,new A.$a,new A.$a,new A.$a]};
function Qc(a,b){var c,e=a.kq,f=b.elements,b=f[0];c=f[1];var h=f[2],g=f[3],i=f[4],j=f[5],l=f[6],m=f[7],q=f[8],p=f[9],s=f[10],o=f[11],n=f[12],t=f[13],w=f[14],f=f[15];e[0].set(g-b,m-i,o-q,f-n);e[1].set(g+b,m+i,o+q,f+n);e[2].set(g+c,m+j,o+p,f+t);e[3].set(g-c,m-j,o-p,f-t);e[4].set(g-h,m-l,o-s,f-w);e[5].set(g+h,m+l,o+s,f+w);for(b=0;6>b;b++)c=e[b],c.pc(Math.sqrt(c.x*c.x+c.y*c.y+c.a*c.a))}
A.Se.prototype.contains=function(a){for(var b=this.kq,c=a.G,e=c.elements,a=-a.s.nc.ra,c=c.elements,c=Math.sqrt(Math.max(c[0]*c[0]+c[1]*c[1]+c[2]*c[2],Math.max(c[4]*c[4]+c[5]*c[5]+c[6]*c[6],c[8]*c[8]+c[9]*c[9]+c[10]*c[10]))),c=a*c,f=0;6>f;f++)if(a=b[f].x*e[12]+b[f].y*e[13]+b[f].a*e[14]+b[f].j,a<=c)return v;return r};A.Se.Xb=new A.d;
A.hs=function(a,b){function c(a,b,c){return o.sub(c,a),w=o.Fa(b),z=n.add(a,t.copy(b).X(w)),c.Gb(z)}function e(a,b,c,e){return o.sub(e,b),n.sub(c,b),t.sub(a,b),y=o.Fa(o),x=o.Fa(n),F=o.Fa(t),M=n.Fa(n),S=n.Fa(t),O=1/(y*M-x*x),G=(M*F-x*S)*O,B=(y*S-x*F)*O,0<=G&&0<=B&&1>G+B}this.origin=a||new A.d;this.direction=b||new A.d;var f=1E-4;this.YA=function(a){f=a};var h=new A.d,g=new A.d,i=new A.d,j=new A.d,l=new A.d,m=new A.d,q=new A.d,p=new A.d,s=new A.d;this.yu=function(a){var b,n=[];if(a instanceof A.Zd){var o=
c(this.origin,this.direction,Rc(a.G));if(o>a.scale.x)return[];b={kb:o,od:a.position,face:u,object:a};n.push(b)}else if(a instanceof A.C){var o=c(this.origin,this.direction,Rc(a.G)),t=A.Se.Xb.set(Sc(a.G).length(),ed(a.G).length(),fd(a.G).length());if(o>a.s.nc.ra*Math.max(t.x,Math.max(t.y,t.a)))return n;var w,x,k=a.s,y=k.g,z;gd(a.Ih,a.G);o=0;for(t=k.l.length;o<t;o++)if(b=k.l[o],l.copy(this.origin),m.copy(this.direction),z=a.G,q=z.V(q.copy(b.xa)).Ia(l),p=a.Ih.V(p.copy(b.R)),w=m.Fa(p),!(Math.abs(w)<f)&&
(x=p.Fa(q)/w,!(0>x)&&(a.ha||(a.md?0<w:0>w))))if(s.add(l,m.X(x)),b instanceof A.ga)h=z.V(h.copy(y[b.o])),g=z.V(g.copy(y[b.b])),i=z.V(i.copy(y[b.w])),e(s,h,g,i)&&(b={kb:l.Gb(s),od:s.e(),face:b,object:a},n.push(b));else if(b instanceof A.la&&(h=z.V(h.copy(y[b.o])),g=z.V(g.copy(y[b.b])),i=z.V(i.copy(y[b.w])),j=z.V(j.copy(y[b.da])),e(s,h,g,j)||e(s,g,i,j)))b={kb:l.Gb(s),od:s.e(),face:b,object:a},n.push(b)}return n};this.Dz=function(a){for(var b=[],c=0,e=a.length;c<e;c++)Array.prototype.push.apply(b,this.yu(a[c]));
return b.sort(function(a,b){return a.kb-b.kb}),b};var o=new A.d,n=new A.d,t=new A.d,w,z,y,x,F,M,S,O,G,B};
A.bh=function(){function a(){h=e-b;g=f-c}var b,c,e,f,h,g,i=r;this.Dp=function(){return b};this.Ep=function(){return c};this.Cp=function(){return h};this.Bp=function(){return g};this.ng=function(){return b};this.qg=function(){return c};this.pg=function(){return e};this.mg=function(){return f};this.set=function(g,h,m,q){i=v;b=g;c=h;e=m;f=q;a()};this.Mb=function(g,h){i?(i=v,b=g,c=h,e=g,f=h):(b=b<g?b:g,c=c<h?c:h,e=e>g?e:g,f=f>h?f:h);a()};this.Ts=function(g,h,m,q,p,s){i?(i=v,b=g<m?g<p?g:p:m<p?m:p,c=h<
q?h<s?h:s:q<s?q:s,e=g>m?g>p?g:p:m>p?m:p,f=h>q?h>s?h:s:q>s?q:s):(b=g<m?g<p?g<b?g:b:p<b?p:b:m<p?m<b?m:b:p<b?p:b,c=h<q?h<s?h<c?h:c:s<c?s:c:q<s?q<c?q:c:s<c?s:c,e=g>m?g>p?g>e?g:e:p>e?p:e:m>p?m>e?m:e:p>e?p:e,f=h>q?h>s?h>f?h:f:s>f?s:f:q>s?q>f?q:f:s>f?s:f);a()};this.Ws=function(g){i?(i=v,b=g.ng(),c=g.qg(),e=g.pg(),f=g.mg()):(b=b<g.ng()?b:g.ng(),c=c<g.qg()?c:g.qg(),e=e>g.pg()?e:g.pg(),f=f>g.mg()?f:g.mg());a()};this.Am=function(g){b-=g;c-=g;e+=g;f+=g;a()};this.kv=function(g){b=b>g.ng()?b:g.ng();c=c>g.qg()?
c:g.qg();e=e<g.pg()?e:g.pg();f=f<g.mg()?f:g.mg();a()};this.se=function(a){return e<a.ng()||b>a.pg()||f<a.qg()||c>a.mg()?v:r};this.empty=function(){i=r;f=e=c=b=0;a()};this.Gj=function(){return i}};
A.wd={qh:function(a,b,c){return a<b?b:a>c?c:a},zy:function(a,b){return a<b?b:a},Nm:function(a,b,c,e,f){return e+(a-b)*(f-e)/(c-b)},cw:function(){return(65280*Math.random()+255*Math.random())/65535},JA:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},HA:function(a,b){return a+Math.random()*(b-a)},IA:function(a){return a*(0.5-Math.random())},hB:function(a){return 0>a?-1:0<a?1:0}};A.Nk=function(){this.elements=new Float32Array(9)};
A.Nk.prototype={constructor:A.Nk,Pc:function(a){var b=a.elements,a=b[10]*b[5]-b[6]*b[9],c=-b[10]*b[1]+b[2]*b[9],e=b[6]*b[1]-b[2]*b[5],f=-b[10]*b[4]+b[6]*b[8],h=b[10]*b[0]-b[2]*b[8],g=-b[6]*b[0]+b[2]*b[4],i=b[9]*b[4]-b[5]*b[8],j=-b[9]*b[0]+b[1]*b[8],l=b[5]*b[0]-b[1]*b[4],b=b[0]*a+b[1]*f+b[2]*i;0===b&&console.warn("Matrix3.getInverse(): determinant == 0");var b=1/b,m=this.elements;return m[0]=b*a,m[1]=b*c,m[2]=b*e,m[3]=b*f,m[4]=b*h,m[5]=b*g,m[6]=b*i,m[7]=b*j,m[8]=b*l,this},ar:function(){var a,b=this.elements;
return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this}};A.M=function(a,b,c,e,f,h,g,i,j,l,m,q,p,s,o,n){this.elements=new Float32Array(16);this.set(a!==d?a:1,b||0,c||0,e||0,f||0,h!==d?h:1,g||0,i||0,j||0,l||0,m!==d?m:1,q||0,p||0,s||0,o||0,n!==d?n:1)};
A.M.prototype={constructor:A.M,set:function(a,b,c,e,f,h,g,i,j,l,m,q,p,s,o,n){var t=this.elements;return t[0]=a,t[4]=b,t[8]=c,t[12]=e,t[1]=f,t[5]=h,t[9]=g,t[13]=i,t[2]=j,t[6]=l,t[10]=m,t[14]=q,t[3]=p,t[7]=s,t[11]=o,t[15]=n,this},pf:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(a){return a=a.elements,this.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]),this},oa:function(a,b,c){var e=this.elements,f=A.M.Xb,h=A.M.Ni,g=A.M.Oi;
return g.sub(a,b).normalize(),0===g.length()&&(g.a=1),Pc(f,c,g).normalize(),0===f.length()&&(g.x+=1E-4,Pc(f,c,g).normalize()),Pc(h,g,f),e[0]=f.x,e[4]=h.x,e[8]=g.x,e[1]=f.y,e[5]=h.y,e[9]=g.y,e[2]=f.a,e[6]=h.a,e[10]=g.a,this},multiply:function(a,b){var c=a.elements,e=b.elements,f=this.elements,h=c[0],g=c[4],i=c[8],j=c[12],l=c[1],m=c[5],q=c[9],p=c[13],s=c[2],o=c[6],n=c[10],t=c[14],w=c[3],z=c[7],y=c[11],c=c[15],x=e[0],F=e[4],M=e[8],S=e[12],O=e[1],G=e[5],B=e[9],N=e[13],U=e[2],X=e[6],T=e[10],R=e[14],I=
e[3],J=e[7],k=e[11],e=e[15];return f[0]=h*x+g*O+i*U+j*I,f[4]=h*F+g*G+i*X+j*J,f[8]=h*M+g*B+i*T+j*k,f[12]=h*S+g*N+i*R+j*e,f[1]=l*x+m*O+q*U+p*I,f[5]=l*F+m*G+q*X+p*J,f[9]=l*M+m*B+q*T+p*k,f[13]=l*S+m*N+q*R+p*e,f[2]=s*x+o*O+n*U+t*I,f[6]=s*F+o*G+n*X+t*J,f[10]=s*M+o*B+n*T+t*k,f[14]=s*S+o*N+n*R+t*e,f[3]=w*x+z*O+y*U+c*I,f[7]=w*F+z*G+y*X+c*J,f[11]=w*M+z*B+y*T+c*k,f[15]=w*S+z*N+y*R+c*e,this},vf:function(a){return this.multiply(this,a)},X:function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,
b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},V:function(a){var b=this.elements,c=a.x,e=a.y,f=a.a,h=1/(b[3]*c+b[7]*e+b[11]*f+b[15]);return a.x=(b[0]*c+b[4]*e+b[8]*f+b[12])*h,a.y=(b[1]*c+b[5]*e+b[9]*f+b[13])*h,a.a=(b[2]*c+b[6]*e+b[10]*f+b[14])*h,a},ar:function(){var a=this.elements,b;return b=a[1],a[1]=a[4],a[4]=b,b=a[2],a[2]=a[8],a[8]=b,b=a[6],a[6]=a[9],a[9]=b,b=a[3],a[3]=a[12],a[12]=b,b=a[7],a[7]=a[13],a[13]=b,b=a[11],a[11]=a[14],a[14]=
b,this},Pc:function(a){var b=this.elements,c=a.elements,e=c[0],f=c[4],h=c[8],g=c[12],i=c[1],j=c[5],l=c[9],m=c[13],q=c[2],p=c[6],s=c[10],o=c[14],n=c[3],t=c[7],w=c[11],c=c[15];return b[0]=l*o*t-m*s*t+m*p*w-j*o*w-l*p*c+j*s*c,b[4]=g*s*t-h*o*t-g*p*w+f*o*w+h*p*c-f*s*c,b[8]=h*m*t-g*l*t+g*j*w-f*m*w-h*j*c+f*l*c,b[12]=g*l*p-h*m*p-g*j*s+f*m*s+h*j*o-f*l*o,b[1]=m*s*n-l*o*n-m*q*w+i*o*w+l*q*c-i*s*c,b[5]=h*o*n-g*s*n+g*q*w-e*o*w-h*q*c+e*s*c,b[9]=g*l*n-h*m*n-g*i*w+e*m*w+h*i*c-e*l*c,b[13]=h*m*q-g*l*q+g*i*s-e*m*s-h*
i*o+e*l*o,b[2]=j*o*n-m*p*n+m*q*t-i*o*t-j*q*c+i*p*c,b[6]=g*p*n-f*o*n-g*q*t+e*o*t+f*q*c-e*p*c,b[10]=f*m*n-g*j*n+g*i*t-e*m*t-f*i*c+e*j*c,b[14]=g*j*q-f*m*q-g*i*p+e*m*p+f*i*o-e*j*o,b[3]=l*p*n-j*s*n-l*q*t+i*s*t+j*q*w-i*p*w,b[7]=f*s*n-h*p*n+h*q*t-e*s*t-f*q*w+e*p*w,b[11]=h*j*n-f*l*n-h*i*t+e*l*t+f*i*w-e*j*w,b[15]=f*l*q-h*j*q+h*i*p-e*l*p-f*i*s+e*j*s,this.X(1/hd(a)),this},gp:function(a,b,c){var e=this.elements,f=A.M.Ko,h=A.M.Gs;f.pf();id(f,b);h.set(c.x,0,0,0,0,c.y,0,0,0,0,c.a,0,0,0,0,1);return this.multiply(f,
h),e[12]=a.x,e[13]=a.y,e[14]=a.a,this},translate:function(a){var b=this.elements,c=a.x,e=a.y,a=a.a;return b[12]=b[0]*c+b[4]*e+b[8]*a+b[12],b[13]=b[1]*c+b[5]*e+b[9]*a+b[13],b[14]=b[2]*c+b[6]*e+b[10]*a+b[14],b[15]=b[3]*c+b[7]*e+b[11]*a+b[15],this},scale:function(a){var b=this.elements,c=a.x,e=a.y,a=a.a;return b[0]*=c,b[4]*=e,b[8]*=a,b[1]*=c,b[5]*=e,b[9]*=a,b[2]*=c,b[6]*=e,b[10]*=a,b[3]*=c,b[7]*=e,b[11]*=a,this},e:function(){var a=this.elements;return new A.M(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],
a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};function jd(a,b,c,e,f,h,g){a=a.elements;a[0]=2*h/(c-b);a[4]=0;a[8]=(c+b)/(c-b);a[12]=0;a[1]=0;a[5]=2*h/(f-e);a[9]=(f+e)/(f-e);a[13]=0;a[2]=0;a[6]=0;a[10]=-(g+h)/(g-h);a[14]=-2*g*h/(g-h);a[3]=0;a[7]=0;a[11]=-1;a[15]=0}function kd(a,b,c){var e=Math.cos(c),c=Math.sin(c),f=1-e,h=b.x,g=b.y,b=b.a,i=f*h,j=f*g;return a.set(i*h+e,i*g-c*b,i*b+c*g,0,i*g+c*b,j*g+e,j*b-c*h,0,i*b-c*g,j*b+c*h,f*b*b+e,0,0,0,0,1),a}
function ld(a,b,c,e){return a.set(1,0,0,b,0,1,0,c,0,0,1,e,0,0,0,1),a}function gd(a,b){var c=a.elements,b=b.elements,e=A.M.Xb,f=1/e.set(b[0],b[1],b[2]).length(),h=1/e.set(b[4],b[5],b[6]).length(),e=1/e.set(b[8],b[9],b[10]).length();return c[0]=b[0]*f,c[1]=b[1]*f,c[2]=b[2]*f,c[4]=b[4]*h,c[5]=b[5]*h,c[6]=b[6]*h,c[8]=b[8]*e,c[9]=b[9]*e,c[10]=b[10]*e,a}
function md(a,b,c,e){var f=a.elements,h=A.M.Xb,g=A.M.Ni,i=A.M.Oi;h.set(f[0],f[1],f[2]);g.set(f[4],f[5],f[6]);i.set(f[8],f[9],f[10]);b=b instanceof A.d?b:new A.d;c=c instanceof A.Wb?c:new A.Wb;e=e instanceof A.d?e:new A.d;e.x=h.length();e.y=g.length();e.a=i.length();b.x=f[12];b.y=f[13];b.a=f[14];f=A.M.Ko;f.copy(a);f.elements[0]/=e.x;f.elements[1]/=e.x;f.elements[2]/=e.x;f.elements[4]/=e.y;f.elements[5]/=e.y;f.elements[6]/=e.y;f.elements[8]/=e.a;f.elements[9]/=e.a;f.elements[10]/=e.a;a=c;b=Math.pow(hd(f),
1/3);a.j=Math.sqrt(Math.max(0,b+f.elements[0]+f.elements[5]+f.elements[10]))/2;a.x=Math.sqrt(Math.max(0,b+f.elements[0]-f.elements[5]-f.elements[10]))/2;a.y=Math.sqrt(Math.max(0,b-f.elements[0]+f.elements[5]-f.elements[10]))/2;a.a=Math.sqrt(Math.max(0,b-f.elements[0]-f.elements[5]+f.elements[10]))/2;a.x=0>f.elements[6]-f.elements[9]?-Math.abs(a.x):Math.abs(a.x);a.y=0>f.elements[8]-f.elements[2]?-Math.abs(a.y):Math.abs(a.y);a.a=0>f.elements[1]-f.elements[4]?-Math.abs(a.a):Math.abs(a.a);a.normalize()}
function id(a,b){var c=a.elements,e=b.x,f=b.y,h=b.a,g=b.j,i=e+e,j=f+f,l=h+h,b=e*i,m=e*j,e=e*l,q=f*j,f=f*l,h=h*l,i=g*i,j=g*j,g=g*l;c[0]=1-(q+h);c[4]=m-g;c[8]=e+j;c[1]=m+g;c[5]=1-(b+h);c[9]=f-i;c[2]=e-j;c[6]=f+i;c[10]=1-(b+q)}
function nd(a,b,c){var a=a.elements,e=b.x,f=b.y,b=b.a,h=Math.cos(e),e=Math.sin(e),g=Math.cos(f),f=Math.sin(f),i=Math.cos(b),b=Math.sin(b);switch(c){case "YXZ":var c=g*i,j=g*b,l=f*i,m=f*b;a[0]=c+m*e;a[4]=l*e-j;a[8]=h*f;a[1]=h*b;a[5]=h*i;a[9]=-e;a[2]=j*e-l;a[6]=m+c*e;a[10]=h*g;break;case "ZXY":c=g*i;j=g*b;l=f*i;m=f*b;a[0]=c-m*e;a[4]=-h*b;a[8]=l+j*e;a[1]=j+l*e;a[5]=h*i;a[9]=m-c*e;a[2]=-h*f;a[6]=e;a[10]=h*g;break;case "ZYX":c=h*i;j=h*b;l=e*i;m=e*b;a[0]=g*i;a[4]=l*f-j;a[8]=c*f+m;a[1]=g*b;a[5]=m*f+c;a[9]=
j*f-l;a[2]=-f;a[6]=e*g;a[10]=h*g;break;case "YZX":c=h*g;j=h*f;l=e*g;m=e*f;a[0]=g*i;a[4]=m-c*b;a[8]=l*b+j;a[1]=b;a[5]=h*i;a[9]=-e*i;a[2]=-f*i;a[6]=j*b+l;a[10]=c-m*b;break;case "XZY":c=h*g;j=h*f;l=e*g;m=e*f;a[0]=g*i;a[4]=-b;a[8]=f*i;a[1]=c*b+m;a[5]=h*i;a[9]=j*b-l;a[2]=l*b-j;a[6]=e*i;a[10]=m*b+c;break;default:c=h*i,j=h*b,l=e*i,m=e*b,a[0]=g*i,a[4]=-g*b,a[8]=f,a[1]=j+l*f,a[5]=c-m*f,a[9]=-e*g,a[2]=m-c*f,a[6]=l+j*f,a[10]=h*g}}function fd(a){a=a.elements;return A.M.Xb.set(a[8],a[9],a[10])}
function ed(a){a=a.elements;return A.M.Xb.set(a[4],a[5],a[6])}function Sc(a){a=a.elements;return A.M.Xb.set(a[0],a[1],a[2])}function Ed(a,b){var c=a.elements;c[12]=b.x;c[13]=b.y;c[14]=b.a}function Rc(a){a=a.elements;return A.M.Xb.set(a[12],a[13],a[14])}function Fd(a,b,c){a=a.elements;b[c]=a[0];b[c+1]=a[1];b[c+2]=a[2];b[c+3]=a[3];b[c+4]=a[4];b[c+5]=a[5];b[c+6]=a[6];b[c+7]=a[7];b[c+8]=a[8];b[c+9]=a[9];b[c+10]=a[10];b[c+11]=a[11];b[c+12]=a[12];b[c+13]=a[13];b[c+14]=a[14];b[c+15]=a[15]}
function Gd(a,b){var c=a.elements;b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];b[9]=c[9];b[10]=c[10];b[11]=c[11];b[12]=c[12];b[13]=c[13];b[14]=c[14];b[15]=c[15]}
function hd(a){var a=a.elements,b=a[0],c=a[4],e=a[8],f=a[12],h=a[1],g=a[5],i=a[9],j=a[13],l=a[2],m=a[6],q=a[10],p=a[14],s=a[3],o=a[7],n=a[11],a=a[15];return f*i*m*s-e*j*m*s-f*g*q*s+c*j*q*s+e*g*p*s-c*i*p*s-f*i*l*o+e*j*l*o+f*h*q*o-b*j*q*o-e*h*p*o+b*i*p*o+f*g*l*n-c*j*l*n-f*h*m*n+b*j*m*n+c*h*p*n-b*g*p*n-e*g*l*a+c*i*l*a+e*h*m*a-b*i*m*a-c*h*q*a+b*g*q*a}
function Hd(a,b){var c=a.elements,e=b.x,f=b.y,h=b.a,g=b.j;b.x=c[0]*e+c[4]*f+c[8]*h+c[12]*g;b.y=c[1]*e+c[5]*f+c[9]*h+c[13]*g;b.a=c[2]*e+c[6]*f+c[10]*h+c[14]*g;b.j=c[3]*e+c[7]*f+c[11]*h+c[15]*g}A.M.Xb=new A.d;A.M.Ni=new A.d;A.M.Oi=new A.d;A.M.Ko=new A.M;A.M.Gs=new A.M;
A.D=function(){this.id=A.$r++;this.name="";this.parent=d;this.children=[];this.Ra=new A.d(0,1,0);this.position=new A.d;this.rotation=new A.d;this.lm="XYZ";this.scale=new A.d(1,1,1);this.md=this.ha=v;this.bk=u;this.hk=r;this.u=new A.M;this.G=new A.M;this.Ih=new A.M;this.Oa=this.Pb=r;this.Vc=new A.Wb;this.Vd=v;this.bj=0;this.cj=1;this.visible=r;this.Eg=this.oc=v;this.lf=r;this.vl=new A.d};
A.D.prototype={constructor:A.D,ih:function(a){this.u.multiply(a,this.u);var a=this.scale,b=this.u,c=a.set(b.elements[0],b.elements[1],b.elements[2]).length(),e=a.set(b.elements[4],b.elements[5],b.elements[6]).length(),b=a.set(b.elements[8],b.elements[9],b.elements[10]).length();a.x=c;a.y=e;a.a=b;Ec(this.rotation,this.u,this.scale);a=this.position;b=this.u;a.x=b.elements[12];a.y=b.elements[13];a.a=b.elements[14]},translate:function(a,b){var c=this.u.elements,e=b.x,f=b.y,h=b.a;b.x=e*c[0]+f*c[4]+h*c[8];
b.y=e*c[1]+f*c[5]+h*c[9];b.a=e*c[2]+f*c[6]+h*c[10];b.normalize();this.position.L(b.X(a))},oi:function(a){this.translate(a,this.vl.set(1,0,0))},pi:function(a){this.translate(a,this.vl.set(0,1,0))},qi:function(a){this.translate(a,this.vl.set(0,0,1))},oa:function(a){this.u.oa(a,this.position,this.Ra);this.hk&&Ec(this.rotation,this.u)},add:function(a){if(a===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");else if(a instanceof A.D){a.parent!==d&&a.parent.remove(a);
a.parent=this;this.children.push(a);for(var b=this;b.parent!==d;)b=b.parent;b!==d&&b instanceof A.ae&&Id(b,a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=d;this.children.splice(b,1);for(b=this;b.parent!==d;)b=b.parent;b!==d&&b instanceof A.ae&&Jd(b,a)}},td:function(){Ed(this.u,this.position);this.Vd?id(this.u,this.Vc):nd(this.u,this.rotation,this.lm);if(1!==this.scale.x||1!==this.scale.y||1!==this.scale.a)this.u.scale(this.scale),this.cj=Math.max(this.scale.x,Math.max(this.scale.y,
this.scale.a));this.Oa=r},bc:function(a){this.Pb&&this.td();if(this.Oa||a)this.parent?this.G.multiply(this.parent.G,this.u):this.G.copy(this.u),this.Oa=v,a=r;for(var b=0,c=this.children.length;b<c;b++)this.children[b].bc(a)}};A.$r=0;
A.Yg=function(){function a(){var a=h[f]=h[f]||new A.is;return f++,a}function b(){var a=j[i]=j[i]||new A.ic;return i++,a}function c(a,b){return b.a-a.a}var e,f,h=[],g,i,j=[],l,m,q=[],p,s=[],o,n,t=[],w,z,y=[],x={qa:[],wk:[],lb:[],elements:[]},F=new A.d,M=new A.$a,S=new A.M,O=new A.M,G=new A.Se,B=new A.$a,N=new A.$a;this.FA=function(a,b){return b.Ca.Pc(b.G),S.multiply(b.va,b.Ca),S.V(a),a};this.zk=function(a,b){b.mq.Pc(b.va);S.multiply(b.G,b.mq);S.V(a)};this.CA=function(a,b){var c;return a.a=-1,c=new A.d(a.x,
a.y,1),this.zk(a,b),this.zk(c,b),c.Ia(a).normalize(),new A.hs(a,c)};this.Yv=function(b){function c(b){if(b.visible!==v){(b instanceof A.C||b instanceof A.Xa)&&(b.lf===v||G.contains(b))?(F.copy(Rc(b.G)),S.V(F),e=a(),e.object=b,e.a=F.a,x.qa.push(e)):b instanceof A.yd||b instanceof A.Zd?(F.copy(Rc(b.G)),S.V(F),e=a(),e.object=b,e.a=F.a,x.wk.push(e)):b instanceof A.Tb&&x.lb.push(b);for(var f=0,g=b.children.length;f<g;f++)c(b.children[f])}}f=0;x.qa.length=0;x.wk.length=0;x.lb.length=0;return c(b),x};this.pn=
function(a,e,f){var h=e.Ua,F=e.bb,J=v,k,da,D,ja,H,Z,L,ha,ia,ca,Y,V,aa,ka,za;z=n=p=m=0;x.elements.length=0;e.parent===d&&(console.warn("DEPRECATED: Camera hasn't been added to a Scene. Adding it..."),a.add(e));a.bc();e.Ca.Pc(e.G);S.multiply(e.va,e.Ca);Qc(G,S);x=this.Yv(a);a=0;for(k=x.qa.length;a<k;a++)if(ia=x.qa[a].object,ca=ia.G,i=0,ia instanceof A.C){Y=ia.s;V=ia.s.T;ja=Y.g;aa=Y.l;ka=Y.H;Y=gd(ia.Ih,ca);da=0;for(D=ja.length;da<D;da++)g=b(),g.zc.copy(ja[da]),ca.V(g.zc),g.c.copy(g.zc),Hd(S,g.c),g.c.x/=
g.c.j,g.c.y/=g.c.j,g.visible=g.c.a>h&&g.c.a<F;ja=0;for(da=aa.length;ja<da;ja++){D=aa[ja];if(D instanceof A.ga){H=j[D.o];Z=j[D.b];L=j[D.w];if(!H.visible||!Z.visible||!L.visible)continue;J=0>(L.c.x-H.c.x)*(Z.c.y-H.c.y)-(L.c.y-H.c.y)*(Z.c.x-H.c.x);if(!ia.ha&&J==ia.md)continue;ha=q[m]=q[m]||new A.Tk;m++;l=ha;l.aa.copy(H);l.ba.copy(Z);l.pb.copy(L)}else if(D instanceof A.la){H=j[D.o];Z=j[D.b];L=j[D.w];ha=j[D.da];if(!H.visible||!Z.visible||!L.visible||!ha.visible)continue;J=0>(ha.c.x-H.c.x)*(Z.c.y-H.c.y)-
(ha.c.y-H.c.y)*(Z.c.x-H.c.x)||0>(Z.c.x-L.c.x)*(ha.c.y-L.c.y)-(Z.c.y-L.c.y)*(ha.c.x-L.c.x);if(!ia.ha&&J==ia.md)continue;za=s[p]=s[p]||new A.Uk;p++;l=za;l.aa.copy(H);l.ba.copy(Z);l.pb.copy(L);l.Bk.copy(ha)}l.Va.copy(D.R);!J&&(ia.md||ia.ha)&&l.Va.Rj();Y.V(l.Va);l.me.copy(D.xa);ca.V(l.me);l.dj.copy(l.me);S.V(l.dj);L=D.z;H=0;for(Z=L.length;H<Z;H++)ha=l.cc[H],ha.copy(L[H]),!J&&(ia.md||ia.ha)&&ha.Rj(),Y.V(ha);H=0;for(Z=ka.length;H<Z;H++)if(za=ka[H][ja]){L=0;for(ha=za.length;L<ha;L++)l.Kf[H][L]=za[L]}l.F=
ia.F;l.yj=D.pa!==u?V[D.pa]:u;l.a=l.dj.a;x.elements.push(l)}}else if(ia instanceof A.Xa){O.multiply(S,ca);ja=ia.s.g;H=b();H.c.copy(ja[0]);Hd(O,H.c);ca=ia.type===A.uo?2:1;da=1;for(D=ja.length;da<D;da++)H=b(),H.c.copy(ja[da]),Hd(O,H.c),0<(da+1)%ca||(Z=j[i-2],B.copy(H.c),N.copy(Z.c),H=B,Z=N,L=0,ha=1,Y=H.a+H.j,aa=Z.a+Z.j,ka=-H.a+H.j,za=-Z.a+Z.j,(0<=Y&&0<=aa&&0<=ka&&0<=za||(0>Y&&0>aa||0>ka&&0>za?0:(0>Y?L=Math.max(L,Y/(Y-aa)):0>aa&&(ha=Math.min(ha,Y/(Y-aa))),0>ka?L=Math.max(L,ka/(ka-za)):0>za&&(ha=Math.min(ha,
ka/(ka-za))),ha<L?v:(H.fa(Z,L),Z.fa(H,1-ha),r))))&&(B.X(1/B.j),N.X(1/N.j),V=t[n]=t[n]||new A.Vk,n++,o=V,o.aa.c.copy(B),o.ba.c.copy(N),o.a=Math.max(B.a,N.a),o.F=ia.F,x.elements.push(o)))}a=0;for(k=x.wk.length;a<k;a++)ia=x.wk[a].object,ca=ia.G,ia instanceof A.Zd&&(M.set(ca.elements[12],ca.elements[13],ca.elements[14],1),Hd(S,M),M.a/=M.j,0<M.a&&1>M.a&&(h=y[z]=y[z]||new A.Hi,z++,w=h,w.x=M.x/M.j,w.y=M.y/M.j,w.a=M.a,w.rotation=ia.rotation.a,w.scale.x=ia.scale.x*Math.abs(w.x-(M.x+e.va.elements[0])/(M.j+
e.va.elements[12])),w.scale.y=ia.scale.y*Math.abs(w.y-(M.y+e.va.elements[5])/(M.j+e.va.elements[13])),w.F=ia.F,x.elements.push(w)));return f&&x.elements.sort(c),x}};A.Wb=function(a,b,c,e){this.x=a||0;this.y=b||0;this.a=c||0;this.j=e!==d?e:1};
A.Wb.prototype={constructor:A.Wb,set:function(a,b,c,e){return this.x=a,this.y=b,this.a=c,this.j=e,this},copy:function(a){return this.x=a.x,this.y=a.y,this.a=a.a,this.j=a.j,this},inverse:function(){return this.x*=-1,this.y*=-1,this.a*=-1,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.a*this.a+this.j*this.j)},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.a*this.a+this.j*this.j);return 0===a?this.j=this.a=this.y=this.x=0:(a=1/a,this.x*=a,this.y*=a,this.a*=
a,this.j*=a),this},multiply:function(a,b){return this.x=a.x*b.j+a.y*b.a-a.a*b.y+a.j*b.x,this.y=-a.x*b.a+a.y*b.j+a.a*b.x+a.j*b.y,this.a=a.x*b.y-a.y*b.x+a.a*b.j+a.j*b.a,this.j=-a.x*b.x-a.y*b.y-a.a*b.a+a.j*b.j,this},vf:function(a){var b=this.x,c=this.y,e=this.a,f=this.j,h=a.x,g=a.y,i=a.a,a=a.j;return this.x=b*a+f*h+c*i-e*g,this.y=c*a+f*g+e*h-b*i,this.a=e*a+f*i+b*g-c*h,this.j=f*a-b*h-c*g-e*i,this},V:function(a,b){b||(b=a);var c=a.x,e=a.y,f=a.a,h=this.x,g=this.y,i=this.a,j=this.j,l=j*c+g*f-i*e,m=j*e+i*
c-h*f,q=j*f+h*e-g*c,c=-h*c-g*e-i*f;return b.x=l*j+c*-h+m*-i-q*-g,b.y=m*j+c*-g+q*-h-l*-i,b.a=q*j+c*-i+l*-g-m*-h,b},e:function(){return new A.Wb(this.x,this.y,this.a,this.j)}};function Kd(a,b,c){var c=c/2,e=Math.sin(c);a.x=b.x*e;a.y=b.y*e;a.a=b.a*e;a.j=Math.cos(c)}
A.Wb.Dw=function(a,b,c,e){var f=a.j*b.j+a.x*b.x+a.y*b.y+a.a*b.a;0>f?(c.j=-b.j,c.x=-b.x,c.y=-b.y,c.a=-b.a,f=-f):c.copy(b);if(1<=Math.abs(f))c.j=a.j,c.x=a.x,c.y=a.y,c.a=a.a;else{var h=Math.acos(f),f=Math.sqrt(1-f*f);0.0010>Math.abs(f)?(c.j=0.5*(a.j+b.j),c.x=0.5*(a.x+b.x),c.y=0.5*(a.y+b.y),c.a=0.5*(a.a+b.a)):(b=Math.sin((1-e)*h)/f,e=Math.sin(e*h)/f,c.j=a.j*b+c.j*e,c.x=a.x*b+c.x*e,c.y=a.y*b+c.y*e,c.a=a.a*b+c.a*e)}};A.Sx=function(){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.")};
A.ga=function(a,b,c,e,f,h){this.o=a;this.b=b;this.w=c;this.R=e instanceof A.d?e:new A.d;this.z=e instanceof Array?e:[];this.color=f instanceof A.v?f:new A.v;this.m=f instanceof Array?f:[];this.ud=[];this.pa=h;this.xa=new A.d};
A.ga.prototype={constructor:A.ga,e:function(){var a=new A.ga(this.o,this.b,this.w);a.R.copy(this.R);a.color.copy(this.color);a.xa.copy(this.xa);a.pa=this.pa;var b,c;b=0;for(c=this.z.length;b<c;b++)a.z[b]=this.z[b].e();b=0;for(c=this.m.length;b<c;b++)a.m[b]=this.m[b].e();b=0;for(c=this.ud.length;b<c;b++)a.ud[b]=this.ud[b].e();return a}};
A.la=function(a,b,c,e,f,h,g){this.o=a;this.b=b;this.w=c;this.da=e;this.R=f instanceof A.d?f:new A.d;this.z=f instanceof Array?f:[];this.color=h instanceof A.v?h:new A.v;this.m=h instanceof Array?h:[];this.ud=[];this.pa=g;this.xa=new A.d};
A.la.prototype={constructor:A.la,e:function(){var a=new A.la(this.o,this.b,this.w,this.da);a.R.copy(this.R);a.color.copy(this.color);a.xa.copy(this.xa);a.pa=this.pa;var b,c;b=0;for(c=this.z.length;b<c;b++)a.z[b]=this.z[b].e();b=0;for(c=this.m.length;b<c;b++)a.m[b]=this.m[b].e();b=0;for(c=this.ud.length;b<c;b++)a.ud[b]=this.ud[b].e();return a}};A.J=function(a,b){this.ia=a||0;this.Z=b||0};
A.J.prototype={constructor:A.J,set:function(a,b){return this.ia=a,this.Z=b,this},copy:function(a){return this.ia=a.ia,this.Z=a.Z,this},fa:function(a,b){return this.ia+=(a.ia-this.ia)*b,this.Z+=(a.Z-this.Z)*b,this},e:function(){return new A.J(this.ia,this.Z)}};A.Q=function(){this.id=A.so++;this.g=[];this.wb=[];this.T=[];this.l=[];this.Oc=[[]];this.H=[[]];this.O=[];this.ye=[];this.Ta=[];this.Rb=[];this.qd=[];this.nc=this.kd=u;this.uj=this.Fj=v};
A.Q.prototype={constructor:A.Q,ih:function(a){var b=new A.M;gd(b,a);for(var c=0,e=this.g.length;c<e;c++)a.V(this.g[c]);c=0;for(e=this.l.length;c<e;c++){var f=this.l[c];b.V(f.R);for(var h=0,g=f.z.length;h<g;h++)b.V(f.z[h]);a.V(f.xa)}},Pl:function(){this.kd||(this.kd={min:new A.d,max:new A.d});if(0<this.g.length){var a;a=this.g[0];this.kd.min.copy(a);this.kd.max.copy(a);for(var b=this.kd.min,c=this.kd.max,e=1,f=this.g.length;e<f;e++)a=this.g[e],a.x<b.x?b.x=a.x:a.x>c.x&&(c.x=a.x),a.y<b.y?b.y=a.y:a.y>
c.y&&(c.y=a.y),a.a<b.a?b.a=a.a:a.a>c.a&&(c.a=a.a)}else this.kd.min.set(0,0,0),this.kd.max.set(0,0,0)},kj:function(){this.nc||(this.nc={ra:0});for(var a,b=0,c=0,e=this.g.length;c<e;c++)a=this.g[c].length(),a>b&&(b=a);this.nc.ra=b}};
function Ud(a){var b={},c=[],e=[],f,h=Math.pow(10,4),g,i,j;g=0;for(i=a.g.length;g<i;g++)f=a.g[g],f=[Math.round(f.x*h),Math.round(f.y*h),Math.round(f.a*h)].join("_"),b[f]===d?(b[f]=g,c.push(a.g[g]),e[g]=c.length-1):e[g]=e[b[f]];g=0;for(i=a.l.length;g<i;g++)if(h=a.l[g],h instanceof A.ga)h.o=e[h.o],h.b=e[h.b],h.w=e[h.w];else if(h instanceof A.la){h.o=e[h.o];h.b=e[h.b];h.w=e[h.w];h.da=e[h.da];f=[h.o,h.b,h.w,h.da];for(b=3;0<b;b--)if(f.indexOf(h["abcd"[b]])!=b){f.splice(b,1);a.l[g]=new A.ga(f[0],f[1],f[2]);
h=0;for(f=a.H.length;h<f;h++)(j=a.H[h][g])&&j.splice(b,1);break}}a.g=c}
function Vd(a){function b(a,b,c,e,f,g,h){j=a.g[b];l=a.g[c];m=a.g[e];q=i[f];p=i[g];s=i[h];o=l.x-j.x;n=m.x-j.x;t=l.y-j.y;w=m.y-j.y;z=l.a-j.a;y=m.a-j.a;x=p.ia-q.ia;F=s.ia-q.ia;M=p.Z-q.Z;S=s.Z-q.Z;O=1/(x*S-F*M);U.set((S*o-M*n)*O,(S*t-M*w)*O,(S*z-M*y)*O);X.set((x*n-F*o)*O,(x*w-F*t)*O,(x*y-F*z)*O);B[b].L(U);B[c].L(U);B[e].L(U);N[b].L(X);N[c].L(X);N[e].L(X)}var c,e,f,h,g,i,j,l,m,q,p,s,o,n,t,w,z,y,x,F,M,S,O,G,B=[],N=[],U=new A.d,X=new A.d,T=new A.d,R=new A.d,I=new A.d;c=0;for(e=a.g.length;c<e;c++)B[c]=new A.d,
N[c]=new A.d;c=0;for(e=a.l.length;c<e;c++)g=a.l[c],i=a.H[0][c],g instanceof A.ga?b(a,g.o,g.b,g.w,0,1,2):g instanceof A.la&&(b(a,g.o,g.b,g.da,0,1,3),b(a,g.b,g.w,g.da,1,2,3));var J=["a","b","c","d"];c=0;for(e=a.l.length;c<e;c++){g=a.l[c];for(f=0;f<g.z.length;f++)I.copy(g.z[f]),h=g[J[f]],G=B[h],T.copy(G),T.Ia(I.X(I.Fa(G))).normalize(),Pc(R,g.z[f],G),h=R.Fa(N[h]),h=0>h?-1:1,g.ud[f]=new A.$a(T.x,T.y,T.a,h)}a.Fj=r}
function Wd(a){var b,c,e,f;if(a.gl===d){f=a.gl=Array(a.g.length);b=0;for(c=a.g.length;b<c;b++)f[b]=new A.d;b=0;for(c=a.l.length;b<c;b++)e=a.l[b],e instanceof A.ga?e.z=[new A.d,new A.d,new A.d]:e instanceof A.la&&(e.z=[new A.d,new A.d,new A.d,new A.d])}else{f=a.gl;b=0;for(c=a.g.length;b<c;b++)f[b].set(0,0,0)}b=0;for(c=a.l.length;b<c;b++)e=a.l[b],e instanceof A.ga?(f[e.o].L(e.R),f[e.b].L(e.R),f[e.w].L(e.R)):e instanceof A.la&&(f[e.o].L(e.R),f[e.b].L(e.R),f[e.w].L(e.R),f[e.da].L(e.R));b=0;for(c=a.g.length;b<
c;b++)f[b].normalize();b=0;for(c=a.l.length;b<c;b++)e=a.l[b],e instanceof A.ga?(e.z[0].copy(f[e.o]),e.z[1].copy(f[e.b]),e.z[2].copy(f[e.w])):e instanceof A.la&&(e.z[0].copy(f[e.o]),e.z[1].copy(f[e.b]),e.z[2].copy(f[e.w]),e.z[3].copy(f[e.da]))}function Xd(a){var b,c,e,f,h,g,i=new A.d,j=new A.d;b=0;for(c=a.l.length;b<c;b++)e=a.l[b],f=a.g[e.o],h=a.g[e.b],g=a.g[e.w],i.sub(g,h),j.sub(f,h),Oc(i,j),i.Lp()||i.normalize(),e.R.copy(i)}
function Yd(a){var b,c,e;b=0;for(c=a.l.length;b<c;b++)e=a.l[b],e.xa.set(0,0,0),e instanceof A.ga?(e.xa.L(a.g[e.o]),e.xa.L(a.g[e.b]),e.xa.L(a.g[e.w]),e.xa.pc(3)):e instanceof A.la&&(e.xa.L(a.g[e.o]),e.xa.L(a.g[e.b]),e.xa.L(a.g[e.w]),e.xa.L(a.g[e.da]),e.xa.pc(4))}A.so=0;
A.ns=function(){function a(a,b,c,e,f,g,h){return a=0.5*(c-a),e=0.5*(e-b),(2*(b-c)+a+e)*h+(-3*(b-c)-2*a-e)*g+a*f+b}this.P=d;var b=[],c={x:0,y:0,a:0},e,f,h,g,i,j,l,m,q;this.uu=function(a){this.P=[];for(var b=0;b<a.length;b++)this.P[b]={x:a[b][0],y:a[b][1],a:a[b][2]}};this.La=function(p){return e=(this.P.length-1)*p,f=Math.floor(e),h=e-f,b[0]=0===f?f:f-1,b[1]=f,b[2]=f>this.P.length-2?this.P.length-1:f+1,b[3]=f>this.P.length-3?this.P.length-1:f+2,j=this.P[b[0]],l=this.P[b[1]],m=this.P[b[2]],q=this.P[b[3]],
g=h*h,i=h*g,c.x=a(j.x,l.x,m.x,q.x,h,g,i),c.y=a(j.y,l.y,m.y,q.y,h,g,i),c.a=a(j.a,l.a,m.a,q.a,h,g,i),c};this.ju=function(){var a,b,c=this.P.length,e=[];for(a=0;a<c;a++)b=this.P[a],e[a]=[b.x,b.y,b.a];return e};this.nf=function(a){var b,c,e,f=0,g=new A.d,h=new A.d,i=[],j=0;i[0]=0;a||(a=100);c=this.P.length*a;g.copy(this.P[0]);for(a=1;a<c;a++)b=a/c,e=this.La(b),h.copy(e),j+=h.Gb(g),g.copy(e),b*=this.P.length-1,b=Math.floor(b),b!=f&&(i[b]=j,f=b);return i[i.length]=j,{Nl:i,total:j}};this.jw=function(a){var b,
c,e,f,g,h,i=[],j=new A.d,l=this.nf();i.push(j.copy(this.P[0]).e());for(b=1;b<this.P.length;b++){c=l.Nl[b]-l.Nl[b-1];h=Math.ceil(a*c/l.total);f=(b-1)/(this.P.length-1);g=b/(this.P.length-1);for(c=1;c<h-1;c++)e=f+c*(1/h)*(g-f),e=this.La(e),i.push(j.copy(e).e());i.push(j.copy(this.P[b]).e())}this.P=i}};A.fc=function(){A.D.call(this);this.Ca=new A.M;this.va=new A.M;this.mq=new A.M};A.fc.prototype=new A.D;A.fc.prototype.constructor=A.fc;
A.fc.prototype.oa=function(a){this.u.oa(this.position,a,this.Ra);this.hk&&Ec(this.rotation,this.u)};A.Yd=function(a,b,c,e,f,h){A.fc.call(this);this.left=a;this.right=b;this.top=c;this.bottom=e;this.Ua=f!==d?f:0.1;this.bb=h!==d?h:2E3;this.Ud()};A.Yd.prototype=new A.fc;A.Yd.prototype.constructor=A.Yd;
A.Yd.prototype.Ud=function(){var a=this.left,b=this.right,c=this.top,e=this.bottom,f=this.Ua,h=this.bb,g=this.va.elements,i=b-a,j=c-e,l=h-f;g[0]=2/i;g[4]=0;g[8]=0;g[12]=-((b+a)/i);g[1]=0;g[5]=2/j;g[9]=0;g[13]=-((c+e)/j);g[2]=0;g[6]=0;g[10]=-2/l;g[14]=-((h+f)/l);g[3]=0;g[7]=0;g[11]=0;g[15]=1};A.Pa=function(a,b,c,e){A.fc.call(this);this.kf=a!==d?a:50;this.cg=b!==d?b:1;this.Ua=c!==d?c:0.1;this.bb=e!==d?e:2E3;this.Ud()};A.Pa.prototype=new A.fc;A.Pa.prototype.constructor=A.Pa;
A.Pa.prototype.Ud=function(){if(this.qm){var a=this.qm/this.xp,b=Math.tan(this.kf*Math.PI/360)*this.Ua,c=-b,e=a*c,a=Math.abs(a*b-e),c=Math.abs(b-c);jd(this.va,e+this.x*a/this.qm,e+(this.x+this.width)*a/this.qm,b-(this.y+this.height)*c/this.xp,b-this.y*c/this.xp,this.Ua,this.bb)}else a=this.kf,b=this.cg,c=this.Ua,a=c*Math.tan(a*Math.PI/360),e=-a,jd(this.va,e*b,a*b,e,a,c,this.bb)};A.Tb=function(a){A.D.call(this);this.color=new A.v(a)};A.Tb.prototype=new A.D;A.Tb.prototype.constructor=A.Tb;
A.Ne=function(a){A.Tb.call(this,a)};A.Ne.prototype=new A.Tb;A.Ne.prototype.constructor=A.Ne;
A.tb=function(a,b,c){A.Tb.call(this,a);this.position=new A.d(0,1,0);this.target=new A.D;this.nd=b!==d?b:1;this.kb=c!==d?c:0;this.Yj=this.oc=v;this.$h=50;this.Zh=5E3;this.En=-500;this.Gn=this.Fn=500;this.Dn=-500;this.Ge=v;this.Ng=0;this.He=0.5;this.bi=this.di=512;this.Hn=v;this.zw=new A.d(0,0,-1E3);this.xw=2;this.Gq=[0,0,0];this.Aw=[512,512,512];this.yw=[512,512,512];this.Iq=[-1,0.99,0.998];this.Hq=[0.99,0.998,1];this.qk=[];this.Ef=this.Td=this.ci=this.Df=u};A.tb.prototype=new A.Tb;
A.tb.prototype.constructor=A.tb;A.dd=function(a,b,c){A.Tb.call(this,a);this.position=new A.d(0,0,0);this.nd=b!==d?b:1;this.kb=c!==d?c:0};A.dd.prototype=new A.Tb;A.dd.prototype.constructor=A.dd;
A.ce=function(a,b,c,e,f){A.Tb.call(this,a);this.position=new A.d(0,1,0);this.target=new A.D;this.nd=b!==d?b:1;this.kb=c!==d?c:0;this.ap=e!==d?e:Math.PI/2;this.Xt=f!==d?f:10;this.Yj=this.oc=v;this.$h=50;this.Zh=5E3;this.ww=50;this.Ge=v;this.Ng=0;this.He=0.5;this.bi=this.di=512;this.Ef=this.Td=this.ci=this.Df=u};A.ce.prototype=new A.Tb;A.ce.prototype.constructor=A.ce;
A.Xd=function(a){(this.fB=a)?(a=document.createElement("div"),a=(a.style.position="absolute",a.style.right="0px",a.style.top="0px",a.style.fontSize="0.8em",a.style.textAlign="left",a.style.background="rgba(0,0,0,0.25)",a.style.color="#fff",a.style.width="120px",a.style.padding="0.5em 0.5em 0.5em 0.5em",a.style.zIndex=1E3,a.innerHTML="Loading ...",a)):a=u;this.Qw=a;this.Kv=la();this.Jv=la();this.Iv=la()};
A.Xd.prototype={constructor:A.Xd,crossOrigin:"anonymous",bx:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/a.total).toFixed(0)+"%"):b+((a.loaded/1E3).toFixed(2)+" KB");this.Qw.innerHTML=b}};
function Zd(a,b){function c(a){return a=Math.log(a)/Math.LN2,Math.floor(a)==a}function e(a){return a=Math.log(a)/Math.LN2,Math.pow(2,Math.round(a))}function f(a,f,h,i,j,l){var t=document.createElement("canvas");a[f]=new A.uc(t);a[f].lB=h;i&&(a[f].repeat.set(i[0],i[1]),1!=i[0]&&(a[f].dc=A.Ic),1!=i[1]&&(a[f].ec=A.Ic));j&&a[f].offset.set(j[0],j[1]);l&&(i={repeat:A.Ic,lv:A.Ok},i[l[0]]!==d&&(a[f].dc=i[l[0]]),i[l[1]]!==d&&(a[f].ec=i[l[1]]));var w=a[f],a=b+"/"+h,f=new Image;f.onload=function(){if(!c(this.width)||
!c(this.height)){var a=e(this.width),b=e(this.height);w.ea.width=a;w.ea.height=b;w.ea.getContext("2d").drawImage(this,0,0,a,b)}else w.ea=this;w.Aa=r};f.crossOrigin=g.crossOrigin;f.src=a}function h(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var g=A.Xd.prototype,i="MeshLambertMaterial",j={color:15658734,opacity:1,map:u,Qa:u,dn:u,Y:a.Y};if(a.Ha){var l=a.Ha.toLowerCase();"phong"===l?i="MeshPhongMaterial":"basic"===l&&(i="MeshBasicMaterial")}a.wa!==d&&A[a.wa]!==d&&(j.wa=A[a.wa]);if(a.Ma!==d||1>a.opacity)j.Ma=
a.Ma;return a.pe!==d&&(j.pe=a.pe),a.Jd!==d&&(j.Jd=a.Jd),a.m!==d&&("face"==a.m?j.m=A.Jk:a.m&&(j.m=A.Ki)),a.zt?j.color=h(a.zt):a.Hr&&(j.color=a.Hr),a.At&&(j.rd=h(a.At)),a.yt&&(j.Ja=h(a.yt)),a.$w&&(j.opacity=a.$w),a.Gw&&(j.Ie=a.Gw),a.Vu&&b&&f(j,"map",a.Vu,a.Wz,a.Vz,a.Xz),a.Wu&&b&&f(j,"lightMap",a.Wu,a.Zz,a.Yz,a.$z),a.Qp&&b&&f(j,"normalMap",a.Qp,a.bA,a.aA,a.cA),a.Yu&&b&&f(j,"specularMap",a.Yu,a.eA,a.dA,a.fA),a.Qp?(i=A.Co.Np.R,l=A.Lb.e(i.n),l.Rq.t=j.dn,a.Xu&&(l.gr.value=a.Xu),j.map&&(l.Ba.t=j.map,l.qp.value=
r),j.Qn&&(l.Sq.t=j.Qn,l.rp.value=r),j.Qa&&(l.Oq.t=j.Qa,l.pp.value=r),Ub(l.fr.value,j.color),Ub(l.jr.value,j.rd),Ub(l.er.value,j.Ja),l.ir.value=j.Ie,j.opacity!==d&&(l.hr.value=j.opacity),j=new A.Za({A:i.A,B:i.B,n:l,lb:r,N:r})):j=new A[i](j),a.Ir!==d&&(j.name=a.Ir),j}function $d(a){var b,c,e=a.T.length;for(c=0;c<e;c++)if(b=a.T[c],b instanceof A.Za)return r;return v}function ae(a,b,c){a.T=[];for(var e=0;e<b.length;++e)a.T[e]=Zd(b[e],c)}
function be(a){return a=a.split("/"),a.pop(),(1>a.length?".":a.join("/"))+"/"}A.Of=function(a){A.Xd.call(this,a)};A.Of.prototype=new A.Xd;A.Of.prototype.constructor=A.Of;A.Of.prototype.load=function(a,b,c,e){c=c?c:be(a);e=e?e:be(a);this.Lm(this,a,b,c,e,this.eB?A.Xd.prototype.bx:u)};
A.Of.prototype.Lm=function(a,b,c,e,f,h){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState)if(200==g.status||0==g.status){var a=JSON.parse(g.responseText),j=new XMLHttpRequest,l=f+"/"+a.sy,m=0;j.onreadystatechange=function(){if(4==j.readyState)if(200==j.status||0==j.status){var b=j.response,f=a.T,g=function(a){function c(a){return a%4?4-a%4:0}function e(a,b){return(new Uint8Array(a,b,1))[0]}function g(a,b){return(new Uint32Array(a,b,1))[0]}function h(a,c){var e,f,g,i,j,k,
l,p,n=new Uint32Array(b,c,3*a);for(e=0;e<a;e++){f=n[3*e];g=n[3*e+1];i=n[3*e+2];j=ia[2*f];f=ia[2*f+1];k=ia[2*g];l=ia[2*g+1];g=ia[2*i];p=ia[2*i+1];i=Z.H[0];var m=[];m.push(new A.J(j,f));m.push(new A.J(k,l));m.push(new A.J(g,p));i.push(m)}}function i(a,c){var e,f,g,h,j,k,l,p,n,m,o=new Uint32Array(b,c,4*a);for(e=0;e<a;e++){f=o[4*e];g=o[4*e+1];h=o[4*e+2];j=o[4*e+3];k=ia[2*f];f=ia[2*f+1];l=ia[2*g];n=ia[2*g+1];p=ia[2*h];m=ia[2*h+1];h=ia[2*j];g=ia[2*j+1];j=Z.H[0];var s=[];s.push(new A.J(k,f));s.push(new A.J(l,
n));s.push(new A.J(p,m));s.push(new A.J(h,g));j.push(s)}}function j(a,c,e){for(var f,g,h,i,c=new Uint32Array(b,c,3*a),k=new Uint16Array(b,e,a),e=0;e<a;e++)f=c[3*e],g=c[3*e+1],h=c[3*e+2],i=k[e],Z.l.push(new A.ga(f,g,h,u,u,i))}function l(a,c,e){for(var f,g,h,i,j,c=new Uint32Array(b,c,4*a),k=new Uint16Array(b,e,a),e=0;e<a;e++)f=c[4*e],g=c[4*e+1],h=c[4*e+2],i=c[4*e+3],j=k[e],Z.l.push(new A.la(f,g,h,i,u,u,j))}function m(a,c,e,f){for(var g,h,i,j,k,l,p,c=new Uint32Array(b,c,3*a),e=new Uint32Array(b,e,3*
a),n=new Uint16Array(b,f,a),f=0;f<a;f++){g=c[3*f];h=c[3*f+1];i=c[3*f+2];k=e[3*f];l=e[3*f+1];p=e[3*f+2];j=n[f];var o=ha[3*l],s=ha[3*l+1];l=ha[3*l+2];var t=ha[3*p],w=ha[3*p+1];p=ha[3*p+2];Z.l.push(new A.ga(g,h,i,[new A.d(ha[3*k],ha[3*k+1],ha[3*k+2]),new A.d(o,s,l),new A.d(t,w,p)],u,j))}}function s(a,c,e,f){for(var g,h,i,j,k,l,p,n,m,c=new Uint32Array(b,c,4*a),e=new Uint32Array(b,e,4*a),o=new Uint16Array(b,f,a),f=0;f<a;f++){g=c[4*f];h=c[4*f+1];i=c[4*f+2];j=c[4*f+3];l=e[4*f];p=e[4*f+1];n=e[4*f+2];m=e[4*
f+3];k=o[f];var t=ha[3*p],w=ha[3*p+1];p=ha[3*p+2];var x=ha[3*n],y=ha[3*n+1];n=ha[3*n+2];var z=ha[3*m],D=ha[3*m+1];m=ha[3*m+2];Z.l.push(new A.la(g,h,i,j,[new A.d(ha[3*l],ha[3*l+1],ha[3*l+2]),new A.d(t,w,p),new A.d(x,y,n),new A.d(z,D,m)],u,k))}}var O,G,B,N,U,X,T,R,I,J,k,da,D,ja,H,Z=this,L=0,ha=[],ia=[],ca,Y,V;A.Q.call(this);ae(Z,f,a);O=b;O=new Uint8Array(O,L,12);for(O=0;12>O;O++);O=e(b,L+12);e(b,L+13);e(b,L+14);e(b,L+15);G=e(b,L+16);B=e(b,L+17);N=e(b,L+18);U=e(b,L+19);X=g(b,L+20);T=g(b,L+20+4);R=g(b,
L+20+8);a=g(b,L+20+12);I=g(b,L+20+16);J=g(b,L+20+20);k=g(b,L+20+24);da=g(b,L+20+28);D=g(b,L+20+32);ja=g(b,L+20+36);H=g(b,L+20+40);L+=O;O=3*G+U;V=4*G+U;ca=a*O;Y=I*(O+3*B);G=J*(O+3*N);U=k*(O+3*B+3*N);O=da*V;B=D*(V+4*B);N=ja*(V+4*N);V=L;var L=new Float32Array(b,L,3*X),aa,ka,za,ab;for(aa=0;aa<X;aa++)ka=L[3*aa],za=L[3*aa+1],ab=L[3*aa+2],Z.g.push(new A.d(ka,za,ab));X=L=V+3*X*Float32Array.BYTES_PER_ELEMENT;if(T){L=new Int8Array(b,L,3*T);for(V=0;V<T;V++)aa=L[3*V],ka=L[3*V+1],za=L[3*V+2],ha.push(aa/127,ka/
127,za/127)}L=X+3*T*Int8Array.BYTES_PER_ELEMENT;T=L+=c(3*T);if(R){L=new Float32Array(b,L,2*R);for(X=0;X<R;X++)V=L[2*X],aa=L[2*X+1],ia.push(V,aa)}L=T+2*R*Float32Array.BYTES_PER_ELEMENT;ca=L+ca+c(2*a);Y=ca+Y+c(2*I);G=Y+G+c(2*J);U=G+U+c(2*k);O=U+O+c(2*da);B=O+B+c(2*D);N=B+N+c(2*ja);J&&(R=Y+3*J*Uint32Array.BYTES_PER_ELEMENT,j(J,Y,R+3*J*Uint32Array.BYTES_PER_ELEMENT),h(J,R));k&&(J=G+3*k*Uint32Array.BYTES_PER_ELEMENT,Y=J+3*k*Uint32Array.BYTES_PER_ELEMENT,m(k,G,J,Y+3*k*Uint32Array.BYTES_PER_ELEMENT),h(k,
Y));ja&&(G=B+4*ja*Uint32Array.BYTES_PER_ELEMENT,l(ja,B,G+4*ja*Uint32Array.BYTES_PER_ELEMENT),i(ja,G));H&&(B=N+4*H*Uint32Array.BYTES_PER_ELEMENT,ja=B+4*H*Uint32Array.BYTES_PER_ELEMENT,s(H,N,B,ja+4*H*Uint32Array.BYTES_PER_ELEMENT),i(H,ja));a&&j(a,L,L+3*a*Uint32Array.BYTES_PER_ELEMENT);I&&(a=ca+3*I*Uint32Array.BYTES_PER_ELEMENT,m(I,ca,a,a+3*I*Uint32Array.BYTES_PER_ELEMENT));da&&l(da,U,U+4*da*Uint32Array.BYTES_PER_ELEMENT);D&&(U=O+4*D*Uint32Array.BYTES_PER_ELEMENT,s(D,O,U,U+4*D*Uint32Array.BYTES_PER_ELEMENT));
Yd(this);Xd(this);$d(this)&&Vd(this)};g.prototype=new A.Q;g.prototype.constructor=g;c(new g(e))}else console.error("THREE.BinaryLoader: Couldn't load ["+l+"] ["+j.status+"]");else 3==j.readyState?h&&(0==m&&(m=j.getResponseHeader("Content-Length")),h({total:m,loaded:j.responseText.length})):2==j.readyState&&(m=j.getResponseHeader("Content-Length"))};j.open("GET",l,r);j.responseType="arraybuffer";j.send(u)}else console.error("THREE.BinaryLoader: Couldn't load ["+b+"] ["+g.status+"]")};g.open("GET",
b,r);g.overrideMimeType&&g.overrideMimeType("text/plain; charset=x-user-defined");g.setRequestHeader("Content-Type","text/plain");g.send(u)};A.Sf=function(a){A.Xd.call(this,a)};A.Sf.prototype=new A.Xd;A.Sf.prototype.constructor=A.Sf;A.Sf.prototype.load=function(a,b,c){c=c?c:be(a);this.Lm(this,a,b,c)};
A.Sf.prototype.Lm=function(a,b,c,e,f){var h=new XMLHttpRequest,g=0;h.onreadystatechange=function(){if(h.readyState===h.DONE)if(200===h.status||0===h.status)if(h.responseText){var a=JSON.parse(h.responseText);ce(a,c,e)}else console.warn("THREE.JSONLoader: ["+b+"] seems to be unreachable or file there is empty");else console.error("THREE.JSONLoader: Couldn't load ["+b+"] ["+h.status+"]");else h.readyState===h.LOADING?f&&(0===g&&(g=h.getResponseHeader("Content-Length")),f({total:g,loaded:h.responseText.length})):
h.readyState===h.Dx&&(g=h.getResponseHeader("Content-Length"))};h.open("GET",b,r);h.overrideMimeType&&h.overrideMimeType("text/plain; charset=x-user-defined");h.setRequestHeader("Content-Type","text/plain");h.send(u)};
function ce(a,b,c){var e=new A.Q,f=a.scale!==d?1/a.scale:1;ae(e,a.T,c);var c=f,h,g,i,j,l,m,q,p,s,o,n,t,w,z,y=a.l;m=a.g;var x=a.Oh,F=a.wb,M=0;for(h=0;h<a.Kf.length;h++)a.Kf[h].length&&M++;for(h=0;h<M;h++)e.Oc[h]=[],e.H[h]=[];j=0;for(l=m.length;j<l;)q=new A.d,q.x=m[j++]*c,q.y=m[j++]*c,q.a=m[j++]*c,e.g.push(q);j=0;for(l=y.length;j<l;){c=y[j++];m=c&1;i=c&2;h=c&4;g=c&8;p=c&16;q=c&32;o=c&64;c&=128;m?(n=new A.la,n.o=y[j++],n.b=y[j++],n.w=y[j++],n.da=y[j++],m=4):(n=new A.ga,n.o=y[j++],n.b=y[j++],n.w=y[j++],
m=3);i&&(i=y[j++],n.pa=i);i=e.l.length;if(h)for(h=0;h<M;h++)t=a.Kf[h],s=y[j++],z=t[2*s],s=t[2*s+1],e.Oc[h][i]=new A.J(z,s);if(g)for(h=0;h<M;h++){t=a.Kf[h];w=[];for(g=0;g<m;g++)s=y[j++],z=t[2*s],s=t[2*s+1],w[g]=new A.J(z,s);e.H[h][i]=w}p&&(p=3*y[j++],g=new A.d,g.x=x[p++],g.y=x[p++],g.a=x[p],n.R=g);if(q)for(h=0;h<m;h++)p=3*y[j++],g=new A.d,g.x=x[p++],g.y=x[p++],g.a=x[p],n.z.push(g);o&&(q=y[j++],q=new A.v(F[q]),n.color=q);if(c)for(h=0;h<m;h++)q=y[j++],q=new A.v(F[q]),n.m.push(q);e.l.push(n)}if(a.Rb){n=
0;for(c=a.Rb.length;n<c;n+=2)h=a.Rb[n],g=a.Rb[n+1],e.Rb.push(new A.$a(h,g,0,0))}if(a.qd){n=0;for(c=a.qd.length;n<c;n+=2)h=a.qd[n],g=a.qd[n+1],e.qd.push(new A.$a(h,g,0,0))}e.ib=a.ib;e.zl=a.zl;if(a.O!==d){n=0;for(c=a.O.length;n<c;n++){e.O[n]={};e.O[n].name=a.O[n].name;e.O[n].g=[];i=e.O[n].g;j=a.O[n].g;h=0;for(g=j.length;h<g;h+=3)l=new A.d,l.x=j[h]*f,l.y=j[h+1]*f,l.a=j[h+2]*f,i.push(l)}}if(a.ye!==d){n=0;for(c=a.ye.length;n<c;n++){e.ye[n]={};e.ye[n].name=a.ye[n].name;e.ye[n].wb=[];g=e.ye[n].wb;i=a.ye[n].wb;
f=0;for(h=i.length;f<h;f+=3)j=new A.v(16755200),ac(j,i[f],i[f+1],i[f+2]),g.push(j)}}Yd(e);Xd(e);$d(e)&&Vd(e);b(e)}A.Wk=function(){this.Kv=la();this.Jv=la();this.Iv=la();this.uy=la();this.ty=la()};A.Wk.prototype.constructor=A.Wk;
A.Wk.prototype.load=function(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status||0==c.status){var e=JSON.parse(c.responseText),f=a,h=function(a,b){return"relativeToHTML"==b?a:m+"/"+a},g=function(){var a;for(s in I.qa)if(!D.qa[s])if(z=I.qa[s],z.s!==d){if(U=D.Na[z.s])X=D.T[z.T[0]],X instanceof A.Za&&Vd(U),M=z.position,S=z.rotation,O=z.Vc,G=z.scale,y=z.u,O=0,0==z.T.length&&(X=new A.We),1<z.T.length&&(X=new A.We),a=new A.C(U,X),a.name=s,y?(a.Pb=v,a.u.set(y[0],
y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15])):(a.position.set(M[0],M[1],M[2]),O?(a.Vc.set(O[0],O[1],O[2],O[3]),a.Vd=r):a.rotation.set(S[0],S[1],S[2]),a.scale.set(G[0],G[1],G[2])),a.visible=z.visible,a.ha=z.ha,a.oc=z.oc,a.Eg=z.Eg,D.I.add(a),D.qa[s]=a}else M=z.position,S=z.rotation,O=z.Vc,G=z.scale,O=0,a=new A.D,a.name=s,a.position.set(M[0],M[1],M[2]),O?(a.Vc.set(O[0],O[1],O[2],O[3]),a.Vd=r):a.rotation.set(S[0],S[1],S[2]),a.scale.set(G[0],G[1],G[2]),a.visible=z.visible!==
d?z.visible:v,D.I.add(a),D.qa[s]=a,D.Vt[s]=a},i=function(a){return function(b){D.Na[a]=b;g();k-=1;l()}},j=function(a){return function(b){D.Na[a]=b}},l=function(){0==k&&0==da&&b(D)},m=be(f),q,p,s,o,n,t,w,z,y,x,F,M,S,O,G,B,N,U,X,T,R,I,J,k,da,D;I=e;f=new A.Of;J=new A.Sf;da=k=0;D={I:new A.ae,Na:{},T:{},Zc:{},qa:{},jb:{},lb:{},Ch:{},Vt:{}};if(I.transform&&(e=I.transform.position,x=I.transform.rotation,B=I.transform.scale,e&&D.I.position.set(e[0],e[1],e[2]),x&&D.I.rotation.set(x[0],x[1],x[2]),B&&D.I.scale.set(B[0],
B[1],B[2]),e||x||B))D.I.td(),D.I.bc();e=function(){da-=1;l()};for(n in I.jb)B=I.jb[n],"perspective"==B.type?T=new A.Pa(B.kf,B.cg,B.Ua,B.bb):"ortho"==B.type&&(T=new A.Yd(B.left,B.right,B.top,B.bottom,B.Ua,B.bb)),M=B.position,x=B.target,B=B.Ra,T.position.set(M[0],M[1],M[2]),T.target=new A.d(x[0],x[1],x[2]),B&&T.Ra.set(B[0],B[1],B[2]),D.jb[n]=T;for(o in I.lb)x=I.lb[o],n=x.color!==d?x.color:16777215,T=x.nd!==d?x.nd:1,"directional"==x.type?(M=x.direction,F=new A.tb(n,T),F.position.set(M[0],M[1],M[2]),
F.position.normalize()):"point"==x.type?(M=x.position,F=x.kb,F=new A.dd(n,T,F),F.position.set(M[0],M[1],M[2])):"ambient"==x.type&&(F=new A.Ne(n)),D.I.add(F),D.lb[o]=F;for(t in I.Ch)o=I.Ch[t],"linear"==o.type?R=new A.qo(0,o.Ua,o.bb):"exp2"==o.type&&(R=new A.xi(0,o.lp)),B=o.color,ac(R.color,B[0],B[1],B[2]),D.Ch[t]=R;D.jb&&I.jf.W&&(D.Ka=D.jb[I.jf.W]);D.Ch&&I.jf.N&&(D.I.N=D.Ch[I.jf.N]);B=I.jf.hy;D.bgColor=new A.v;ac(D.bgColor,B[0],B[1],B[2]);D.fy=I.jf.gy;for(q in I.Na)if(t=I.Na[q],"bin_mesh"==t.type||
"ascii_mesh"==t.type)k+=1;for(q in I.Na)t=I.Na[q],"cube"==t.type?(U=new A.sc(t.width,t.height,t.depth,t.Eq,t.Dq,t.VA,u,t.cz),D.Na[q]=U):"plane"==t.type?(U=new A.cd(t.width,t.height,t.Eq,t.Dq),D.Na[q]=U):"sphere"==t.type?(U=new A.Uf(t.ra,t.Eq,t.Dq),D.Na[q]=U):"cylinder"==t.type?(U=new A.Rf(t.FB,t.oy,t.height,t.GA,t.tz),D.Na[q]=U):"torus"==t.type?(U=new A.Ji(t.ra,t.Jf,t.Qb,t.gb),D.Na[q]=U):"icosahedron"==t.type?(U=new A.zi(t.ra,t.Sw),D.Na[q]=U):"bin_mesh"==t.type?f.load(h(t.url,I.co),i(q)):"ascii_mesh"==
t.type?J.load(h(t.url,I.co),i(q)):"embedded_mesh"==t.type&&(t=I.embeds[t.id],t.jv=I.jv,t&&ce(t,j(q),""));for(w in I.Zc)if(q=I.Zc[w],q.url instanceof Array){da+=q.url.length;for(t=0;t<q.url.length;t++);}else da+=1;for(w in I.Zc){q=I.Zc[w];q.Tc!=d&&A[q.Tc]!=d&&(q.Tc=new A[q.Tc]);if(q.url instanceof Array){t=[];for(R=0;R<q.url.length;R++)t[R]=h(q.url[R],I.co);t=A.vd.Ru(t,q.Tc,e)}else t=A.vd.ue(h(q.url,I.co),q.Tc,e),A[q.eb]!=d&&(t.eb=A[q.eb]),A[q.yb]!=d&&(t.yb=A[q.yb]),q.repeat&&(t.repeat.set(q.repeat[0],
q.repeat[1]),1!=q.repeat[0]&&(t.dc=A.Ic),1!=q.repeat[1]&&(t.ec=A.Ic)),q.offset&&t.offset.set(q.offset[0],q.offset[1]),q.ti&&(R={repeat:A.Ic,lv:A.Ok},R[q.ti[0]]!==d&&(t.dc=R[q.ti[0]]),R[q.ti[1]]!==d&&(t.ec=R[q.ti[1]]));D.Zc[w]=t}for(p in I.T){y=I.T[p];for(N in y.ca)"envMap"==N||"map"==N||"lightMap"==N?y.ca[N]=D.Zc[y.ca[N]]:"shading"==N?y.ca[N]="flat"==y.ca[N]?A.wi:A.Kc:"blending"==N?y.ca[N]=A[y.ca[N]]?A[y.ca[N]]:A.Xe:"combine"==N?y.ca[N]="MixOperation"==y.ca[N]?A.Xr:A.Ci:"vertexColors"==N&&("face"==
y.ca[N]?y.ca[N]=A.Jk:y.ca[N]&&(y.ca[N]=A.Ki));y.ca.opacity!==d&&1>y.ca.opacity&&(y.ca.Ma=r);y.ca.dn?(w=A.Co.Np.R,e=A.Lb.e(w.n),q=y.ca.color,t=y.ca.rd,R=y.ca.Ja,f=y.ca.Ie,e.Rq.t=D.Zc[y.ca.dn],y.ca.vv&&(e.gr.value=y.ca.vv),y.ca.map&&(e.Ba.t=y.ca.map,e.qp.value=r),y.ca.Qa&&(e.Oq.t=y.ca.Qa,e.pp.value=r),y.ca.Qn&&(e.Sq.t=D.Zc[y.ca.Qn],e.rp.value=r),Ub(e.fr.value,q),Ub(e.jr.value,t),Ub(e.er.value,R),e.ir.value=f,y.ca.opacity&&(e.hr.value=y.ca.opacity),X=new A.Za({A:w.A,B:w.B,n:e,lb:r,N:r})):X=new A[y.type](y.ca);
D.T[p]=X}g();l()}else console.error("THREE.SceneLoader: Couldn't load ["+a+"] ["+c.status+"]")};c.open("GET",a,r);c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined");c.setRequestHeader("Content-Type","text/plain");c.send(u)};
A.Ya=function(a){a=a||{};this.id=A.Wr++;this.name="";this.opacity=a.opacity!==d?a.opacity:1;this.Ma=a.Ma!==d?a.Ma:v;this.wa=a.wa!==d?a.wa:A.Xe;this.jd=a.jd!==d?a.jd:A.$k;this.hd=a.hd!==d?a.hd:A.Rk;this.blendEquation=a.blendEquation!==d?a.blendEquation:A.Dk;this.pe=a.pe!==d?a.pe:r;this.Jd=a.Jd!==d?a.Jd:r;this.polygonOffset=a.polygonOffset!==d?a.polygonOffset:v;this.Th=a.Th!==d?a.Th:0;this.Uh=a.Uh!==d?a.Uh:0;this.bg=a.bg!==d?a.bg:0;this.Zj=a.Zj!==d?a.Zj:v;this.Aa=this.visible=r};A.Wr=0;A.Gx=0;
A.wi=1;A.Kc=2;A.Di=0;A.Jk=1;A.Ki=2;A.Zr=0;A.Xe=1;A.Jb=2;A.ss=3;A.Yr=4;A.px=5;A.oo=6;A.Dk=100;A.rs=101;A.js=102;A.As=200;A.as=201;A.qs=202;A.ds=203;A.$k=204;A.Rk=205;A.Jr=206;A.bs=207;A.Kr=208;A.cs=209;A.ps=210;A.Ub=function(a){A.Ya.call(this,a);a=a||{};this.color=a.color!==d?new A.v(a.color):new A.v(16777215);this.rf=a.rf!==d?a.rf:1;this.Jj=a.Jj!==d?a.Jj:"round";this.Kj=a.Kj!==d?a.Kj:"round";this.m=a.m?a.m:v;this.N=a.N!==d?a.N:r};A.Ub.prototype=new A.Ya;A.Ub.prototype.constructor=A.Ub;
A.ua=function(a){A.Ya.call(this,a);a=a||{};this.color=a.color!==d?new A.v(a.color):new A.v(16777215);this.map=a.map!==d?a.map:u;this.Qa=a.Qa!==d?a.Qa:u;this.Ga=a.Ga!==d?a.Ga:u;this.Nc=a.Nc!==d?a.Nc:A.Ci;this.Wc=a.Wc!==d?a.Wc:1;this.Xc=a.Xc!==d?a.Xc:0.98;this.N=a.N!==d?a.N:r;this.Ha=a.Ha!==d?a.Ha:A.Kc;this.Y=a.Y!==d?a.Y:v;this.sa=a.sa!==d?a.sa:1;this.qb=a.qb!==d?a.qb:"round";this.rb=a.rb!==d?a.rb:"round";this.m=a.m!==d?a.m:A.Di;this.ob=a.ob!==d?a.ob:v;this.O=a.O!==d?a.O:v};A.ua.prototype=new A.Ya;
A.ua.prototype.constructor=A.ua;
A.Db=function(a){A.Ya.call(this,a);a=a||{};this.color=a.color!==d?new A.v(a.color):new A.v(16777215);this.Ja=a.Ja!==d?new A.v(a.Ja):new A.v(16777215);this.xb=a.xb!==d?new A.v(a.xb):new A.v(0);this.ad=a.ad!==d?a.ad:v;this.Me=new A.d(1,1,1);this.map=a.map!==d?a.map:u;this.Qa=a.Qa!==d?a.Qa:u;this.Ga=a.Ga!==d?a.Ga:u;this.Nc=a.Nc!==d?a.Nc:A.Ci;this.Wc=a.Wc!==d?a.Wc:1;this.Xc=a.Xc!==d?a.Xc:0.98;this.N=a.N!==d?a.N:r;this.Ha=a.Ha!==d?a.Ha:A.Kc;this.Y=a.Y!==d?a.Y:v;this.sa=a.sa!==d?a.sa:1;this.qb=a.qb!==d?
a.qb:"round";this.rb=a.rb!==d?a.rb:"round";this.m=a.m!==d?a.m:A.Di;this.ob=a.ob!==d?a.ob:v;this.O=a.O!==d?a.O:v;this.Ta=a.Ta!==d?a.Ta:v};A.Db.prototype=new A.Ya;A.Db.prototype.constructor=A.Db;
A.tc=function(a){A.Ya.call(this,a);a=a||{};this.color=a.color!==d?new A.v(a.color):new A.v(16777215);this.Ja=a.Ja!==d?new A.v(a.Ja):new A.v(16777215);this.xb=a.xb!==d?new A.v(a.xb):new A.v(0);this.rd=a.rd!==d?new A.v(a.rd):new A.v(1118481);this.Ie=a.Ie!==d?a.Ie:30;this.Jh=a.Jh!==d?a.Jh:v;this.Cg=a.Cg!==d?a.Cg:v;this.ad=a.ad!==d?a.ad:v;this.Me=new A.d(1,1,1);this.map=a.map!==d?a.map:u;this.Qa=a.Qa!==d?a.Qa:u;this.Ga=a.Ga!==d?a.Ga:u;this.Nc=a.Nc!==d?a.Nc:A.Ci;this.Wc=a.Wc!==d?a.Wc:1;this.Xc=a.Xc!==
d?a.Xc:0.98;this.N=a.N!==d?a.N:r;this.Ha=a.Ha!==d?a.Ha:A.Kc;this.Y=a.Y!==d?a.Y:v;this.sa=a.sa!==d?a.sa:1;this.qb=a.qb!==d?a.qb:"round";this.rb=a.rb!==d?a.rb:"round";this.m=a.m!==d?a.m:A.Di;this.ob=a.ob!==d?a.ob:v;this.O=a.O!==d?a.O:v;this.Ta=a.Ta!==d?a.Ta:v};A.tc.prototype=new A.Ya;A.tc.prototype.constructor=A.tc;A.bd=function(a){A.Ya.call(this,a);a=a||{};this.Ha=a.Ha!==d?a.Ha:A.Kc;this.Y=a.Y!==d?a.Y:v;this.sa=a.sa!==d?a.sa:1};A.bd.prototype=new A.Ya;A.bd.prototype.constructor=A.bd;
A.xd=function(a){A.Ya.call(this,a);a=a||{};this.Ha=a.Ha?a.Ha:A.wi;this.Y=a.Y?a.Y:v;this.sa=a.sa?a.sa:1};A.xd.prototype=new A.Ya;A.xd.prototype.constructor=A.xd;A.We=la();A.$d=function(a){A.Ya.call(this,a);a=a||{};this.color=a.color!==d?new A.v(a.color):new A.v(16777215);this.map=a.map!==d?a.map:u;this.size=a.size!==d?a.size:1;this.ki=a.ki!==d?a.ki:r;this.m=a.m!==d?a.m:v;this.N=a.N!==d?a.N:r};A.$d.prototype=new A.Ya;A.$d.prototype.constructor=A.$d;
A.Ei=function(a){A.Ya.call(this,a);a=a||{};this.color=a.color!==d?new A.v(a.color):new A.v(16777215);this.Ac=a.Ac!==d?a.Ac:la()};A.Ei.prototype=new A.Ya;A.Ei.prototype.constructor=A.Ei;A.es=function(a){A.Ya.call(this);this.K=a};
A.Za=function(a){A.Ya.call(this,a);a=a||{};this.A=a.A!==d?a.A:"void main() {}";this.B=a.B!==d?a.B:"void main() {}";this.n=a.n!==d?a.n:{};this.attributes=a.attributes;this.Ha=a.Ha!==d?a.Ha:A.Kc;this.Y=a.Y!==d?a.Y:v;this.sa=a.sa!==d?a.sa:1;this.N=a.N!==d?a.N:v;this.lb=a.lb!==d?a.lb:v;this.m=a.m!==d?a.m:A.Di;this.ob=a.ob!==d?a.ob:v;this.O=a.O!==d?a.O:v;this.Ta=a.Ta!==d?a.Ta:v};A.Za.prototype=new A.Ya;A.Za.prototype.constructor=A.Za;
A.uc=function(a,b,c,e,f,h,g,i){this.id=A.ts++;this.ea=a;this.Tc=b!==d?b:new A.Eo;this.dc=c!==d?c:A.Tg;this.ec=e!==d?e:A.Tg;this.yb=f!==d?f:A.Vb;this.eb=h!==d?h:A.Lk;this.Ob=g!==d?g:A.Zg;this.type=i!==d?i:A.el;this.offset=new A.r(0,0);this.repeat=new A.r(1,1);this.mf=r;this.Aa=this.Wv=v;this.Xj=u};A.uc.prototype={constructor:A.uc,e:function(){var a=new A.uc(this.ea,this.Tc,this.dc,this.ec,this.yb,this.eb,this.Ob,this.type);return a.offset.copy(this.offset),a.repeat.copy(this.repeat),a}};A.ts=0;
A.Ci=0;A.Xr=1;A.Eo=la();A.ux=la();A.Gr=la();A.ms=la();A.Mx=la();A.Ic=0;A.Tg=1;A.Ok=2;A.Pk=3;A.yo=4;A.xo=5;A.Vb=6;A.Tr=7;A.Lk=8;A.Er=9;A.el=10;A.ls=11;A.ys=12;A.Pr=13;A.xs=14;A.Mr=15;A.wr=16;A.$g=17;A.Zg=18;A.Vr=19;A.Ur=20;A.Re=function(a,b,c,e,f,h,g,i,j,l){A.uc.call(this,u,h,g,i,j,l,e,f);this.ea={data:a,width:b,height:c}};A.Re.prototype=new A.uc;A.Re.prototype.constructor=A.Re;
A.Re.prototype.e=function(){var a=new A.Re(this.ea.data,this.ea.width,this.ea.height,this.Ob,this.type,this.Tc,this.dc,this.ec,this.yb,this.eb);return a.offset.copy(this.offset),a.repeat.copy(this.repeat),a};A.Zd=function(a){A.D.call(this);this.F=a};A.Zd.prototype=new A.D;A.Zd.prototype.constructor=A.Zd;A.gc=function(a,b){A.D.call(this);this.s=a;this.F=b!==d?b:new A.$d({color:16777215*Math.random()});this.Ff=v;this.s&&(this.s.nc||this.s.kj(),this.bj=a.nc.ra);this.lf=v};A.gc.prototype=new A.D;
A.gc.prototype.constructor=A.gc;A.Xa=function(a,b,c){A.D.call(this);this.s=a;this.F=b!==d?b:new A.Ub({color:16777215*Math.random()});this.type=c!==d?c:A.vo;this.s&&(this.s.nc||this.s.kj())};A.vo=0;A.uo=1;A.Xa.prototype=new A.D;A.Xa.prototype.constructor=A.Xa;
A.C=function(a,b){A.D.call(this);this.s=a;this.F=b!==d?b:new A.ua({color:16777215*Math.random(),Y:r});if(this.s&&(this.s.nc||this.s.kj(),this.bj=a.nc.ra,this.s.O.length)){this.Kh=-1;this.Yp=[];this.Uc=[];this.nv={};for(var c=0;c<this.s.O.length;c++)this.Uc.push(0),this.nv[this.s.O[c].name]=c}};A.C.prototype=new A.D;A.C.prototype.constructor=A.C;A.sb=function(a){A.D.call(this);this.iB=a;this.zb=new A.M};A.sb.prototype=new A.D;A.sb.prototype.constructor=A.sb;
A.sb.prototype.update=function(a,b){this.Pb&&(b|=this.td());if(b||this.Oa)a?this.zb.multiply(a,this.u):this.zb.copy(this.u),this.Oa=v,b=r;var c,e=this.children.length;for(c=0;c<e;c++)this.children[c].update(this.zb,b)};
A.be=function(a,b){A.C.call(this,a,b);this.su=new A.M;this.ib=[];this.aj=[];var c,e,f,h,g,i;if(this.s.ib!==d){for(c=0;c<this.s.ib.length;c++){f=this.s.ib[c];h=f.Qd;g=f.QA;i=f.Jg;var j=d;e=(j===d&&(j=new A.sb(this)),this.ib.push(j),j);e.name=f.name;e.position.set(h[0],h[1],h[2]);e.Vc.set(g[0],g[1],g[2],g[3]);e.Vd=r;i!==d?e.scale.set(i[0],i[1],i[2]):e.scale.set(1,1,1)}for(c=0;c<this.ib.length;c++)f=this.s.ib[c],e=this.ib[c],-1===f.parent?this.add(e):this.ib[f.parent].add(e);this.aj=new Float32Array(16*
this.ib.length);this.bc(r);e=[];for(f=0;f<this.ib.length;f++)c=this.ib[f],h=new A.M,h.Pc(c.zb),e.push(h),Fd(c.zb,this.aj,16*f);if(this.s.Ln===d){this.s.Ln=[];this.s.Lq=[];for(c=0;c<this.s.qd.length;c++)f=this.s.g[c],g=this.s.qd[c].x,i=this.s.qd[c].y,h=new A.d(f.x,f.y,f.a),this.s.Ln.push(e[g].V(h)),h=new A.d(f.x,f.y,f.a),this.s.Lq.push(e[i].V(h)),1!==this.s.Rb[c].x+this.s.Rb[c].y&&(f=0.5*(1-(this.s.Rb[c].x+this.s.Rb[c].y)),this.s.Rb[c].x+=f,this.s.Rb[c].y+=f)}}};A.be.prototype=new A.C;
A.be.prototype.constructor=A.be;A.be.prototype.bc=function(a){this.Pb&&this.td();if(this.Oa||a)this.parent?this.G.multiply(this.parent.G,this.u):this.G.copy(this.u),this.Oa=v;for(var a=0,b=this.children.length;a<b;a++){var c=this.children[a];c instanceof A.sb?c.update(this.su,v):c.bc(r)}for(var b=this.ib.length,c=this.ib,e=this.aj,a=0;a<b;a++)Fd(c[a].zb,e,16*a)};
A.Xg=function(a,b){A.C.call(this,a,b);this.duration=1E3;this.Nj=v;this.kp=this.Mp=this.time=0;this.direction=1;this.kg=v;var c=this.s.O.length-1;this.Pw=0;this.Wt=c;this.length=this.Wt-this.Pw+1};A.Xg.prototype=new A.C;A.Xg.prototype.constructor=A.Xg;A.Jc=function(a,b){A.D.call(this);this.s=a;this.F=b};A.Jc.prototype=new A.D;A.Jc.prototype.constructor=A.Jc;A.Ue=function(){A.D.call(this);this.Gc=[]};A.Ue.prototype=new A.D;A.Ue.prototype.constructor=A.Ue;
A.Ue.prototype.update=function(a){if(1<this.Gc.length){a.Ca.Pc(a.G);a=a.Ca;a=-(a.elements[2]*this.G.elements[12]+a.elements[6]*this.G.elements[13]+a.elements[10]*this.G.elements[14]+a.elements[14]);this.Gc[0].Vj.visible=r;for(var b=1;b<this.Gc.length&&a>=this.Gc[b].ur;b++)this.Gc[b-1].Vj.visible=v,this.Gc[b].Vj.visible=r;for(;b<this.Gc.length;b++)this.Gc[b].Vj.visible=v}};
A.yd=function(a){A.D.call(this);this.color=a.color!==d?new A.v(a.color):new A.v(16777215);this.map=a.map!==d?a.map:new A.uc;this.wa=a.wa!==d?a.wa:A.Xe;this.jd=a.jd!==d?a.jd:A.$k;this.hd=a.hd!==d?a.hd:A.Rk;this.blendEquation=a.blendEquation!==d?a.blendEquation:A.Dk;this.$c=a.$c!==d?a.$c:r;this.yg=a.yg!==d?a.yg:!this.$c;this.ge=a.ge!==d?a.ge:!this.$c;this.Yh=a.Yh!==d?a.Yh:!this.ge;this.he=a.he instanceof A.r?a.he:A.ed.Ll;this.gk=this.rotation;this.rotation=0;this.opacity=1;this.Pg=new A.r(0,0);this.Qg=
new A.r(1,1)};A.yd.prototype=new A.D;A.yd.prototype.constructor=A.yd;A.yd.prototype.td=function(){Ed(this.u,this.position);this.gk.set(0,0,this.rotation);nd(this.u,this.gk);if(1!==this.scale.x||1!==this.scale.y)this.u.scale(this.scale),this.cj=Math.max(this.scale.x,this.scale.y);this.Oa=r};A.ed={};A.ed.EB=new A.r(1,-1);A.ed.DB=new A.r(0,-1);A.ed.GB=new A.r(-1,-1);A.ed.xy=new A.r(1,0);A.ed.Ll=new A.r(0,0);A.ed.yy=new A.r(-1,0);A.ed.qy=new A.r(1,1);A.ed.py=new A.r(0,1);A.ed.ry=new A.r(-1,1);
A.ae=function(){A.D.call(this);this.Bg=this.N=u;this.Pb=v;this.Mi=[];this.jc=[];this.Wf=[];this.Xf=[]};A.ae.prototype=new A.D;A.ae.prototype.constructor=A.ae;function Id(a,b){if(b instanceof A.Tb)-1===a.jc.indexOf(b)&&a.jc.push(b);else if(!(b instanceof A.fc||b instanceof A.sb)&&-1===a.Mi.indexOf(b)){a.Mi.push(b);a.Wf.push(b);var c=a.Xf.indexOf(b);-1!==c&&a.Xf.splice(c,1)}for(c=0;c<b.children.length;c++)Id(a,b.children[c])}
function Jd(a,b){if(b instanceof A.Tb){var c=a.jc.indexOf(b);-1!==c&&a.jc.splice(c,1)}else b instanceof A.fc||(c=a.Mi.indexOf(b),-1!==c&&(a.Mi.splice(c,1),a.Xf.push(b),c=a.Wf.indexOf(b),-1!==c&&a.Wf.splice(c,1)));for(c=0;c<b.children.length;c++)Jd(a,b.children[c])}A.qo=function(a,b,c){this.color=new A.v(a);this.Ua=b!==d?b:1;this.bb=c!==d?c:1E3};A.xi=function(a,b){this.color=new A.v(a);this.lp=b!==d?b:2.5E-4};
A.wx=function(){console.log("THREE.DOMRenderer",A.Gi);var a,b,c,e,f,h,g,i=new A.Yg;a:{for(var j=["transform","MozTransform","WebkitTransform","msTransform","OTransform"],l=document.documentElement,m=0;m<j.length;m++)if("string"==typeof l.style[j[m]]){g=j[m];break a}g=u}this.K=document.createElement("div");this.Mg=function(a,b){c=a;e=b;f=c/2;h=e/2};this.p=function(c,e){var j,l,n,m,w,z;a=i.pn(c,e);b=a.elements;j=0;for(l=b.length;j<l;j++)n=b[j],n instanceof A.Hi&&n.F instanceof A.es&&(m=n.F.K,w=n.x*
f+f-(m.offsetWidth>>1),z=n.y*h+h-(m.offsetHeight>>1),m.style.left=w+"px",m.style.top=z+"px",m.style.zIndex=Math.abs(Math.floor((1-n.a)*e.bb/e.Ua)),g&&(m.style[g]="scale("+n.scale.x*f+","+n.scale.y*h+")"))}};
A.rx=function(a){function b(a){z!=a&&(n.globalAlpha=z=a)}function c(a){if(y!=a){switch(a){case A.Xe:n.globalCompositeOperation="source-over";break;case A.Jb:n.globalCompositeOperation="lighter"}y=a}}function e(a){x!=a&&(n.strokeStyle=x=a)}function f(a){F!=a&&(n.fillStyle=F=a)}console.log("THREE.CanvasRenderer",A.Gi);var a=a||{},h=this,g,i,j,l=new A.Yg,m=a.canvas!==d?a.canvas:document.createElement("canvas"),q,p,s,o,n=m.getContext("2d"),t=new A.v(0),w=0,z=1,y=0,x=u,F=u,M=u,S=u,O=u,G,B,N,U,X=new A.ic,
T=new A.ic,R,I,J,k,da,D,ja,H,Z,L,ha,ia,ca=new A.v,Y=new A.v,V=new A.v,aa=new A.v,ka=new A.v,za=[],ab=[],eb,jb,fb,Wa,cc,Db,dc,ub,Vb,uc,kb=new A.bh,Ma=new A.bh,Ia=new A.bh,pb=v,ma=new A.v,gb=new A.v,$a=new A.v,wa=new A.d,zb,qb,vc,bb,Tc,od,a=16;zb=document.createElement("canvas");zb.width=zb.height=2;qb=zb.getContext("2d");qb.fillStyle="rgba(0,0,0,1)";qb.fillRect(0,0,2,2);vc=qb.getImageData(0,0,2,2);bb=vc.data;Tc=document.createElement("canvas");Tc.width=Tc.height=a;od=Tc.getContext("2d");od.translate(-a/
2,-a/2);od.scale(a,a);a--;this.K=m;this.Pn=this.vk=this.dg=r;this.info={p:{g:0,l:0}};this.Mg=function(a,b){q=a;p=b;s=Math.floor(q/2);o=Math.floor(p/2);m.width=q;m.height=p;kb.set(-s,-o,s,o);Ma.set(-s,-o,s,o);z=1;y=0;O=S=M=F=x=u};this.kk=function(a,b){t.copy(a);w=b!==d?b:1;Ma.set(-s,-o,s,o)};this.uw=function(a,b){Ub(t,a);w=b!==d?b:1;Ma.set(-s,-o,s,o)};this.clear=function(){n.setTransform(1,0,0,-1,s,o);Ma.Gj()||(Ma.kv(kb),Ma.Am(2),1>w&&n.clearRect(Math.floor(Ma.Dp()),Math.floor(Ma.Ep()),Math.floor(Ma.Cp()),
Math.floor(Ma.Bp())),0<w&&(c(A.Xe),b(1),f("rgba("+Math.floor(255*t.h)+","+Math.floor(255*t.i)+","+Math.floor(255*t.b)+","+w+")"),n.fillRect(Math.floor(Ma.Dp()),Math.floor(Ma.Ep()),Math.floor(Ma.Cp()),Math.floor(Ma.Bp()))),Ma.empty())};this.p=function(a,m){function p(a,b,c,e){var f,g,h,i,j,k;f=0;for(g=a.length;f<g;f++)h=a[f],i=h.color,h instanceof A.tb?(j=Rc(h.G),k=c.Fa(j),0>=k||(k*=h.nd,e.h+=i.h*k,e.i+=i.i*k,e.b+=i.b*k)):h instanceof A.dd&&(j=Rc(h.G),k=c.Fa(wa.sub(j,b).normalize()),0>=k||(k*=0==h.kb?
1:1-Math.min(b.Gb(j)/h.kb,1),0!=k&&(k*=h.nd,e.h+=i.h*k,e.i+=i.i*k,e.b+=i.b*k)))}function q(a,e,f,g,i,l,n,o){h.info.p.g+=3;h.info.p.l++;b(o.opacity);c(o.wa);R=a.c.x;I=a.c.y;J=e.c.x;k=e.c.y;da=f.c.x;D=f.c.y;t(R,I,J,k,da,D);o instanceof A.ua?o.map?o.map.Tc instanceof A.Eo&&(Wa=n.Kf[0],z(R,I,J,k,da,D,Wa[g].ia,Wa[g].Z,Wa[i].ia,Wa[i].Z,Wa[l].ia,Wa[l].Z,o.map)):o.Ga?o.Ga.Tc instanceof A.ms&&(a=m.Ca,wa.copy(n.cc[g]),cc=0.5*(wa.x*a.elements[0]+wa.y*a.elements[4]+wa.a*a.elements[8])+0.5,Db=0.5*-(wa.x*a.elements[1]+
wa.y*a.elements[5]+wa.a*a.elements[9])+0.5,wa.copy(n.cc[i]),dc=0.5*(wa.x*a.elements[0]+wa.y*a.elements[4]+wa.a*a.elements[8])+0.5,ub=0.5*-(wa.x*a.elements[1]+wa.y*a.elements[5]+wa.a*a.elements[9])+0.5,wa.copy(n.cc[l]),Vb=0.5*(wa.x*a.elements[0]+wa.y*a.elements[4]+wa.a*a.elements[8])+0.5,uc=0.5*-(wa.x*a.elements[1]+wa.y*a.elements[5]+wa.a*a.elements[9])+0.5,z(R,I,J,k,da,D,cc,Db,dc,ub,Vb,uc,o.Ga)):o.Y?x(o.color,o.sa,o.qb,o.rb):y(o.color):o instanceof A.Db?pb?!o.Y&&o.Ha==A.Kc&&3==n.cc.length?(Y.h=V.h=
aa.h=ma.h,Y.i=V.i=aa.i=ma.i,Y.b=V.b=aa.b=ma.b,p(j,n.aa.zc,n.cc[0],Y),p(j,n.ba.zc,n.cc[1],V),p(j,n.pb.zc,n.cc[2],aa),Y.h=Math.max(0,Math.min(o.color.h*Y.h,1)),Y.i=Math.max(0,Math.min(o.color.i*Y.i,1)),Y.b=Math.max(0,Math.min(o.color.b*Y.b,1)),V.h=Math.max(0,Math.min(o.color.h*V.h,1)),V.i=Math.max(0,Math.min(o.color.i*V.i,1)),V.b=Math.max(0,Math.min(o.color.b*V.b,1)),aa.h=Math.max(0,Math.min(o.color.h*aa.h,1)),aa.i=Math.max(0,Math.min(o.color.i*aa.i,1)),aa.b=Math.max(0,Math.min(o.color.b*aa.b,1)),ka.h=
0.5*(V.h+aa.h),ka.i=0.5*(V.i+aa.i),ka.b=0.5*(V.b+aa.b),fb=pd(Y,V,aa,ka),F(R,I,J,k,da,D,0,0,fb)):(ca.h=ma.h,ca.i=ma.i,ca.b=ma.b,p(j,n.me,n.Va,ca),ca.h=Math.max(0,Math.min(o.color.h*ca.h,1)),ca.i=Math.max(0,Math.min(o.color.i*ca.i,1)),ca.b=Math.max(0,Math.min(o.color.b*ca.b,1)),o.Y?x(ca,o.sa,o.qb,o.rb):y(ca)):o.Y?x(o.color,o.sa,o.qb,o.rb):y(o.color):o instanceof A.bd?(eb=m.Ua,jb=m.bb,Y.h=Y.i=Y.b=1-wc(a.c.a,eb,jb),V.h=V.i=V.b=1-wc(e.c.a,eb,jb),aa.h=aa.i=aa.b=1-wc(f.c.a,eb,jb),ka.h=0.5*(V.h+aa.h),ka.i=
0.5*(V.i+aa.i),ka.b=0.5*(V.b+aa.b),fb=pd(Y,V,aa,ka),F(R,I,J,k,da,D,0,0,fb)):o instanceof A.xd&&(ca.h=Fc(n.Va.x),ca.i=Fc(n.Va.y),ca.b=Fc(n.Va.a),o.Y?x(ca,o.sa,o.qb,o.rb):y(ca))}function t(a,b,c,e,f,g){n.beginPath();n.moveTo(a,b);n.lineTo(c,e);n.lineTo(f,g);n.lineTo(a,b);n.closePath()}function w(a,b,c,e,f,g,h,i){n.beginPath();n.moveTo(a,b);n.lineTo(c,e);n.lineTo(f,g);n.lineTo(h,i);n.lineTo(a,b);n.closePath()}function x(a,b,c,f){M!=b&&(n.lineWidth=M=b);S!=c&&(n.lineCap=S=c);O!=f&&(n.lineJoin=O=f);e(bc(a));
n.stroke();Ia.Am(2*b)}function y(a){f(bc(a));n.fill()}function z(a,b,c,e,g,h,i,j,k,l,o,p,m){if(0!=m.ea.width){if(1==m.Aa||za[m.id]==d){var q=m.dc==A.Ic,s=m.ec==A.Ic;za[m.id]=n.createPattern(m.ea,q&&s?"repeat":q&&!s?"repeat-x":!q&&s?"repeat-y":"no-repeat");m.Aa=v}f(za[m.id]);var q=m.offset.x/m.repeat.x,s=m.offset.y/m.repeat.y,bb=m.ea.width*m.repeat.x,t=m.ea.height*m.repeat.y,i=(i+q)*bb,j=(j+s)*t,c=c-a,e=e-b,g=g-a,h=h-b,k=(k+q)*bb-i,l=(l+s)*t-j,o=(o+q)*bb-i,p=(p+s)*t-j,q=k*p-o*l;0==q?(ab[m.id]===d&&
(b=document.createElement("canvas"),b.width=m.ea.width,b.height=m.ea.height,b=b.getContext("2d"),b.drawImage(m.ea,0,0),ab[m.id]=b.getImageData(0,0,m.ea.width,m.ea.height).data),b=ab[m.id],i=4*(Math.floor(i)+Math.floor(j)*m.ea.width),ac(ca,b[i]/255,b[i+1]/255,b[i+2]/255),y(ca)):(q=1/q,m=(p*c-l*g)*q,l=(p*e-l*h)*q,c=(k*g-o*c)*q,e=(k*h-o*e)*q,a=a-m*i-c*j,i=b-l*i-e*j,n.save(),n.transform(m,l,c,e,a,i),n.fill(),n.restore())}}function F(a,b,c,e,f,g,h,i,j){var k,l,m,o,p,q;p=j.width-1;q=j.height-1;h*=p;k=0*
q;c-=a;e-=b;f-=a;g-=b;l=1*p-h;i=i*q-k;m=0*p-h;o=1*q-k;q=1/(l*o-m*i);p=(o*c-i*f)*q;i=(o*e-i*g)*q;c=(l*f-m*c)*q;e=(l*g-m*e)*q;a=a-p*h-c*k;b=b-i*h-e*k;n.save();n.transform(p,i,c,e,a,b);n.clip();n.drawImage(j,0,0);n.restore()}function pd(a,b,c,e){var f=~~(255*a.h),g=~~(255*a.i),a=~~(255*a.b),h=~~(255*b.h),i=~~(255*b.i),b=~~(255*b.b),j=~~(255*c.h),k=~~(255*c.i),c=~~(255*c.b),l=~~(255*e.h),m=~~(255*e.i),e=~~(255*e.b);return bb[0]=0>f?0:255<f?255:f,bb[1]=0>g?0:255<g?255:g,bb[2]=0>a?0:255<a?255:a,bb[4]=0>
h?0:255<h?255:h,bb[5]=0>i?0:255<i?255:i,bb[6]=0>b?0:255<b?255:b,bb[8]=0>j?0:255<j?255:j,bb[9]=0>k?0:255<k?255:k,bb[10]=0>c?0:255<c?255:c,bb[12]=0>l?0:255<l?255:l,bb[13]=0>m?0:255<m?255:m,bb[14]=0>e?0:255<e?255:e,qb.putImageData(vc,0,0),od.drawImage(zb,0,0),Tc}function wc(a,b,c){return a=(a-b)/(c-b),a*a*(3-2*a)}function Fc(a){return a=0.5*(a+1),0>a?0:1<a?1:a}function ec(a,b){var c=b.x-a.x,e=b.y-a.y,f=c*c+e*e;0!=f&&(f=1/Math.sqrt(f),c*=f,e*=f,b.x+=c,b.y+=e,a.x-=c,a.y-=e)}var xc,Gc,qa,W;this.dg?this.clear():
n.setTransform(1,0,0,-1,s,o);h.info.p.g=0;h.info.p.l=0;g=l.pn(a,m,this.Pn);i=g.elements;j=g.lb;if(pb=0<j.length){xc=j;var sa,Na;ac(ma,0,0,0);ac(gb,0,0,0);ac($a,0,0,0);Gc=0;for(W=xc.length;Gc<W;Gc++)sa=xc[Gc],Na=sa.color,sa instanceof A.Ne?(ma.h+=Na.h,ma.i+=Na.i,ma.b+=Na.b):sa instanceof A.tb?(gb.h+=Na.h,gb.i+=Na.i,gb.b+=Na.b):sa instanceof A.dd&&($a.h+=Na.h,$a.i+=Na.i,$a.b+=Na.b)}xc=0;for(Gc=i.length;xc<Gc;xc++)if(qa=i[xc],W=qa.F,W=W instanceof A.We?qa.yj:W,W!==d&&W.visible!==v){Ia.empty();if(qa instanceof
A.Hi){G=qa;G.x*=s;G.y*=o;sa=G;Na=qa;b(W.opacity);c(W.wa);var vb=d,wb=d,yc=d,fc=d,Ld=qa=d;W instanceof A.$d?W.map&&(fc=W.map.ea,qa=fc.width>>1,Ld=fc.height>>1,W=Na.scale.x*s,yc=Na.scale.y*o,vb=W*qa,wb=yc*Ld,Ia.set(sa.x-vb,sa.y-wb,sa.x+vb,sa.y+wb),kb.se(Ia)&&(n.save(),n.translate(sa.x,sa.y),n.rotate(-Na.rotation),n.scale(W,-yc),n.translate(-qa,-Ld),n.drawImage(fc,0,0),n.restore())):W instanceof A.Ei&&(vb=Na.scale.x*s,wb=Na.scale.y*o,Ia.set(sa.x-vb,sa.y-wb,sa.x+vb,sa.y+wb),kb.se(Ia)&&(e(bc(W.color)),
f(bc(W.color)),n.save(),n.translate(sa.x,sa.y),n.rotate(-Na.rotation),n.scale(vb,wb),W.Ac(n),n.restore()))}else qa instanceof A.Vk?(G=qa.aa,B=qa.ba,G.c.x*=s,G.c.y*=o,B.c.x*=s,B.c.y*=o,Ia.Mb(G.c.x,G.c.y),Ia.Mb(B.c.x,B.c.y),kb.se(Ia)&&(sa=G,Na=B,b(W.opacity),c(W.wa),n.beginPath(),n.moveTo(sa.c.x,sa.c.y),n.lineTo(Na.c.x,Na.c.y),n.closePath(),W instanceof A.Ub&&(sa=W.rf,M!=sa&&(n.lineWidth=M=sa),sa=W.Jj,S!=sa&&(n.lineCap=S=sa),sa=W.Kj,O!=sa&&(n.lineJoin=O=sa),e(bc(W.color)),n.stroke(),Ia.Am(2*W.rf)))):
qa instanceof A.Tk?(G=qa.aa,B=qa.ba,N=qa.pb,G.c.x*=s,G.c.y*=o,B.c.x*=s,B.c.y*=o,N.c.x*=s,N.c.y*=o,W.Zj&&(ec(G.c,B.c),ec(B.c,N.c),ec(N.c,G.c)),Ia.Ts(G.c.x,G.c.y,B.c.x,B.c.y,N.c.x,N.c.y),kb.se(Ia)&&q(G,B,N,0,1,2,qa,W)):qa instanceof A.Uk&&(G=qa.aa,B=qa.ba,N=qa.pb,U=qa.Bk,G.c.x*=s,G.c.y*=o,B.c.x*=s,B.c.y*=o,N.c.x*=s,N.c.y*=o,U.c.x*=s,U.c.y*=o,X.c.copy(B.c),T.c.copy(U.c),W.Zj&&(ec(G.c,B.c),ec(B.c,U.c),ec(U.c,G.c),ec(N.c,X.c),ec(N.c,T.c)),Ia.Mb(G.c.x,G.c.y),Ia.Mb(B.c.x,B.c.y),Ia.Mb(N.c.x,N.c.y),Ia.Mb(U.c.x,
U.c.y),kb.se(Ia)&&(sa=G,Na=B,vb=N,wb=U,yc=X,fc=T,h.info.p.g+=4,h.info.p.l++,b(W.opacity),c(W.wa),W.map||W.Ga?(q(sa,Na,wb,0,1,3,qa,W),q(yc,vb,fc,1,2,3,qa,W)):(R=sa.c.x,I=sa.c.y,J=Na.c.x,k=Na.c.y,da=vb.c.x,D=vb.c.y,ja=wb.c.x,H=wb.c.y,Z=yc.c.x,L=yc.c.y,ha=fc.c.x,ia=fc.c.y,W instanceof A.ua?(w(R,I,J,k,da,D,ja,H),W.Y?x(W.color,W.sa,W.qb,W.rb):y(W.color)):W instanceof A.Db?pb?!W.Y&&W.Ha==A.Kc&&4==qa.cc.length?(Y.h=V.h=aa.h=ka.h=ma.h,Y.i=V.i=aa.i=ka.i=ma.i,Y.b=V.b=aa.b=ka.b=ma.b,p(j,qa.aa.zc,qa.cc[0],Y),
p(j,qa.ba.zc,qa.cc[1],V),p(j,qa.Bk.zc,qa.cc[3],aa),p(j,qa.pb.zc,qa.cc[2],ka),Y.h=Math.max(0,Math.min(W.color.h*Y.h,1)),Y.i=Math.max(0,Math.min(W.color.i*Y.i,1)),Y.b=Math.max(0,Math.min(W.color.b*Y.b,1)),V.h=Math.max(0,Math.min(W.color.h*V.h,1)),V.i=Math.max(0,Math.min(W.color.i*V.i,1)),V.b=Math.max(0,Math.min(W.color.b*V.b,1)),aa.h=Math.max(0,Math.min(W.color.h*aa.h,1)),aa.i=Math.max(0,Math.min(W.color.i*aa.i,1)),aa.b=Math.max(0,Math.min(W.color.b*aa.b,1)),ka.h=Math.max(0,Math.min(W.color.h*ka.h,
1)),ka.i=Math.max(0,Math.min(W.color.i*ka.i,1)),ka.b=Math.max(0,Math.min(W.color.b*ka.b,1)),fb=pd(Y,V,aa,ka),t(R,I,J,k,ja,H),F(R,I,J,k,ja,H,0,0,fb),t(Z,L,da,D,ha,ia),F(Z,L,da,D,ha,ia,1,1,fb)):(ca.h=ma.h,ca.i=ma.i,ca.b=ma.b,p(j,qa.me,qa.Va,ca),ca.h=Math.max(0,Math.min(W.color.h*ca.h,1)),ca.i=Math.max(0,Math.min(W.color.i*ca.i,1)),ca.b=Math.max(0,Math.min(W.color.b*ca.b,1)),w(R,I,J,k,da,D,ja,H),W.Y?x(ca,W.sa,W.qb,W.rb):y(ca)):(w(R,I,J,k,da,D,ja,H),W.Y?x(W.color,W.sa,W.qb,W.rb):y(W.color)):W instanceof
A.xd?(ca.h=Fc(qa.Va.x),ca.i=Fc(qa.Va.y),ca.b=Fc(qa.Va.a),w(R,I,J,k,da,D,ja,H),W.Y?x(ca,W.sa,W.qb,W.rb):y(ca)):W instanceof A.bd&&(eb=m.Ua,jb=m.bb,Y.h=Y.i=Y.b=1-wc(sa.c.a,eb,jb),V.h=V.i=V.b=1-wc(Na.c.a,eb,jb),aa.h=aa.i=aa.b=1-wc(wb.c.a,eb,jb),ka.h=ka.i=ka.b=1-wc(vb.c.a,eb,jb),fb=pd(Y,V,aa,ka),t(R,I,J,k,ja,H),F(R,I,J,k,ja,H,0,0,fb),t(Z,L,da,D,ha,ia),F(Z,L,da,D,ha,ia,1,1,fb)))));Ma.Ws(Ia)}n.setTransform(1,0,0,1,0,0)}};
A.Kx=function(){function a(a,b,c,e){var f,g,h,i,j,l;f=0;for(g=a.length;f<g;f++)h=a[f],i=h.color,h instanceof A.tb?(j=Rc(h.G),l=c.Fa(j),0>=l||(l*=h.nd,e.h+=i.h*l,e.i+=i.i*l,e.b+=i.b*l)):h instanceof A.dd&&(j=Rc(h.G),l=c.Fa(G.sub(j,b).normalize()),0>=l||(l*=0==h.kb?1:1-Math.min(b.Gb(j)/h.kb,1),0!=l&&(l*=h.nd,e.h+=i.h*l,e.i+=i.i*l,e.b+=i.b*l)))}function b(a){return B[a]==u&&(B[a]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==R&&B[a].setAttribute("shape-rendering","crispEdges")),B[a]}
function c(a){return a=0.5*(a+1),0>a?0:1<a?1:a}console.log("THREE.SVGRenderer",A.Gi);var e=this,f,h,g,i=new A.Yg,j=document.createElementNS("http://www.w3.org/2000/svg","svg"),l,m,q,p,s,o,n,t,w=new A.bh,z=new A.bh,y=v,x=new A.v,F=new A.v,M=new A.v,S=new A.v,O,G=new A.d,B=[],N=[],U,X,T,R=1;this.K=j;this.Pn=this.vk=this.dg=r;this.info={p:{g:0,l:0}};this.ZA=function(a){switch(a){case "high":R=1;break;case "low":R=0}};this.Mg=function(a,b){l=a;m=b;q=l/2;p=m/2;j.setAttribute("viewBox",-q+" "+-p+" "+l+
" "+m);j.setAttribute("width",l);j.setAttribute("height",m);w.set(-q,-p,q,p)};this.clear=function(){for(;0<j.childNodes.length;)j.removeChild(j.childNodes[0])};this.p=function(l,m){var k,G,D,B;this.dg&&this.clear();e.info.p.g=0;e.info.p.l=0;f=i.pn(l,m,this.Pn);h=f.elements;g=f.lb;T=X=0;if(y=0<g.length){ac(F,0,0,0);ac(M,0,0,0);ac(S,0,0,0);k=0;for(G=g.length;k<G;k++)B=g[k],D=B.color,B instanceof A.Ne?(F.h+=D.h,F.i+=D.i,F.b+=D.b):B instanceof A.tb?(M.h+=D.h,M.i+=D.i,M.b+=D.b):B instanceof A.dd&&(S.h+=
D.h,S.i+=D.i,S.b+=D.b)}k=0;for(G=h.length;k<G;k++)if(D=h[k],B=D.F,B=B instanceof A.We?D.yj:B,B!==d&&B.visible!==v)if(z.empty(),D instanceof A.Hi)s=D,s.x*=q,s.y*=-p;else if(D instanceof A.Vk){if(s=D.aa,o=D.ba,s.c.x*=q,s.c.y*=-p,o.c.x*=q,o.c.y*=-p,z.Mb(s.c.x,s.c.y),z.Mb(o.c.x,o.c.y),w.se(z)){D=s;var H=o,Z=T++;N[Z]==u&&(N[Z]=document.createElementNS("http://www.w3.org/2000/svg","line"),0==R&&N[Z].setAttribute("shape-rendering","crispEdges"));U=N[Z];U.setAttribute("x1",D.c.x);U.setAttribute("y1",D.c.y);
U.setAttribute("x2",H.c.x);U.setAttribute("y2",H.c.y);B instanceof A.Ub&&(U.setAttribute("style","fill: none; stroke: "+bc(B.color)+"; stroke-width: "+B.rf+"; stroke-opacity: "+B.opacity+"; stroke-linecap: "+B.Jj+"; stroke-linejoin: "+B.Kj),j.appendChild(U))}}else if(D instanceof A.Tk){if(s=D.aa,o=D.ba,n=D.pb,s.c.x*=q,s.c.y*=-p,o.c.x*=q,o.c.y*=-p,n.c.x*=q,n.c.y*=-p,z.Mb(s.c.x,s.c.y),z.Mb(o.c.x,o.c.y),z.Mb(n.c.x,n.c.y),w.se(z)){var H=s,Z=o,L=n;e.info.p.g+=3;e.info.p.l++;U=b(X++);U.setAttribute("d",
"M "+H.c.x+" "+H.c.y+" L "+Z.c.x+" "+Z.c.y+" L "+L.c.x+","+L.c.y+"z");B instanceof A.ua?x.copy(B.color):B instanceof A.Db?y?(x.h=F.h,x.i=F.i,x.b=F.b,a(g,D.me,D.Va,x),x.h=Math.max(0,Math.min(B.color.h*x.h,1)),x.i=Math.max(0,Math.min(B.color.i*x.i,1)),x.b=Math.max(0,Math.min(B.color.b*x.b,1))):x.copy(B.color):B instanceof A.bd?(O=1-B.Bs/(B.Es-D.a*B.Ds),ac(x,O,O,O)):B instanceof A.xd&&ac(x,c(D.Va.x),c(D.Va.y),c(D.Va.a));B.Y?U.setAttribute("style","fill: none; stroke: "+bc(x)+"; stroke-width: "+B.sa+
"; stroke-opacity: "+B.opacity+"; stroke-linecap: "+B.qb+"; stroke-linejoin: "+B.rb):U.setAttribute("style","fill: "+bc(x)+"; fill-opacity: "+B.opacity);j.appendChild(U)}}else if(D instanceof A.Uk&&(s=D.aa,o=D.ba,n=D.pb,t=D.Bk,s.c.x*=q,s.c.y*=-p,o.c.x*=q,o.c.y*=-p,n.c.x*=q,n.c.y*=-p,t.c.x*=q,t.c.y*=-p,z.Mb(s.c.x,s.c.y),z.Mb(o.c.x,o.c.y),z.Mb(n.c.x,n.c.y),z.Mb(t.c.x,t.c.y),w.se(z))){var H=s,Z=o,L=n,ha=t;e.info.p.g+=4;e.info.p.l++;U=b(X++);U.setAttribute("d","M "+H.c.x+" "+H.c.y+" L "+Z.c.x+" "+Z.c.y+
" L "+L.c.x+","+L.c.y+" L "+ha.c.x+","+ha.c.y+"z");B instanceof A.ua?x.copy(B.color):B instanceof A.Db?y?(x.h=F.h,x.i=F.i,x.b=F.b,a(g,D.me,D.Va,x),x.h=Math.max(0,Math.min(B.color.h*x.h,1)),x.i=Math.max(0,Math.min(B.color.i*x.i,1)),x.b=Math.max(0,Math.min(B.color.b*x.b,1))):x.copy(B.color):B instanceof A.bd?(O=1-B.Bs/(B.Es-D.a*B.Ds),ac(x,O,O,O)):B instanceof A.xd&&ac(x,c(D.Va.x),c(D.Va.y),c(D.Va.a));B.Y?U.setAttribute("style","fill: none; stroke: "+bc(x)+"; stroke-width: "+B.sa+"; stroke-opacity: "+
B.opacity+"; stroke-linecap: "+B.qb+"; stroke-linejoin: "+B.rb):U.setAttribute("style","fill: "+bc(x)+"; fill-opacity: "+B.opacity);j.appendChild(U)}}};
A.k={Bh:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",Ah:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",hm:"#ifdef USE_ENVMAP\nvarying vec3 vReflect;\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#endif",
gm:"#ifdef USE_ENVMAP\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * vReflect.x, vReflect.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * vReflect.x, vReflect.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, reflectivity );\n} else {\ngl_FragColor.xyz = gl_FragColor.xyz * cubeColor.xyz;\n}\n#endif",
im:"#ifdef USE_ENVMAP\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",jm:"#ifdef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvec3 nWorld = mat3( objectMatrix[ 0 ].xyz, objectMatrix[ 1 ].xyz, objectMatrix[ 2 ].xyz ) * normal;\nif ( useRefract ) {\nvReflect = refract( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ), refractionRatio );\n} else {\nvReflect = reflect( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ) );\n}\n#endif",
$u:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",Zu:"#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, gl_PointCoord );\n#endif",Qm:"#ifdef USE_MAP\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",Pm:"#ifdef USE_MAP\nvarying vec2 vUv;\nuniform sampler2D map;\n#endif",Rm:"#ifdef USE_MAP\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",Om:"#ifdef USE_MAP\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( map, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( map, vUv );\n#endif\n#endif",
Im:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",Jm:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",Hm:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",Km:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",Ju:"uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngle[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
Ku:"vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nlVector = normalize( lVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - mPosition.xyz ) );\nif ( spotEffect > spotLightAngle[ i ] ) {\nspotEffect = pow( spotEffect, spotLightExponent[ i ] );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",
Nu:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvarying vec3 vWorldPosition;\n#endif",Ou:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvWorldPosition = mPosition.xyz;\n#endif",
Mu:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngle[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
Lu:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngle[ i ] ) {\nspotEffect = pow( spotEffect, spotLightExponent[ i ] );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
hj:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",gj:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, opacity );\n#endif",ij:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",jj:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",Nn:"#ifdef USE_SKINNING\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n#endif",On:"#ifdef USE_SKINNING\ngl_Position  = ( boneGlobalMatrices[ int( skinIndex.x ) ] * skinVertexA ) * skinWeight.x;\ngl_Position += ( boneGlobalMatrices[ int( skinIndex.y ) ] * skinVertexB ) * skinWeight.y;\ngl_Position  = projectionMatrix * modelViewMatrix * gl_Position;\n#endif",
Pj:"#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",Qj:"#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( morphed, 1.0 );\n#endif",
qj:"#ifndef USE_MORPHTARGETS\n#ifndef USE_SKINNING\ngl_Position = projectionMatrix * mvPosition;\n#endif\n#endif",Zp:"#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\nvec3 transformedNormal = normalMatrix * morphedNormal;\n#else\nvec3 transformedNormal = normalMatrix * normal;\n#endif",
gi:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",fi:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#ifdef SHADOWMAP_SOFT\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
hi:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",ii:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n#ifdef USE_MORPHTARGETS\nvShadowCoord[ i ] = shadowMatrix[ i ] * objectMatrix * vec4( morphed, 1.0 );\n#else\nvShadowCoord[ i ] = shadowMatrix[ i ] * objectMatrix * vec4( position, 1.0 );\n#endif\n}\n#endif",Wi:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",Ij:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"};
A.Lb={mb:function(a){var b,c,e,f={};for(b=0;b<a.length;b++)for(c in e=this.e(a[b]),e)f[c]=e[c];return f},e:function(a){var b,c,e,f={};for(b in a)for(c in f[b]={},a[b])e=a[b][c],f[b][c]=e instanceof A.v||e instanceof A.r||e instanceof A.d||e instanceof A.$a||e instanceof A.M||e instanceof A.uc?e.e():e instanceof Array?e.slice():e;return f}};
A.Eb={Ol:{Zl:{type:"c",value:new A.v(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:0,t:u},Ev:{type:"v4",value:new A.$a(0,0,1,1)},Qa:{type:"t",value:2,t:u},Ga:{type:"t",value:1,t:u},du:{type:"f",value:-1},dx:{type:"i",value:0},Wc:{type:"f",value:1},Xc:{type:"f",value:0.98},Nc:{type:"i",value:0},Uc:{type:"f",value:0}},N:{wp:{type:"f",value:2.5E-4},pm:{type:"f",value:1},om:{type:"f",value:2E3},vp:{type:"c",value:new A.v(16777215)}},lb:{Ys:{type:"fv",value:[]},Rt:{type:"fv",value:[]},Qt:{type:"fv",
value:[]},Sv:{type:"fv",value:[]},Uv:{type:"fv",value:[]},Tv:{type:"fv1",value:[]},Iw:{type:"fv",value:[]},Mw:{type:"fv",value:[]},Jw:{type:"fv",value:[]},Kw:{type:"fv1",value:[]},Hw:{type:"fv1",value:[]},Lw:{type:"fv1",value:[]}},Rv:{Zv:{type:"c",value:new A.v(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:0,t:u},wp:{type:"f",value:2.5E-4},pm:{type:"f",value:1},om:{type:"f",value:2E3},vp:{type:"c",value:new A.v(16777215)}},ei:{Df:{type:"tv",
value:6,t:[]},ci:{type:"v2v",value:[]},Ng:{type:"fv1",value:[]},He:{type:"fv1",value:[]},Ef:{type:"m4v",value:[]}}};
A.Yk={depth:{n:{Uu:{type:"f",value:1},Tu:{type:"f",value:2E3},opacity:{type:"f",value:1}},B:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},R:{n:{opacity:{type:"f",value:1}},B:"varying vec3 vNormal;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvNormal = normalMatrix * normal;\ngl_Position = projectionMatrix * mvPosition;\n}",
A:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},mt:{n:A.Lb.mb([A.Eb.Ol,A.Eb.N,A.Eb.ei]),B:[A.k.Qm,A.k.Jm,A.k.im,A.k.ij,A.k.Nn,A.k.Pj,A.k.hi,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",A.k.Rm,A.k.Km,A.k.jm,A.k.jj,A.k.On,A.k.Qj,A.k.qj,A.k.ii,"}"].join("\n"),A:["uniform vec3 diffuse;\nuniform float opacity;",A.k.hj,A.k.Pm,A.k.Im,A.k.hm,A.k.Bh,A.k.gi,"void main() {\ngl_FragColor = vec4( diffuse, opacity );",
A.k.Om,A.k.Wi,A.k.Hm,A.k.gj,A.k.gm,A.k.fi,A.k.Ij,A.k.Ah,"}"].join("\n")},Oz:{n:A.Lb.mb([A.Eb.Ol,A.Eb.N,A.Eb.lb,A.Eb.ei,{Ja:{type:"c",value:new A.v(16777215)},xb:{type:"c",value:new A.v(0)},Me:{type:"v3",value:new A.d(1,1,1)}}]),B:["varying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",A.k.Qm,A.k.Jm,A.k.im,A.k.Ju,A.k.ij,A.k.Nn,A.k.Pj,A.k.hi,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",A.k.Rm,A.k.Km,A.k.jm,A.k.jj,A.k.Zp,"#ifndef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\n#endif",
A.k.Ku,A.k.On,A.k.Qj,A.k.qj,A.k.ii,"}"].join("\n"),A:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",A.k.hj,A.k.Pm,A.k.Im,A.k.hm,A.k.Bh,A.k.gi,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",A.k.Om,A.k.Wi,"#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif",A.k.Hm,A.k.gj,A.k.gm,A.k.fi,A.k.Ij,A.k.Ah,"}"].join("\n")},
AA:{n:A.Lb.mb([A.Eb.Ol,A.Eb.N,A.Eb.lb,A.Eb.ei,{Ja:{type:"c",value:new A.v(16777215)},xb:{type:"c",value:new A.v(0)},rd:{type:"c",value:new A.v(1118481)},Ie:{type:"f",value:30},Me:{type:"v3",value:new A.d(1,1,1)}}]),B:["varying vec3 vViewPosition;\nvarying vec3 vNormal;",A.k.Qm,A.k.Jm,A.k.im,A.k.Nu,A.k.ij,A.k.Nn,A.k.Pj,A.k.hi,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",A.k.Rm,A.k.Km,A.k.jm,A.k.jj,"#ifndef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\n#endif\nvViewPosition = -mvPosition.xyz;",
A.k.Zp,"vNormal = transformedNormal;",A.k.Ou,A.k.On,A.k.Qj,A.k.qj,A.k.ii,"}"].join("\n"),A:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",A.k.hj,A.k.Pm,A.k.Im,A.k.hm,A.k.Bh,A.k.Mu,A.k.gi,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",A.k.Om,A.k.Wi,A.k.Lu,A.k.Hm,A.k.gj,A.k.gm,A.k.fi,A.k.Ij,A.k.Ah,"}"].join("\n")},zA:{n:A.Lb.mb([A.Eb.Rv,A.Eb.ei]),B:["uniform float size;\nuniform float scale;",
A.k.ij,A.k.hi,"void main() {",A.k.jj,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;",A.k.ii,"}"].join("\n"),A:["uniform vec3 psColor;\nuniform float opacity;",A.k.hj,A.k.$u,A.k.Bh,A.k.gi,"void main() {\ngl_FragColor = vec4( psColor, opacity );",A.k.Zu,A.k.Wi,A.k.gj,A.k.fi,A.k.Ah,"}"].join("\n")},mp:{n:{},B:[A.k.Pj,
"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",A.k.Qj,A.k.qj,"}"].join("\n"),A:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}};
A.Fo=function(a){function b(a,b){var c=a.g.length,e=b.F;if(e.attributes){a.Yb===d&&(a.Yb=[]);for(var f in e.attributes){var g=e.attributes[f];if(!g.ll||g.It){g.ll=r;var h=1;"v2"===g.type?h=2:"v3"===g.type?h=3:"v4"===g.type?h=4:"c"===g.type&&(h=3);g.size=h;g.f=new Float32Array(c*h);g.buffer=k.createBuffer();g.buffer.Dl=f;g.Aa=r}a.Yb.push(g)}}}function c(a,b){if(a.F&&!(a.F instanceof A.We))return a.F;if(0<=b.pa)return a.s.T[b.pa]}function e(a){return a instanceof A.ua&&!a.Ga||a instanceof A.bd?v:a&&
a.Ha!==d&&a.Ha===A.Kc?A.Kc:A.wi}function f(a){return a.map||a.Qa||a instanceof A.Za?r:v}function h(a,b,c){var e,f,g,h,i=a.g;h=i.length;var j=a.wb,l=j.length,m=a.ee,p=a.de,o=a.Is,n=a.Cb,q=a.Fb,s=a.Yb;if(c.Ff){Ia.copy(Ma);Ia.vf(c.G);for(e=0;e<h;e++)f=i[e],pb.copy(f),Ia.V(pb),o[e]=[pb.a,e];o.sort(function(a,b){return b[0]-a[0]});for(e=0;e<h;e++)f=i[o[e][1]],g=3*e,m[g]=f.x,m[g+1]=f.y,m[g+2]=f.a;for(e=0;e<l;e++)g=3*e,f=j[o[e][1]],p[g]=f.h,p[g+1]=f.i,p[g+2]=f.b;if(s){j=0;for(l=s.length;j<l;j++)if(i=s[j],
i.vb===d||"vertices"===i.vb)if(g=0,f=i.value.length,1===i.size)for(e=0;e<f;e++)h=o[e][1],i.f[e]=i.value[h];else if(2===i.size)for(e=0;e<f;e++)h=o[e][1],h=i.value[h],i.f[g]=h.x,i.f[g+1]=h.y,g+=2;else if(3===i.size)if("c"===i.type)for(e=0;e<f;e++)h=o[e][1],h=i.value[h],i.f[g]=h.h,i.f[g+1]=h.i,i.f[g+2]=h.b,g+=3;else for(e=0;e<f;e++)h=o[e][1],h=i.value[h],i.f[g]=h.x,i.f[g+1]=h.y,i.f[g+2]=h.a,g+=3;else if(4===i.size)for(e=0;e<f;e++)h=o[e][1],h=i.value[h],i.f[g]=h.x,i.f[g+1]=h.y,i.f[g+2]=h.a,i.f[g+3]=h.j,
g+=4}}else{if(n)for(e=0;e<h;e++)f=i[e],g=3*e,m[g]=f.x,m[g+1]=f.y,m[g+2]=f.a;if(q)for(e=0;e<l;e++)f=j[e],g=3*e,p[g]=f.h,p[g+1]=f.i,p[g+2]=f.b;if(s){j=0;for(l=s.length;j<l;j++)if(i=s[j],i.Aa&&(i.vb===d||"vertices"===i.vb))if(f=i.value.length,g=0,1===i.size)for(e=0;e<f;e++)i.f[e]=i.value[e];else if(2===i.size)for(e=0;e<f;e++)h=i.value[e],i.f[g]=h.x,i.f[g+1]=h.y,g+=2;else if(3===i.size)if("c"===i.type)for(e=0;e<f;e++)h=i.value[e],i.f[g]=h.h,i.f[g+1]=h.i,i.f[g+2]=h.b,g+=3;else for(e=0;e<f;e++)h=i.value[e],
i.f[g]=h.x,i.f[g+1]=h.y,i.f[g+2]=h.a,g+=3;else if(4===i.size)for(e=0;e<f;e++)h=i.value[e],i.f[g]=h.x,i.f[g+1]=h.y,i.f[g+2]=h.a,i.f[g+3]=h.j,g+=4}}if(n||c.Ff)k.bindBuffer(k.ARRAY_BUFFER,a.Sa),k.bufferData(k.ARRAY_BUFFER,m,b);if(q||c.Ff)k.bindBuffer(k.ARRAY_BUFFER,a.vc),k.bufferData(k.ARRAY_BUFFER,p,b);if(s){j=0;for(l=s.length;j<l;j++)if(i=s[j],i.Aa||c.Ff)k.bindBuffer(k.ARRAY_BUFFER,i.buffer),k.bufferData(k.ARRAY_BUFFER,i.f,b)}}function g(a,b){return b.a-a.a}function i(a,b,c){if(a.length)for(var e=
0,f=a.length;e<f;e++)L=D=u,H=Z=ca=ia=ab=za=Y=-1,gb=r,a[e].p(b,c,Vb,uc),L=D=u,H=Z=ca=ia=ab=za=Y=-1,gb=r}function j(a,b,c,e,f,g,h,i){var j,k,l,m;b?(k=a.length-1,m=b=-1):(k=0,b=a.length,m=1);for(var o=k;o!==b;o+=m)if(j=a[o],j.p){k=j.object;l=j.buffer;if(i)j=i;else{j=j[c];if(!j)continue;h&&J.Kg(j.wa,j.blendEquation,j.jd,j.hd);J.Lg(j.pe);J.lk(j.Jd);w(j.polygonOffset,j.Th,j.Uh)}J.Cn(k);l instanceof A.Qe?J.sn(e,f,g,j,l,k):J.rn(e,f,g,j,l,k)}}function l(a,b,c,e,f,g,h){for(var i,j,k=0,l=a.length;k<l;k++)if(i=
a[k],j=i.object,j.visible){if(h)i=h;else{i=i[b];if(!i)continue;g&&J.Kg(i.wa,i.blendEquation,i.jd,i.hd);J.Lg(i.pe);J.lk(i.Jd);w(i.polygonOffset,i.Th,i.Uh)}J.tn(c,e,f,i,j)}}function m(a,b,c){a.push({buffer:b,object:c,zf:u,Ma:u})}function q(a){for(var b in a.attributes)if(a.attributes[b].Aa)return r;return v}function p(a){for(var b in a.attributes)a.attributes[b].Aa=v}function s(a,b){for(var c=a.length-1;0<=c;c--)a[c].object===b&&a.splice(c,1)}function o(a,b){for(var c=a.length-1;0<=c;c--)a[c]===b&&
a.splice(c,1)}function n(a,b,c,e,f){if(!e.Ac||e.Aa)J.vu(e,b,c,f),e.Aa=v;if(e.O&&!f.gh){f.gh=new Float32Array(J.xg);for(var g=0,h=J.xg;g<h;g++)f.gh[g]=0}var i=v,g=e.Ac,h=g.n,j=e.n;g!==D&&(k.useProgram(g),D=g,i=r);e.id!==H&&(H=e.id,i=r);if(i||a!==L)k.uniformMatrix4fv(h.va,v,a.gd),a!==L&&(L=a);if(i){c&&e.N&&(j.vp.value=c.color,c instanceof A.qo?(j.pm.value=c.Ua,j.om.value=c.bb):c instanceof A.xi&&(j.wp.value=c.lp));if(e instanceof A.tc||e instanceof A.Db||e.lb){if(gb){for(var l,m=0,o=0,p=0,n,q,s,t=$a,
w=t.xh.wb,x=t.xh.Ee,z=t.od.wb,B=t.od.Ee,F=t.od.yh,G=t.rc.wb,O=t.rc.Ee,N=t.rc.yh,I=t.rc.op,ca=t.rc.bp,U=t.rc.tp,R=0,T=0,Y=0,V=s=0,c=V=0,i=b.length;c<i;c++)l=b[c],l.Yj||(n=l.color,q=l.nd,s=l.kb,l instanceof A.Ne?J.Kd?(m+=n.h*n.h,o+=n.i*n.i,p+=n.b*n.b):(m+=n.h,o+=n.i,p+=n.b):l instanceof A.tb?(s=3*R,J.Kd?(w[s]=n.h*n.h*q*q,w[s+1]=n.i*n.i*q*q,w[s+2]=n.b*n.b*q*q):(w[s]=n.h*q,w[s+1]=n.i*q,w[s+2]=n.b*q),ma.copy(Rc(l.G)),ma.Ia(Rc(l.target.G)),ma.normalize(),x[s]=ma.x,x[s+1]=ma.y,x[s+2]=ma.a,R+=1):l instanceof
A.dd?(V=3*T,J.Kd?(z[V]=n.h*n.h*q*q,z[V+1]=n.i*n.i*q*q,z[V+2]=n.b*n.b*q*q):(z[V]=n.h*q,z[V+1]=n.i*q,z[V+2]=n.b*q),n=Rc(l.G),B[V]=n.x,B[V+1]=n.y,B[V+2]=n.a,F[T]=s,T+=1):l instanceof A.ce&&(V=3*Y,J.Kd?(G[V]=n.h*n.h*q*q,G[V+1]=n.i*n.i*q*q,G[V+2]=n.b*n.b*q*q):(G[V]=n.h*q,G[V+1]=n.i*q,G[V+2]=n.b*q),n=Rc(l.G),O[V]=n.x,O[V+1]=n.y,O[V+2]=n.a,N[Y]=s,ma.copy(n),ma.Ia(Rc(l.target.G)),ma.normalize(),I[V]=ma.x,I[V+1]=ma.y,I[V+2]=ma.a,ca[Y]=Math.cos(l.ap),U[Y]=l.Xt,Y+=1));c=3*R;for(i=w.length;c<i;c++)w[c]=0;c=3*
T;for(i=z.length;c<i;c++)z[c]=0;c=3*Y;for(i=G.length;c<i;c++)G[c]=0;t.xh.length=R;t.od.length=T;t.rc.length=Y;t.Ja[0]=m;t.Ja[1]=o;t.Ja[2]=p;gb=v}c=$a;j.Ys.value=c.Ja;j.Qt.value=c.xh.wb;j.Rt.value=c.xh.Ee;j.Sv.value=c.od.wb;j.Uv.value=c.od.Ee;j.Tv.value=c.od.yh;j.Iw.value=c.rc.wb;j.Mw.value=c.rc.Ee;j.Kw.value=c.rc.yh;j.Jw.value=c.rc.op;j.Hw.value=c.rc.bp;j.Lw.value=c.rc.tp}if(e instanceof A.ua||e instanceof A.Db||e instanceof A.tc)j.opacity.value=e.opacity,J.Kd?tc(j.Zl.value,e.color):j.Zl.value=e.color,
(j.map.t=e.map)&&j.Ev.value.set(e.map.offset.x,e.map.offset.y,e.map.repeat.x,e.map.repeat.y),j.Qa.t=e.Qa,j.Ga.t=e.Ga,j.du.value=e.Ga instanceof A.zd?1:-1,j.Wc.value=e.Wc,j.Xc.value=e.Xc,j.Nc.value=e.Nc,j.dx.value=e.Ga&&e.Ga.Tc instanceof A.Gr;e instanceof A.Ub?(j.Zl.value=e.color,j.opacity.value=e.opacity):e instanceof A.$d?(j.Zv.value=e.color,j.opacity.value=e.opacity,j.size.value=e.size,j.scale.value=S.height/2,j.map.t=e.map):e instanceof A.tc?(j.Ie.value=e.Ie,J.Kd?(tc(j.Ja.value,e.Ja),tc(j.xb.value,
e.xb),tc(j.rd.value,e.rd)):(j.Ja.value=e.Ja,j.xb.value=e.xb,j.rd.value=e.rd),e.ad&&j.Me.value.copy(e.Me)):e instanceof A.Db?(J.Kd?(tc(j.Ja.value,e.Ja),tc(j.xb.value,e.xb)):(j.Ja.value=e.Ja,j.xb.value=e.xb),e.ad&&j.Me.value.copy(e.Me)):e instanceof A.bd?(j.Uu.value=a.Ua,j.Tu.value=a.bb,j.opacity.value=e.opacity):e instanceof A.xd&&(j.opacity.value=e.opacity);if(f.Eg&&!e.Ui&&j.Ef){i=c=0;for(l=b.length;i<l;i++)m=b[i],m.oc&&(m instanceof A.ce||m instanceof A.tb&&!m.Hn)&&(j.Df.t[c]=m.Df,j.ci.value[c]=
m.ci,j.Ef.value[c]=m.Ef,j.He.value[c]=m.He,j.Ng.value[c]=m.Ng,c++)}b=e.kr;j=0;for(c=b.length;j<c;j++)if(m=g.n[b[j][1]])switch(i=b[j][0],o=i.type,l=i.value,o){case "i":k.uniform1i(m,l);break;case "f":k.uniform1f(m,l);break;case "v2":k.uniform2f(m,l.x,l.y);break;case "v3":k.uniform3f(m,l.x,l.y,l.a);break;case "v4":k.uniform4f(m,l.x,l.y,l.a,l.j);break;case "c":k.uniform3f(m,l.h,l.i,l.b);break;case "fv1":k.uniform1fv(m,l);break;case "fv":k.uniform3fv(m,l);break;case "v2v":i.ma||(i.ma=new Float32Array(2*
l.length));o=0;for(p=l.length;o<p;o++)t=2*o,i.ma[t]=l[o].x,i.ma[t+1]=l[o].y;k.uniform2fv(m,i.ma);break;case "v3v":i.ma||(i.ma=new Float32Array(3*l.length));o=0;for(p=l.length;o<p;o++)t=3*o,i.ma[t]=l[o].x,i.ma[t+1]=l[o].y,i.ma[t+2]=l[o].a;k.uniform3fv(m,i.ma);break;case "v4v":i.ma||(i.ma=new Float32Array(4*l.length));o=0;for(p=l.length;o<p;o++)t=4*o,i.ma[t]=l[o].x,i.ma[t+1]=l[o].y,i.ma[t+2]=l[o].a,i.ma[t+3]=l[o].j;k.uniform4fv(m,i.ma);break;case "m4":i.ma||(i.ma=new Float32Array(16));Gd(l,i.ma);k.uniformMatrix4fv(m,
v,i.ma);break;case "m4v":i.ma||(i.ma=new Float32Array(16*l.length));o=0;for(p=l.length;o<p;o++)Fd(l[o],i.ma,16*o);k.uniformMatrix4fv(m,v,i.ma);break;case "t":k.uniform1i(m,l);m=i.t;if(!m)continue;if(m.ea instanceof Array&&6===m.ea.length){if(i=m,6===i.ea.length)if(i.Aa){i.ea.ul||(i.ea.ul=k.createTexture());k.activeTexture(k.TEXTURE0+l);k.bindTexture(k.TEXTURE_CUBE_MAP,i.ea.ul);l=[];for(m=0;6>m;m++)o=l,p=m,J.ct?(t=i.ea[m],x=vc,t.width<=x&&t.height<=x||(z=Math.max(t.width,t.height),w=Math.floor(t.width*
x/z),x=Math.floor(t.height*x/z),z=document.createElement("canvas"),z.width=w,z.height=x,z.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,w,x),t=z)):t=i.ea[m],o[p]=t;m=l[0];o=0===(m.width&m.width-1)&&0===(m.height&m.height-1);p=M(i.Ob);t=M(i.type);y(k.TEXTURE_CUBE_MAP,i,o);for(m=0;6>m;m++)k.texImage2D(k.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,p,p,t,l[m]);i.mf&&o&&k.generateMipmap(k.TEXTURE_CUBE_MAP);i.Aa=v;i.Xj&&i.Xj()}else k.activeTexture(k.TEXTURE0+l),k.bindTexture(k.TEXTURE_CUBE_MAP,i.ea.ul)}else m instanceof
A.zd?(i=m,k.activeTexture(k.TEXTURE0+l),k.bindTexture(k.TEXTURE_CUBE_MAP,i.lc)):J.pk(m,l);break;case "tv":if(!i.ma){i.ma=[];o=0;for(p=i.t.length;o<p;o++)i.ma[o]=l+o}k.uniform1iv(m,i.ma);o=0;for(p=i.t.length;o<p;o++)(m=i.t[o])&&J.pk(m,i.ma[o])}(e instanceof A.Za||e instanceof A.tc||e.Ga)&&h.ut!==u&&(b=Rc(a.G),k.uniform3f(h.ut,b.x,b.y,b.a));(e instanceof A.tc||e instanceof A.Db||e instanceof A.Za||e.ob)&&h.ix!==u&&k.uniformMatrix4fv(h.ix,v,a.Bd);e.ob&&k.uniformMatrix4fv(h.ny,v,f.aj)}return k.uniformMatrix4fv(h.Xp,
v,f.Lc.elements),h.wv&&k.uniformMatrix3fv(h.wv,v,f.Ti.elements),h.Cv!==u&&k.uniformMatrix4fv(h.Cv,v,f.G.elements),g}function t(a,b){a.Lc.multiply(b.Ca,a.G);a.Ti.Pc(a.Lc);a.Ti.ar()}function w(a,b,c){eb!==a&&(a?k.enable(k.POLYGON_OFFSET_FILL):k.disable(k.POLYGON_OFFSET_FILL),eb=a);a&&(jb!==b||fb!==c)&&(k.polygonOffset(b,c),jb=b,fb=c)}function z(a,b){var c;return"fragment"===a?c=k.createShader(k.FRAGMENT_SHADER):"vertex"===a&&(c=k.createShader(k.VERTEX_SHADER)),k.shaderSource(c,b),k.compileShader(c),
k.getShaderParameter(c,k.COMPILE_STATUS)?c:(console.error(k.getShaderInfoLog(c)),console.error(b),u)}function y(a,b,c){c?(k.texParameteri(a,k.TEXTURE_WRAP_S,M(b.dc)),k.texParameteri(a,k.TEXTURE_WRAP_T,M(b.ec)),k.texParameteri(a,k.TEXTURE_MAG_FILTER,M(b.yb)),k.texParameteri(a,k.TEXTURE_MIN_FILTER,M(b.eb))):(k.texParameteri(a,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(a,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texParameteri(a,k.TEXTURE_MAG_FILTER,F(b.yb)),k.texParameteri(a,k.TEXTURE_MIN_FILTER,F(b.eb)))}
function x(a,b){k.bindRenderbuffer(k.RENDERBUFFER,a);b.oe&&!b.sd?(k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_COMPONENT16,b.width,b.height),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.DEPTH_ATTACHMENT,k.RENDERBUFFER,a)):b.oe&&b.sd?(k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_STENCIL,b.width,b.height),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.DEPTH_STENCIL_ATTACHMENT,k.RENDERBUFFER,a)):k.renderbufferStorage(k.RENDERBUFFER,k.RGBA4,b.width,b.height)}function F(a){switch(a){case A.Pk:case A.yo:case A.xo:return k.NEAREST;
default:return k.LINEAR}}function M(a){switch(a){case A.Ic:return k.REPEAT;case A.Tg:return k.CLAMP_TO_EDGE;case A.Ok:return k.MIRRORED_REPEAT;case A.Pk:return k.NEAREST;case A.yo:return k.NEAREST_MIPMAP_NEAREST;case A.xo:return k.NEAREST_MIPMAP_LINEAR;case A.Vb:return k.LINEAR;case A.Tr:return k.LINEAR_MIPMAP_NEAREST;case A.Lk:return k.LINEAR_MIPMAP_LINEAR;case A.Er:return k.BYTE;case A.el:return k.UNSIGNED_BYTE;case A.ls:return k.SHORT;case A.ys:return k.UNSIGNED_SHORT;case A.Pr:return k.INT;case A.xs:return k.UNSIGNED_INT;
case A.Mr:return k.FLOAT;case A.wr:return k.ALPHA;case A.$g:return k.RGB;case A.Zg:return k.RGBA;case A.Vr:return k.LUMINANCE;case A.Ur:return k.LUMINANCE_ALPHA;case A.Dk:return k.FUNC_ADD;case A.rs:return k.FUNC_SUBTRACT;case A.js:return k.FUNC_REVERSE_SUBTRACT;case A.As:return k.ZERO;case A.as:return k.ONE;case A.qs:return k.SRC_COLOR;case A.ds:return k.ONE_MINUS_SRC_COLOR;case A.$k:return k.SRC_ALPHA;case A.Rk:return k.ONE_MINUS_SRC_ALPHA;case A.Jr:return k.DST_ALPHA;case A.bs:return k.ONE_MINUS_DST_ALPHA;
case A.Kr:return k.DST_COLOR;case A.cs:return k.ONE_MINUS_DST_COLOR;case A.ps:return k.SRC_ALPHA_SATURATE}return 0}console.log("THREE.WebGLRenderer",A.Gi);var a=a||{},S=a.canvas!==d?a.canvas:document.createElement("canvas"),O=a.precision!==d?a.precision:"highp",G=a.alpha!==d?a.alpha:r,B=a.premultipliedAlpha!==d?a.premultipliedAlpha:r,N=a.antialias!==d?a.antialias:v,U=a.stencil!==d?a.stencil:r,X=a.preserveDrawingBuffer!==d?a.preserveDrawingBuffer:v,T=a.clearColor!==d?new A.v(a.clearColor):new A.v(0),
R=a.ej!==d?a.ej:0,I=a.gv!==d?a.gv:4;this.K=S;this.ya=u;this.Cl=this.et=this.vk=this.bt=this.at=this.$s=this.dg=r;this.ai=this.jq=this.zp=this.Kd=v;this.Jq=this.tk=this.Bw=r;this.rk=this.sk=v;this.xg=8;this.Mj=4;this.ct=r;this.tq=[];this.sq=[];this.info={memory:{Xv:0,Na:0,Zc:0},p:{fg:0,g:0,l:0,P:0}};var J=this,k,da=[],D=u,ja=u,H=-1,Z=u,L=u,ha=0,ia=-1,ca=-1,Y=-1,V=-1,aa=-1,ka=-1,za=-1,ab=-1,eb=u,jb=u,fb=u,Wa=u,cc=0,Db=0,dc=0,ub=0,Vb=0,uc=0,kb=new A.Se,Ma=new A.M,Ia=new A.M,pb=new A.$a,ma=new A.d,gb=
r,$a={Ja:[0,0,0],xh:{length:0,wb:[],Ee:[]},od:{length:0,wb:[],Ee:[],yh:[]},rc:{length:0,wb:[],Ee:[],yh:[],op:[],bp:[],tp:[]}},wa;try{if(!(wa=S.getContext("experimental-webgl",{alpha:G,premultipliedAlpha:B,antialias:N,stencil:U,preserveDrawingBuffer:X})))throw"Error creating WebGL context.";}catch(zb){console.error(zb)}k=(wa.getExtension("OES_texture_float")||console.log("THREE.WebGLRenderer: Float textures not supported."),wa);k.clearColor(0,0,0,1);k.clearDepth(1);k.clearStencil(0);k.enable(k.DEPTH_TEST);
k.depthFunc(k.LEQUAL);k.frontFace(k.CCW);k.cullFace(k.BACK);k.enable(k.CULL_FACE);k.enable(k.BLEND);k.blendEquation(k.FUNC_ADD);k.blendFunc(k.SRC_ALPHA,k.ONE_MINUS_SRC_ALPHA);k.clearColor(T.h,T.i,T.b,R);this.ya=k;var qb=k.getParameter(k.MAX_VERTEX_TEXTURE_IMAGE_UNITS);k.getParameter(k.MAX_TEXTURE_SIZE);var vc=k.getParameter(k.MAX_CUBE_MAP_TEXTURE_SIZE);this.getContext=function(){return k};this.oB=function(){return 0<qb};this.Mg=function(a,b){S.width=a;S.height=b;this.vw(S.width,S.height)};this.vw=
function(a,b){Db=cc=0;dc=a;ub=b;k.viewport(cc,Db,dc,ub)};this.$A=function(a,b,c,e){k.scissor(a,b,c,e)};this.Wy=function(a){a?k.enable(k.SCISSOR_TEST):k.disable(k.SCISSOR_TEST)};this.uw=function(a,b){Ub(T,a);R=b;k.clearColor(T.h,T.i,T.b,R)};this.kk=function(a,b){T.copy(a);R=b;k.clearColor(T.h,T.i,T.b,R)};this.um=function(){return T};this.tm=function(){return R};this.clear=function(a,b,c){var e=0;if(a===d||a)e|=k.COLOR_BUFFER_BIT;if(b===d||b)e|=k.DEPTH_BUFFER_BIT;if(c===d||c)e|=k.STENCIL_BUFFER_BIT;
k.clear(e)};this.Ay=function(a,b,c,e){this.ok(a);this.clear(b,c,e)};this.$o=function(a){a.rg(this);this.sq.push(a)};this.Vs=function(a){a.rg(this);this.tq.push(a)};this.Ly=function(a){if(a.af)if(a.af=v,delete a.Lc,delete a.Ti,delete a.Ux,delete a.Tx,delete a.Vx,a instanceof A.C)for(var b in a.s.cb){var c=a.s.cb[b];k.deleteBuffer(c.Sa);k.deleteBuffer(c.Zf);k.deleteBuffer(c.tl);k.deleteBuffer(c.vc);k.deleteBuffer(c.Qi);k.deleteBuffer(c.Pi);k.deleteBuffer(c.pl);k.deleteBuffer(c.ql);k.deleteBuffer(c.ol);
k.deleteBuffer(c.rl);k.deleteBuffer(c.il);k.deleteBuffer(c.ml);var e=d,f=d;if(c.yf){e=0;for(f=c.yf;e<f;e++)k.deleteBuffer(c.Yf[e])}if(c.xf){e=0;for(f=c.xf;e<f;e++)k.deleteBuffer(c.fh[e])}if(c.Yb)for(e in e=d,c.Yb)k.deleteBuffer(c.Yb[e].buffer);J.info.memory.Na--}else a instanceof A.Jc?(a=a.s,k.deleteBuffer(a.Sa),k.deleteBuffer(a.vc),J.info.memory.Na--):a instanceof A.Xa?(a=a.s,k.deleteBuffer(a.Sa),k.deleteBuffer(a.vc),J.info.memory.Na--):a instanceof A.gc&&(a=a.s,k.deleteBuffer(a.Sa),k.deleteBuffer(a.vc),
J.info.memory.Na--)};this.Ny=function(a){a.af&&(a.af=v,k.deleteTexture(a.lc),J.info.memory.Zc--)};this.My=function(a){if(a&&a.lc)if(k.deleteTexture(a.lc),a instanceof A.zd)for(var b=0;6>b;b++)k.deleteFramebuffer(a.Ad[b]),k.deleteRenderbuffer(a.$f[b]);else k.deleteFramebuffer(a.Ad),k.deleteRenderbuffer(a.$f)};this.UB=function(a,b){D=u;H=Z=ab=za=Y=-1;gb=r;ca=ia=-1;this.Kq.update(a,b)};this.iw=function(a,b,c){a.Sa||(a.Sa=k.createBuffer());a.Zf||(a.Zf=k.createBuffer());a.qz&&(k.bindBuffer(k.ARRAY_BUFFER,
a.Sa),k.bufferData(k.ARRAY_BUFFER,a.DA,k.DYNAMIC_DRAW),k.enableVertexAttribArray(b.attributes.position),k.vertexAttribPointer(b.attributes.position,3,k.FLOAT,v,0,0));if(a.pz){k.bindBuffer(k.ARRAY_BUFFER,a.Zf);if(c===A.wi){var e,f,g,h,i,j,l,m,o,n,p=3*a.count;for(n=0;n<p;n+=9)c=a.uv,e=c[n],f=c[n+1],g=c[n+2],h=c[n+3],j=c[n+4],m=c[n+5],i=c[n+6],l=c[n+7],o=c[n+8],e=(e+h+i)/3,f=(f+j+l)/3,g=(g+m+o)/3,c[n]=e,c[n+1]=f,c[n+2]=g,c[n+3]=e,c[n+4]=f,c[n+5]=g,c[n+6]=e,c[n+7]=f,c[n+8]=g}k.bufferData(k.ARRAY_BUFFER,
a.uv,k.DYNAMIC_DRAW);k.enableVertexAttribArray(b.attributes.R);k.vertexAttribPointer(b.attributes.R,3,k.FLOAT,v,0,0)}k.drawArrays(k.TRIANGLES,0,a.count);a.count=0};this.sn=function(a,b,c,e,f,g){if(e.visible!==v&&(c=n(a,b,c,e,g),a=c.attributes,b=v,e=16777215*f.id+2*c.id+(e.Y?1:0),e!==Z&&(Z=e,b=r),g instanceof A.C)){g=f.vA;e=0;for(c=g.length;e<c;++e)b&&(k.bindBuffer(k.ARRAY_BUFFER,f.qr),k.vertexAttribPointer(a.position,f.qr.Fm,k.FLOAT,v,0,12*g[e].index),0<=a.R&&f.ho&&(k.bindBuffer(k.ARRAY_BUFFER,f.ho),
k.vertexAttribPointer(a.R,f.ho.Fm,k.FLOAT,v,0,12*g[e].index)),0<=a.Ab&&f.Ck&&(f.Ck?(k.bindBuffer(k.ARRAY_BUFFER,f.Ck),k.vertexAttribPointer(a.Ab,f.Ck.Fm,k.FLOAT,v,0,8*g[e].index),k.enableVertexAttribArray(a.Ab)):k.disableVertexAttribArray(a.Ab)),0<=a.color&&f.fo&&(k.bindBuffer(k.ARRAY_BUFFER,f.fo),k.vertexAttribPointer(a.color,f.fo.Fm,k.FLOAT,v,0,16*g[e].index)),k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,f.hx)),k.drawElements(k.TRIANGLES,g[e].count,k.UNSIGNED_SHORT,2*g[e].start),J.info.p.fg++,J.info.p.g+=
g[e].count,J.info.p.l+=g[e].count/3}};this.rn=function(a,b,c,e,f,g){if(e.visible!==v){var h,i,c=n(a,b,c,e,g),b=c.attributes,a=v,c=16777215*f.id+2*c.id+(e.Y?1:0);c!==Z&&(Z=c,a=r);if(!e.O&&0<=b.position)a&&(k.bindBuffer(k.ARRAY_BUFFER,f.Sa),k.vertexAttribPointer(b.position,3,k.FLOAT,v,0,0));else if(g.Kh){c=e.Ac.attributes;-1!==g.Kh?(k.bindBuffer(k.ARRAY_BUFFER,f.Yf[g.Kh]),k.vertexAttribPointer(c.position,3,k.FLOAT,v,0,0)):0<=c.position&&(k.bindBuffer(k.ARRAY_BUFFER,f.Sa),k.vertexAttribPointer(c.position,
3,k.FLOAT,v,0,0));if(g.Yp.length){h=0;var j=g.Yp;for(i=g.Uc;h<e.en&&h<j.length;)k.bindBuffer(k.ARRAY_BUFFER,f.Yf[j[h]]),k.vertexAttribPointer(c["morphTarget"+h],3,k.FLOAT,v,0,0),e.Ta&&(k.bindBuffer(k.ARRAY_BUFFER,f.fh[j[h]]),k.vertexAttribPointer(c["morphNormal"+h],3,k.FLOAT,v,0,0)),g.gh[h]=i[j[h]],h++}else{var j=[],l=-1,m=0;i=g.Uc;var o,p=i.length;h=0;for(-1!==g.Kh&&(j[g.Kh]=r);h<e.en;){for(o=0;o<p;o++)!j[o]&&i[o]>l&&(m=o,l=i[m]);k.bindBuffer(k.ARRAY_BUFFER,f.Yf[m]);k.vertexAttribPointer(c["morphTarget"+
h],3,k.FLOAT,v,0,0);e.Ta&&(k.bindBuffer(k.ARRAY_BUFFER,f.fh[m]),k.vertexAttribPointer(c["morphNormal"+h],3,k.FLOAT,v,0,0));g.gh[h]=l;j[m]=1;l=-1;h++}}e.Ac.n.Uc!==u&&k.uniform1fv(e.Ac.n.Uc,g.gh)}if(a){if(f.Yb){h=0;for(i=f.Yb.length;h<i;h++)c=f.Yb[h],0<=b[c.buffer.Dl]&&(k.bindBuffer(k.ARRAY_BUFFER,c.buffer),k.vertexAttribPointer(b[c.buffer.Dl],c.size,k.FLOAT,v,0,0))}0<=b.color&&(k.bindBuffer(k.ARRAY_BUFFER,f.vc),k.vertexAttribPointer(b.color,3,k.FLOAT,v,0,0));0<=b.R&&(k.bindBuffer(k.ARRAY_BUFFER,f.Zf),
k.vertexAttribPointer(b.R,3,k.FLOAT,v,0,0));0<=b.Tn&&(k.bindBuffer(k.ARRAY_BUFFER,f.tl),k.vertexAttribPointer(b.Tn,4,k.FLOAT,v,0,0));0<=b.Ab&&(f.Qi?(k.bindBuffer(k.ARRAY_BUFFER,f.Qi),k.vertexAttribPointer(b.Ab,2,k.FLOAT,v,0,0),k.enableVertexAttribArray(b.Ab)):k.disableVertexAttribArray(b.Ab));0<=b.eo&&(f.Pi?(k.bindBuffer(k.ARRAY_BUFFER,f.Pi),k.vertexAttribPointer(b.eo,2,k.FLOAT,v,0,0),k.enableVertexAttribArray(b.eo)):k.disableVertexAttribArray(b.eo));e.ob&&0<=b.Jn&&0<=b.Kn&&0<=b.In&&0<=b.Mn&&(k.bindBuffer(k.ARRAY_BUFFER,
f.pl),k.vertexAttribPointer(b.Jn,4,k.FLOAT,v,0,0),k.bindBuffer(k.ARRAY_BUFFER,f.ql),k.vertexAttribPointer(b.Kn,4,k.FLOAT,v,0,0),k.bindBuffer(k.ARRAY_BUFFER,f.ol),k.vertexAttribPointer(b.In,4,k.FLOAT,v,0,0),k.bindBuffer(k.ARRAY_BUFFER,f.rl),k.vertexAttribPointer(b.Mn,4,k.FLOAT,v,0,0))}g instanceof A.C?(e.Y?(e=e.sa,e!==Wa&&(k.lineWidth(e),Wa=e),a&&k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,f.ml),k.drawElements(k.LINES,f.nl,k.UNSIGNED_SHORT,0)):(a&&k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,f.il),k.drawElements(k.TRIANGLES,
f.jl,k.UNSIGNED_SHORT,0)),J.info.p.fg++,J.info.p.g+=f.jl,J.info.p.l+=f.jl/3):g instanceof A.Xa?(g=g.type===A.vo?k.LINE_STRIP:k.LINES,e=e.rf,e!==Wa&&(k.lineWidth(e),Wa=e),k.drawArrays(g,0,f.nl),J.info.p.fg++):g instanceof A.gc?(k.drawArrays(k.POINTS,0,f.Wo),J.info.p.fg++,J.info.p.P+=f.Wo):g instanceof A.Jc&&(k.drawArrays(k.TRIANGLE_STRIP,0,f.Ms),J.info.p.fg++)}};this.p=function(a,b,c,e){var f,h,m,o,n=a.jc,p=a.N;H=-1;gb=r;b.parent===d&&(console.warn("DEPRECATED: Camera hasn't been added to a Scene. Adding it..."),
a.add(b));this.Cl&&a.bc();b.Bd||(b.Bd=new Float32Array(16));b.gd||(b.gd=new Float32Array(16));b.Ca.Pc(b.G);Gd(b.Ca,b.Bd);Gd(b.va,b.gd);Ma.multiply(b.va,b.Ca);Qc(kb,Ma);this.et&&this.wu(a);i(this.tq,a,b);J.info.p.fg=0;J.info.p.g=0;J.info.p.l=0;J.info.p.P=0;this.ok(c);(this.dg||e)&&this.clear(this.$s,this.at,this.bt);o=a.kc;e=0;for(f=o.length;e<f;e++)if(h=o[e],m=h.object,h.p=v,m.visible&&(!(m instanceof A.C||m instanceof A.gc)||!m.lf||kb.contains(m))){t(m,b);var q=h,s=q.object,x=q.buffer,y=d,y=s.F;
y instanceof A.We?(y=x.pa,0<=y&&(y=s.s.T[y],y.Ma?(q.Ma=y,q.zf=u):(q.zf=y,q.Ma=u))):y&&(y.Ma?(q.Ma=y,q.zf=u):(q.zf=y,q.Ma=u));h.p=r;this.vk&&(m.bk?h.a=m.bk:(pb.copy(Rc(m.G)),Ma.V(pb),h.a=pb.a))}this.vk&&o.sort(g);o=a.fe;e=0;for(f=o.length;e<f;e++)h=o[e],m=h.object,m.visible&&(t(m,b),m=h.object.F,m.Ma?(h.Ma=m,h.zf=u):(h.zf=m,h.Ma=u));a.Bg?(e=a.Bg,this.Kg(e.wa,e.blendEquation,e.jd,e.hd),this.Lg(e.pe),this.lk(e.Jd),w(e.polygonOffset,e.Th,e.Uh),j(a.kc,v,"",b,n,p,r,e),l(a.fe,"",b,n,p,v,e)):(this.Kg(A.Xe),
j(a.kc,r,"opaque",b,n,p,v),l(a.fe,"opaque",b,n,p,v),j(a.kc,v,"transparent",b,n,p,r),l(a.fe,"transparent",b,n,p,r));i(this.sq,a,b);c&&c.mf&&c.eb!==A.Pk&&c.eb!==A.Vb&&(c instanceof A.zd?(k.bindTexture(k.TEXTURE_CUBE_MAP,c.lc),k.generateMipmap(k.TEXTURE_CUBE_MAP),k.bindTexture(k.TEXTURE_CUBE_MAP,u)):(k.bindTexture(k.TEXTURE_2D,c.lc),k.generateMipmap(k.TEXTURE_2D),k.bindTexture(k.TEXTURE_2D,u)));this.Lg(r);this.lk(r)};this.tn=function(a,b,c,e,f){var g=n(a,b,c,e,f);Z=-1;J.Cn(f);f.zm?f.zm(g,k,kb):f.p(function(a){J.iw(a,
g,e.Ha)})};this.wu=function(a){for(a.kc||(a.kc=[],a.fe=[],a.sl=[],a.kl=[]);a.Wf.length;){var g=a.Wf[0],i=a,j=d,l=d,n=d;if(!g.af)if(g.af=r,g.Lc=new A.M,g.Ti=new A.Nk,g instanceof A.C){if(l=g.s,l instanceof A.Q){if(l.cb===d){var t=l,w=d,x=d,y=d,z=d,B=d,D=d,G=d,F={},H=t.O.length,O=t.Ta.length;t.cb={};w=0;for(x=t.l.length;w<x;w++)y=t.l[w],z=y.pa,D=z!==d?z:-1,F[D]===d&&(F[D]={hash:D,mj:0}),G=F[D].hash+"_"+F[D].mj,t.cb[G]===d&&(t.cb[G]={zj:[],Aj:[],pa:z,g:0,yf:H,xf:O}),B=y instanceof A.ga?3:4,65535<t.cb[G].g+
B&&(F[D].mj+=1,G=F[D].hash+"_"+F[D].mj,t.cb[G]===d&&(t.cb[G]={zj:[],Aj:[],pa:z,g:0,yf:H,xf:O})),y instanceof A.ga?t.cb[G].zj.push(w):t.cb[G].Aj.push(w),t.cb[G].g+=B;t.sm=[];var N=d;for(N in t.cb)t.cb[N].id=ha++,t.sm.push(t.cb[N])}for(j in l.cb)if(n=l.cb[j],!n.Sa){var I=n;I.Sa=k.createBuffer();I.Zf=k.createBuffer();I.tl=k.createBuffer();I.vc=k.createBuffer();I.Qi=k.createBuffer();I.Pi=k.createBuffer();I.pl=k.createBuffer();I.ql=k.createBuffer();I.ol=k.createBuffer();I.rl=k.createBuffer();I.il=k.createBuffer();
I.ml=k.createBuffer();var M=d,V=d;if(I.yf){I.Yf=[];M=0;for(V=I.yf;M<V;M++)I.Yf.push(k.createBuffer())}if(I.xf){I.fh=[];M=0;for(V=I.xf;M<V;M++)I.fh.push(k.createBuffer())}J.info.memory.Na++;var L=n,R=g,S=R.s,ca=L.zj,U=L.Aj,T=3*ca.length+4*U.length,Y=1*ca.length+2*U.length,X=3*ca.length+4*U.length,aa=c(R,L),Z=f(aa),da=e(aa),ia=aa.m?aa.m:v;L.ee=new Float32Array(3*T);da&&(L.No=new Float32Array(3*T));S.Fj&&(L.So=new Float32Array(4*T));ia&&(L.de=new Float32Array(3*T));if(Z){if(0<S.Oc.length||0<S.H.length)L.Uo=
new Float32Array(2*T);if(1<S.Oc.length||1<S.H.length)L.To=new Float32Array(2*T)}R.s.Rb.length&&R.s.qd.length&&(L.Po=new Float32Array(4*T),L.Qo=new Float32Array(4*T),L.Oo=new Float32Array(4*T),L.Ro=new Float32Array(4*T));L.Ho=new Uint16Array(3*Y);L.Jo=new Uint16Array(2*X);var ka=d,ja=d;if(L.yf){L.Mo=[];ka=0;for(ja=L.yf;ka<ja;ka++)L.Mo.push(new Float32Array(3*T))}if(L.xf){L.Lo=[];ka=0;for(ja=L.xf;ka<ja;ka++)L.Lo.push(new Float32Array(3*T))}L.jl=3*Y;L.nl=2*X;if(aa.attributes){L.Yb===d&&(L.Yb=[]);var za=
d;for(za in aa.attributes){var ab=aa.attributes[za],ma={},eb;for(eb in ab)ma[eb]=ab[eb];if(!ma.ll||ma.It){ma.ll=r;var wa=1;"v2"===ma.type?wa=2:"v3"===ma.type?wa=3:"v4"===ma.type?wa=4:"c"===ma.type&&(wa=3);ma.size=wa;ma.f=new Float32Array(T*wa);ma.buffer=k.createBuffer();ma.buffer.Dl=za;ab.Aa=r;ma.Hs=ab}L.Yb.push(ma)}}L.Io=r;l.Cb=r;l.Ym=r;l.wj=r;l.Ak=r;l.Tj=r;l.Un=r;l.Fb=r}}}else if(g instanceof A.Jc){if(l=g.s,!l.Sa){var jb=l;jb.Sa=k.createBuffer();jb.vc=k.createBuffer();J.info.memory.Na++;var Ia=
l,Ma=Ia.g.length;Ia.ee=new Float32Array(3*Ma);Ia.de=new Float32Array(3*Ma);Ia.Ms=Ma;l.Cb=r;l.Fb=r}}else if(g instanceof A.Xa){if(l=g.s,!l.Sa){var fb=l;fb.Sa=k.createBuffer();fb.vc=k.createBuffer();J.info.memory.Na++;var Wa=l,gb=g,kb=Wa.g.length;Wa.ee=new Float32Array(3*kb);Wa.de=new Float32Array(3*kb);Wa.nl=kb;b(Wa,gb);l.Cb=r;l.Fb=r}}else if(g instanceof A.gc&&(l=g.s,!l.Sa)){var pb=l;pb.Sa=k.createBuffer();pb.vc=k.createBuffer();J.info.Na++;var $a=l,cc=g,Db=$a.g.length;$a.ee=new Float32Array(3*Db);
$a.de=new Float32Array(3*Db);$a.Is=[];$a.Wo=Db;b($a,cc);l.Cb=r;l.Fb=r}if(!g.Vo){if(g instanceof A.C)if(l=g.s,l instanceof A.Qe)m(i.kc,l,g);else for(j in l.cb)n=l.cb[j],m(i.kc,n,g);else g instanceof A.Jc||g instanceof A.Xa||g instanceof A.gc?(l=g.s,m(i.kc,l,g)):g instanceof A.Wg||g.zm?i.fe.push({object:g,zf:u,Ma:u}):g instanceof A.yd?i.sl.push(g):g instanceof A.Ve&&i.kl.push(g);g.Vo=r}a.Wf.splice(0,1)}for(;a.Xf.length;){var rb=a.Xf[0],qb=a;rb instanceof A.C||rb instanceof A.gc||rb instanceof A.Jc||
rb instanceof A.Xa?s(qb.kc,rb):rb instanceof A.yd?o(qb.sl,rb):rb instanceof A.Ve?o(qb.kl,rb):(rb instanceof A.Wg||rb.zm)&&s(qb.fe,rb);rb.Vo=v;a.Xf.splice(0,1)}for(var zb=0,dc=a.kc.length;zb<dc;zb++){var Ab=a.kc[zb].object,ra=Ab.s,ub=d,Hc=d,hb=d;if(Ab instanceof A.C)if(ra instanceof A.Qe)ra.Cb=v,ra.wj=v,ra.Ak=v,ra.Tj=v,ra.Fb=v;else{for(var Vb=0,uc=ra.sm.length;Vb<uc;Vb++)if(ub=ra.sm[Vb],hb=c(Ab,ub),Hc=hb.attributes&&q(hb),ra.Cb||ra.Ym||ra.wj||ra.Ak||ra.Tj||ra.Fb||ra.Un||Hc){var oa=ub,vc=Ab,lb=k.DYNAMIC_DRAW,
Re=!ra.uj,zc=hb;if(oa.Io){var le=e(zc),Md=zc.m?zc.m:v,me=f(zc),qd=le===A.Kc,K=d,ba=d,xb=d,Q=d,Ic=d,gc=d,Bb=d,rd=d,Wb=d,Jc=d,Kc=d,ea=d,fa=d,ga=d,xa=d,Eb=d,Fb=d,Gb=d,Uc=d,Hb=d,Ib=d,Jb=d,Vc=d,Kb=d,Lb=d,Mb=d,Wc=d,Nb=d,Ob=d,Pb=d,Xc=d,Qb=d,Rb=d,Sb=d,Yc=d,hc=d,ic=d,jc=d,sd=d,kc=d,lc=d,mc=d,td=d,ta=d,ne=d,nc=d,Lc=d,Mc=d,Ra=d,oe=d,Pa=d,Qa=d,oc=d,Xb=d,Ja=0,Oa=0,Yb=0,Zb=0,sb=0,Va=0,ya=0,Xa=0,Ka=0,P=0,na=0,E=0,mb=d,Sa=oa.ee,Zc=oa.Uo,$c=oa.To,tb=oa.No,Ca=oa.So,Ta=oa.de,Da=oa.Po,Ea=oa.Qo,Fa=oa.Oo,Ga=oa.Ro,Nd=oa.Mo,
Od=oa.Lo,Pd=oa.Yb,C=d,Tb=oa.Ho,nb=oa.Jo,Ya=vc.s,Se=Ya.wj,pe=Ya.Ak,Te=Ya.Tj,Ue=Ya.Un,Ve=Ya.Fb,We=Ya.Ym,Ac=Ya.g,ua=oa.zj,va=oa.Aj,La=Ya.l,Qd=Ya.H[0],Rd=Ya.H[1],Bc=Ya.Ln,Cc=Ya.Lq,Dc=Ya.qd,pc=Ya.Rb,qc=Ya.O,ud=Ya.Ta;if(Ya.Cb){K=0;for(ba=ua.length;K<ba;K++)Q=La[ua[K]],ea=Ac[Q.o],fa=Ac[Q.b],ga=Ac[Q.w],Sa[Oa]=ea.x,Sa[Oa+1]=ea.y,Sa[Oa+2]=ea.a,Sa[Oa+3]=fa.x,Sa[Oa+4]=fa.y,Sa[Oa+5]=fa.a,Sa[Oa+6]=ga.x,Sa[Oa+7]=ga.y,Sa[Oa+8]=ga.a,Oa+=9;K=0;for(ba=va.length;K<ba;K++)Q=La[va[K]],ea=Ac[Q.o],fa=Ac[Q.b],ga=Ac[Q.w],
xa=Ac[Q.da],Sa[Oa]=ea.x,Sa[Oa+1]=ea.y,Sa[Oa+2]=ea.a,Sa[Oa+3]=fa.x,Sa[Oa+4]=fa.y,Sa[Oa+5]=fa.a,Sa[Oa+6]=ga.x,Sa[Oa+7]=ga.y,Sa[Oa+8]=ga.a,Sa[Oa+9]=xa.x,Sa[Oa+10]=xa.y,Sa[Oa+11]=xa.a,Oa+=12;k.bindBuffer(k.ARRAY_BUFFER,oa.Sa);k.bufferData(k.ARRAY_BUFFER,Sa,lb)}if(We){Ra=0;for(oe=qc.length;Ra<oe;Ra++){K=na=0;for(ba=ua.length;K<ba;K++)oc=ua[K],Q=La[oc],ea=qc[Ra].g[Q.o],fa=qc[Ra].g[Q.b],ga=qc[Ra].g[Q.w],Pa=Nd[Ra],Pa[na]=ea.x,Pa[na+1]=ea.y,Pa[na+2]=ea.a,Pa[na+3]=fa.x,Pa[na+4]=fa.y,Pa[na+5]=fa.a,Pa[na+6]=
ga.x,Pa[na+7]=ga.y,Pa[na+8]=ga.a,zc.Ta&&(qd?(Xb=ud[Ra].z[oc],Hb=Xb.o,Ib=Xb.b,Jb=Xb.w):Jb=Ib=Hb=ud[Ra].$t[oc],Qa=Od[Ra],Qa[na]=Hb.x,Qa[na+1]=Hb.y,Qa[na+2]=Hb.a,Qa[na+3]=Ib.x,Qa[na+4]=Ib.y,Qa[na+5]=Ib.a,Qa[na+6]=Jb.x,Qa[na+7]=Jb.y,Qa[na+8]=Jb.a),na+=9;K=0;for(ba=va.length;K<ba;K++)oc=va[K],Q=La[oc],ea=qc[Ra].g[Q.o],fa=qc[Ra].g[Q.b],ga=qc[Ra].g[Q.w],xa=qc[Ra].g[Q.da],Pa=Nd[Ra],Pa[na]=ea.x,Pa[na+1]=ea.y,Pa[na+2]=ea.a,Pa[na+3]=fa.x,Pa[na+4]=fa.y,Pa[na+5]=fa.a,Pa[na+6]=ga.x,Pa[na+7]=ga.y,Pa[na+8]=ga.a,
Pa[na+9]=xa.x,Pa[na+10]=xa.y,Pa[na+11]=xa.a,zc.Ta&&(qd?(Xb=ud[Ra].z[oc],Hb=Xb.o,Ib=Xb.b,Jb=Xb.w,Vc=Xb.da):Vc=Jb=Ib=Hb=ud[Ra].$t[oc],Qa=Od[Ra],Qa[na]=Hb.x,Qa[na+1]=Hb.y,Qa[na+2]=Hb.a,Qa[na+3]=Ib.x,Qa[na+4]=Ib.y,Qa[na+5]=Ib.a,Qa[na+6]=Jb.x,Qa[na+7]=Jb.y,Qa[na+8]=Jb.a,Qa[na+9]=Vc.x,Qa[na+10]=Vc.y,Qa[na+11]=Vc.a),na+=12;k.bindBuffer(k.ARRAY_BUFFER,oa.Yf[Ra]);k.bufferData(k.ARRAY_BUFFER,Nd[Ra],lb);zc.Ta&&(k.bindBuffer(k.ARRAY_BUFFER,oa.fh[Ra]),k.bufferData(k.ARRAY_BUFFER,Od[Ra],lb))}}if(pc.length){K=0;
for(ba=ua.length;K<ba;K++)Q=La[ua[K]],Nb=pc[Q.o],Ob=pc[Q.b],Pb=pc[Q.w],Ga[P]=Nb.x,Ga[P+1]=Nb.y,Ga[P+2]=Nb.a,Ga[P+3]=Nb.j,Ga[P+4]=Ob.x,Ga[P+5]=Ob.y,Ga[P+6]=Ob.a,Ga[P+7]=Ob.j,Ga[P+8]=Pb.x,Ga[P+9]=Pb.y,Ga[P+10]=Pb.a,Ga[P+11]=Pb.j,Qb=Dc[Q.o],Rb=Dc[Q.b],Sb=Dc[Q.w],Fa[P]=Qb.x,Fa[P+1]=Qb.y,Fa[P+2]=Qb.a,Fa[P+3]=Qb.j,Fa[P+4]=Rb.x,Fa[P+5]=Rb.y,Fa[P+6]=Rb.a,Fa[P+7]=Rb.j,Fa[P+8]=Sb.x,Fa[P+9]=Sb.y,Fa[P+10]=Sb.a,Fa[P+11]=Sb.j,hc=Bc[Q.o],ic=Bc[Q.b],jc=Bc[Q.w],Da[P]=hc.x,Da[P+1]=hc.y,Da[P+2]=hc.a,Da[P+3]=1,Da[P+
4]=ic.x,Da[P+5]=ic.y,Da[P+6]=ic.a,Da[P+7]=1,Da[P+8]=jc.x,Da[P+9]=jc.y,Da[P+10]=jc.a,Da[P+11]=1,kc=Cc[Q.o],lc=Cc[Q.b],mc=Cc[Q.w],Ea[P]=kc.x,Ea[P+1]=kc.y,Ea[P+2]=kc.a,Ea[P+3]=1,Ea[P+4]=lc.x,Ea[P+5]=lc.y,Ea[P+6]=lc.a,Ea[P+7]=1,Ea[P+8]=mc.x,Ea[P+9]=mc.y,Ea[P+10]=mc.a,Ea[P+11]=1,P+=12;K=0;for(ba=va.length;K<ba;K++)Q=La[va[K]],Nb=pc[Q.o],Ob=pc[Q.b],Pb=pc[Q.w],Xc=pc[Q.da],Ga[P]=Nb.x,Ga[P+1]=Nb.y,Ga[P+2]=Nb.a,Ga[P+3]=Nb.j,Ga[P+4]=Ob.x,Ga[P+5]=Ob.y,Ga[P+6]=Ob.a,Ga[P+7]=Ob.j,Ga[P+8]=Pb.x,Ga[P+9]=Pb.y,Ga[P+
10]=Pb.a,Ga[P+11]=Pb.j,Ga[P+12]=Xc.x,Ga[P+13]=Xc.y,Ga[P+14]=Xc.a,Ga[P+15]=Xc.j,Qb=Dc[Q.o],Rb=Dc[Q.b],Sb=Dc[Q.w],Yc=Dc[Q.da],Fa[P]=Qb.x,Fa[P+1]=Qb.y,Fa[P+2]=Qb.a,Fa[P+3]=Qb.j,Fa[P+4]=Rb.x,Fa[P+5]=Rb.y,Fa[P+6]=Rb.a,Fa[P+7]=Rb.j,Fa[P+8]=Sb.x,Fa[P+9]=Sb.y,Fa[P+10]=Sb.a,Fa[P+11]=Sb.j,Fa[P+12]=Yc.x,Fa[P+13]=Yc.y,Fa[P+14]=Yc.a,Fa[P+15]=Yc.j,hc=Bc[Q.o],ic=Bc[Q.b],jc=Bc[Q.w],sd=Bc[Q.da],Da[P]=hc.x,Da[P+1]=hc.y,Da[P+2]=hc.a,Da[P+3]=1,Da[P+4]=ic.x,Da[P+5]=ic.y,Da[P+6]=ic.a,Da[P+7]=1,Da[P+8]=jc.x,Da[P+9]=jc.y,
Da[P+10]=jc.a,Da[P+11]=1,Da[P+12]=sd.x,Da[P+13]=sd.y,Da[P+14]=sd.a,Da[P+15]=1,kc=Cc[Q.o],lc=Cc[Q.b],mc=Cc[Q.w],td=Cc[Q.da],Ea[P]=kc.x,Ea[P+1]=kc.y,Ea[P+2]=kc.a,Ea[P+3]=1,Ea[P+4]=lc.x,Ea[P+5]=lc.y,Ea[P+6]=lc.a,Ea[P+7]=1,Ea[P+8]=mc.x,Ea[P+9]=mc.y,Ea[P+10]=mc.a,Ea[P+11]=1,Ea[P+12]=td.x,Ea[P+13]=td.y,Ea[P+14]=td.a,Ea[P+15]=1,P+=16;0<P&&(k.bindBuffer(k.ARRAY_BUFFER,oa.pl),k.bufferData(k.ARRAY_BUFFER,Da,lb),k.bindBuffer(k.ARRAY_BUFFER,oa.ql),k.bufferData(k.ARRAY_BUFFER,Ea,lb),k.bindBuffer(k.ARRAY_BUFFER,
oa.ol),k.bufferData(k.ARRAY_BUFFER,Fa,lb),k.bindBuffer(k.ARRAY_BUFFER,oa.rl),k.bufferData(k.ARRAY_BUFFER,Ga,lb))}if(Ve&&Md){K=0;for(ba=ua.length;K<ba;K++)Q=La[ua[K]],Bb=Q.m,rd=Q.color,3===Bb.length&&Md===A.Ki?(Kb=Bb[0],Lb=Bb[1],Mb=Bb[2]):Mb=Lb=Kb=rd,Ta[Ka]=Kb.h,Ta[Ka+1]=Kb.i,Ta[Ka+2]=Kb.b,Ta[Ka+3]=Lb.h,Ta[Ka+4]=Lb.i,Ta[Ka+5]=Lb.b,Ta[Ka+6]=Mb.h,Ta[Ka+7]=Mb.i,Ta[Ka+8]=Mb.b,Ka+=9;K=0;for(ba=va.length;K<ba;K++)Q=La[va[K]],Bb=Q.m,rd=Q.color,4===Bb.length&&Md===A.Ki?(Kb=Bb[0],Lb=Bb[1],Mb=Bb[2],Wc=Bb[3]):
Wc=Mb=Lb=Kb=rd,Ta[Ka]=Kb.h,Ta[Ka+1]=Kb.i,Ta[Ka+2]=Kb.b,Ta[Ka+3]=Lb.h,Ta[Ka+4]=Lb.i,Ta[Ka+5]=Lb.b,Ta[Ka+6]=Mb.h,Ta[Ka+7]=Mb.i,Ta[Ka+8]=Mb.b,Ta[Ka+9]=Wc.h,Ta[Ka+10]=Wc.i,Ta[Ka+11]=Wc.b,Ka+=12;0<Ka&&(k.bindBuffer(k.ARRAY_BUFFER,oa.vc),k.bufferData(k.ARRAY_BUFFER,Ta,lb))}if(Ue&&Ya.Fj){K=0;for(ba=ua.length;K<ba;K++)Q=La[ua[K]],Wb=Q.ud,Eb=Wb[0],Fb=Wb[1],Gb=Wb[2],Ca[ya]=Eb.x,Ca[ya+1]=Eb.y,Ca[ya+2]=Eb.a,Ca[ya+3]=Eb.j,Ca[ya+4]=Fb.x,Ca[ya+5]=Fb.y,Ca[ya+6]=Fb.a,Ca[ya+7]=Fb.j,Ca[ya+8]=Gb.x,Ca[ya+9]=Gb.y,Ca[ya+
10]=Gb.a,Ca[ya+11]=Gb.j,ya+=12;K=0;for(ba=va.length;K<ba;K++)Q=La[va[K]],Wb=Q.ud,Eb=Wb[0],Fb=Wb[1],Gb=Wb[2],Uc=Wb[3],Ca[ya]=Eb.x,Ca[ya+1]=Eb.y,Ca[ya+2]=Eb.a,Ca[ya+3]=Eb.j,Ca[ya+4]=Fb.x,Ca[ya+5]=Fb.y,Ca[ya+6]=Fb.a,Ca[ya+7]=Fb.j,Ca[ya+8]=Gb.x,Ca[ya+9]=Gb.y,Ca[ya+10]=Gb.a,Ca[ya+11]=Gb.j,Ca[ya+12]=Uc.x,Ca[ya+13]=Uc.y,Ca[ya+14]=Uc.a,Ca[ya+15]=Uc.j,ya+=16;k.bindBuffer(k.ARRAY_BUFFER,oa.tl);k.bufferData(k.ARRAY_BUFFER,Ca,lb)}if(Te&&le){K=0;for(ba=ua.length;K<ba;K++)if(Q=La[ua[K]],Ic=Q.z,gc=Q.R,3===Ic.length&&
qd)for(ta=0;3>ta;ta++)nc=Ic[ta],tb[Va]=nc.x,tb[Va+1]=nc.y,tb[Va+2]=nc.a,Va+=3;else for(ta=0;3>ta;ta++)tb[Va]=gc.x,tb[Va+1]=gc.y,tb[Va+2]=gc.a,Va+=3;K=0;for(ba=va.length;K<ba;K++)if(Q=La[va[K]],Ic=Q.z,gc=Q.R,4===Ic.length&&qd)for(ta=0;4>ta;ta++)nc=Ic[ta],tb[Va]=nc.x,tb[Va+1]=nc.y,tb[Va+2]=nc.a,Va+=3;else for(ta=0;4>ta;ta++)tb[Va]=gc.x,tb[Va+1]=gc.y,tb[Va+2]=gc.a,Va+=3;k.bindBuffer(k.ARRAY_BUFFER,oa.Zf);k.bufferData(k.ARRAY_BUFFER,tb,lb)}if(pe&&Qd&&me){K=0;for(ba=ua.length;K<ba;K++)if(xb=ua[K],Q=La[xb],
Jc=Qd[xb],Jc!==d)for(ta=0;3>ta;ta++)Lc=Jc[ta],Zc[Yb]=Lc.ia,Zc[Yb+1]=Lc.Z,Yb+=2;K=0;for(ba=va.length;K<ba;K++)if(xb=va[K],Q=La[xb],Jc=Qd[xb],Jc!==d)for(ta=0;4>ta;ta++)Lc=Jc[ta],Zc[Yb]=Lc.ia,Zc[Yb+1]=Lc.Z,Yb+=2;0<Yb&&(k.bindBuffer(k.ARRAY_BUFFER,oa.Qi),k.bufferData(k.ARRAY_BUFFER,Zc,lb))}if(pe&&Rd&&me){K=0;for(ba=ua.length;K<ba;K++)if(xb=ua[K],Q=La[xb],Kc=Rd[xb],Kc!==d)for(ta=0;3>ta;ta++)Mc=Kc[ta],$c[Zb]=Mc.ia,$c[Zb+1]=Mc.Z,Zb+=2;K=0;for(ba=va.length;K<ba;K++)if(xb=va[K],Q=La[xb],Kc=Rd[xb],Kc!==d)for(ta=
0;4>ta;ta++)Mc=Kc[ta],$c[Zb]=Mc.ia,$c[Zb+1]=Mc.Z,Zb+=2;0<Zb&&(k.bindBuffer(k.ARRAY_BUFFER,oa.Pi),k.bufferData(k.ARRAY_BUFFER,$c,lb))}if(Se){K=0;for(ba=ua.length;K<ba;K++)Q=La[ua[K]],Tb[sb]=Ja,Tb[sb+1]=Ja+1,Tb[sb+2]=Ja+2,sb+=3,nb[Xa]=Ja,nb[Xa+1]=Ja+1,nb[Xa+2]=Ja,nb[Xa+3]=Ja+2,nb[Xa+4]=Ja+1,nb[Xa+5]=Ja+2,Xa+=6,Ja+=3;K=0;for(ba=va.length;K<ba;K++)Q=La[va[K]],Tb[sb]=Ja,Tb[sb+1]=Ja+1,Tb[sb+2]=Ja+3,Tb[sb+3]=Ja+1,Tb[sb+4]=Ja+2,Tb[sb+5]=Ja+3,sb+=6,nb[Xa]=Ja,nb[Xa+1]=Ja+1,nb[Xa+2]=Ja,nb[Xa+3]=Ja+3,nb[Xa+4]=
Ja+1,nb[Xa+5]=Ja+2,nb[Xa+6]=Ja+2,nb[Xa+7]=Ja+3,Xa+=8,Ja+=4;k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,oa.il);k.bufferData(k.ELEMENT_ARRAY_BUFFER,Tb,lb);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,oa.ml);k.bufferData(k.ELEMENT_ARRAY_BUFFER,nb,lb)}if(Pd){ta=0;for(ne=Pd.length;ta<ne;ta++)if(C=Pd[ta],C.Hs.Aa){E=0;if(1===C.size)if(C.vb===d||"vertices"===C.vb){K=0;for(ba=ua.length;K<ba;K++)Q=La[ua[K]],C.f[E]=C.value[Q.o],C.f[E+1]=C.value[Q.b],C.f[E+2]=C.value[Q.w],E+=3;K=0;for(ba=va.length;K<ba;K++)Q=La[va[K]],C.f[E]=
C.value[Q.o],C.f[E+1]=C.value[Q.b],C.f[E+2]=C.value[Q.w],C.f[E+3]=C.value[Q.da],E+=4}else{if("faces"===C.vb){K=0;for(ba=ua.length;K<ba;K++)mb=C.value[ua[K]],C.f[E]=mb,C.f[E+1]=mb,C.f[E+2]=mb,E+=3;K=0;for(ba=va.length;K<ba;K++)mb=C.value[va[K]],C.f[E]=mb,C.f[E+1]=mb,C.f[E+2]=mb,C.f[E+3]=mb,E+=4}}else if(2===C.size)if(C.vb===d||"vertices"===C.vb){K=0;for(ba=ua.length;K<ba;K++)Q=La[ua[K]],ea=C.value[Q.o],fa=C.value[Q.b],ga=C.value[Q.w],C.f[E]=ea.x,C.f[E+1]=ea.y,C.f[E+2]=fa.x,C.f[E+3]=fa.y,C.f[E+4]=ga.x,
C.f[E+5]=ga.y,E+=6;K=0;for(ba=va.length;K<ba;K++)Q=La[va[K]],ea=C.value[Q.o],fa=C.value[Q.b],ga=C.value[Q.w],xa=C.value[Q.da],C.f[E]=ea.x,C.f[E+1]=ea.y,C.f[E+2]=fa.x,C.f[E+3]=fa.y,C.f[E+4]=ga.x,C.f[E+5]=ga.y,C.f[E+6]=xa.x,C.f[E+7]=xa.y,E+=8}else{if("faces"===C.vb){K=0;for(ba=ua.length;K<ba;K++)ga=fa=ea=mb=C.value[ua[K]],C.f[E]=ea.x,C.f[E+1]=ea.y,C.f[E+2]=fa.x,C.f[E+3]=fa.y,C.f[E+4]=ga.x,C.f[E+5]=ga.y,E+=6;K=0;for(ba=va.length;K<ba;K++)xa=ga=fa=ea=mb=C.value[va[K]],C.f[E]=ea.x,C.f[E+1]=ea.y,C.f[E+
2]=fa.x,C.f[E+3]=fa.y,C.f[E+4]=ga.x,C.f[E+5]=ga.y,C.f[E+6]=xa.x,C.f[E+7]=xa.y,E+=8}}else if(3===C.size){var pa;pa="c"===C.type?["r","g","b"]:["x","y","z"];if(C.vb===d||"vertices"===C.vb){K=0;for(ba=ua.length;K<ba;K++)Q=La[ua[K]],ea=C.value[Q.o],fa=C.value[Q.b],ga=C.value[Q.w],C.f[E]=ea[pa[0]],C.f[E+1]=ea[pa[1]],C.f[E+2]=ea[pa[2]],C.f[E+3]=fa[pa[0]],C.f[E+4]=fa[pa[1]],C.f[E+5]=fa[pa[2]],C.f[E+6]=ga[pa[0]],C.f[E+7]=ga[pa[1]],C.f[E+8]=ga[pa[2]],E+=9;K=0;for(ba=va.length;K<ba;K++)Q=La[va[K]],ea=C.value[Q.o],
fa=C.value[Q.b],ga=C.value[Q.w],xa=C.value[Q.da],C.f[E]=ea[pa[0]],C.f[E+1]=ea[pa[1]],C.f[E+2]=ea[pa[2]],C.f[E+3]=fa[pa[0]],C.f[E+4]=fa[pa[1]],C.f[E+5]=fa[pa[2]],C.f[E+6]=ga[pa[0]],C.f[E+7]=ga[pa[1]],C.f[E+8]=ga[pa[2]],C.f[E+9]=xa[pa[0]],C.f[E+10]=xa[pa[1]],C.f[E+11]=xa[pa[2]],E+=12}else if("faces"===C.vb){K=0;for(ba=ua.length;K<ba;K++)ga=fa=ea=mb=C.value[ua[K]],C.f[E]=ea[pa[0]],C.f[E+1]=ea[pa[1]],C.f[E+2]=ea[pa[2]],C.f[E+3]=fa[pa[0]],C.f[E+4]=fa[pa[1]],C.f[E+5]=fa[pa[2]],C.f[E+6]=ga[pa[0]],C.f[E+
7]=ga[pa[1]],C.f[E+8]=ga[pa[2]],E+=9;K=0;for(ba=va.length;K<ba;K++)xa=ga=fa=ea=mb=C.value[va[K]],C.f[E]=ea[pa[0]],C.f[E+1]=ea[pa[1]],C.f[E+2]=ea[pa[2]],C.f[E+3]=fa[pa[0]],C.f[E+4]=fa[pa[1]],C.f[E+5]=fa[pa[2]],C.f[E+6]=ga[pa[0]],C.f[E+7]=ga[pa[1]],C.f[E+8]=ga[pa[2]],C.f[E+9]=xa[pa[0]],C.f[E+10]=xa[pa[1]],C.f[E+11]=xa[pa[2]],E+=12}}else if(4===C.size)if(C.vb===d||"vertices"===C.vb){K=0;for(ba=ua.length;K<ba;K++)Q=La[ua[K]],ea=C.value[Q.o],fa=C.value[Q.b],ga=C.value[Q.w],C.f[E]=ea.x,C.f[E+1]=ea.y,C.f[E+
2]=ea.a,C.f[E+3]=ea.j,C.f[E+4]=fa.x,C.f[E+5]=fa.y,C.f[E+6]=fa.a,C.f[E+7]=fa.j,C.f[E+8]=ga.x,C.f[E+9]=ga.y,C.f[E+10]=ga.a,C.f[E+11]=ga.j,E+=12;K=0;for(ba=va.length;K<ba;K++)Q=La[va[K]],ea=C.value[Q.o],fa=C.value[Q.b],ga=C.value[Q.w],xa=C.value[Q.da],C.f[E]=ea.x,C.f[E+1]=ea.y,C.f[E+2]=ea.a,C.f[E+3]=ea.j,C.f[E+4]=fa.x,C.f[E+5]=fa.y,C.f[E+6]=fa.a,C.f[E+7]=fa.j,C.f[E+8]=ga.x,C.f[E+9]=ga.y,C.f[E+10]=ga.a,C.f[E+11]=ga.j,C.f[E+12]=xa.x,C.f[E+13]=xa.y,C.f[E+14]=xa.a,C.f[E+15]=xa.j,E+=16}else if("faces"===
C.vb){K=0;for(ba=ua.length;K<ba;K++)ga=fa=ea=mb=C.value[ua[K]],C.f[E]=ea.x,C.f[E+1]=ea.y,C.f[E+2]=ea.a,C.f[E+3]=ea.j,C.f[E+4]=fa.x,C.f[E+5]=fa.y,C.f[E+6]=fa.a,C.f[E+7]=fa.j,C.f[E+8]=ga.x,C.f[E+9]=ga.y,C.f[E+10]=ga.a,C.f[E+11]=ga.j,E+=12;K=0;for(ba=va.length;K<ba;K++)xa=ga=fa=ea=mb=C.value[va[K]],C.f[E]=ea.x,C.f[E+1]=ea.y,C.f[E+2]=ea.a,C.f[E+3]=ea.j,C.f[E+4]=fa.x,C.f[E+5]=fa.y,C.f[E+6]=fa.a,C.f[E+7]=fa.j,C.f[E+8]=ga.x,C.f[E+9]=ga.y,C.f[E+10]=ga.a,C.f[E+11]=ga.j,C.f[E+12]=xa.x,C.f[E+13]=xa.y,C.f[E+
14]=xa.a,C.f[E+15]=xa.j,E+=16}k.bindBuffer(k.ARRAY_BUFFER,C.buffer);k.bufferData(k.ARRAY_BUFFER,C.f,lb)}}Re&&(delete oa.Io,delete oa.de,delete oa.No,delete oa.So,delete oa.Uo,delete oa.To,delete oa.Ho,delete oa.ee,delete oa.Jo,delete oa.Po,delete oa.Qo,delete oa.Oo,delete oa.Ro)}}ra.Cb=v;ra.Ym=v;ra.wj=v;ra.Ak=v;ra.Tj=v;ra.Fb=v;ra.Un=v;hb.attributes&&p(hb)}else if(Ab instanceof A.Jc){if(ra.Cb||ra.Fb){var rc=ra,qe=k.DYNAMIC_DRAW,ad=d,bd=d,vd=d,sc=d,wd=d,re=rc.g,se=rc.wb,Xe=re.length,Ye=se.length,xd=
rc.ee,yd=rc.de,Ze=rc.Fb;if(rc.Cb){for(ad=0;ad<Xe;ad++)vd=re[ad],sc=3*ad,xd[sc]=vd.x,xd[sc+1]=vd.y,xd[sc+2]=vd.a;k.bindBuffer(k.ARRAY_BUFFER,rc.Sa);k.bufferData(k.ARRAY_BUFFER,xd,qe)}if(Ze){for(bd=0;bd<Ye;bd++)wd=se[bd],sc=3*bd,yd[sc]=wd.h,yd[sc+1]=wd.i,yd[sc+2]=wd.b;k.bindBuffer(k.ARRAY_BUFFER,rc.vc);k.bufferData(k.ARRAY_BUFFER,yd,qe)}}ra.Cb=v;ra.Fb=v}else if(Ab instanceof A.Xa){hb=c(Ab,ub);Hc=hb.attributes&&q(hb);if(ra.Cb||ra.Fb||Hc){var $b=ra,Sd=k.DYNAMIC_DRAW,cd=d,dd=d,zd=d,Ha=d,Ad=d,te=$b.g,ue=
$b.wb,$e=te.length,af=ue.length,Bd=$b.ee,Cd=$b.de,bf=$b.Fb,Td=$b.Yb,Dd=d,ve=d,Ua=d,Nc=d,ib=d,Aa=d;if($b.Cb){for(cd=0;cd<$e;cd++)zd=te[cd],Ha=3*cd,Bd[Ha]=zd.x,Bd[Ha+1]=zd.y,Bd[Ha+2]=zd.a;k.bindBuffer(k.ARRAY_BUFFER,$b.Sa);k.bufferData(k.ARRAY_BUFFER,Bd,Sd)}if(bf){for(dd=0;dd<af;dd++)Ad=ue[dd],Ha=3*dd,Cd[Ha]=Ad.h,Cd[Ha+1]=Ad.i,Cd[Ha+2]=Ad.b;k.bindBuffer(k.ARRAY_BUFFER,$b.vc);k.bufferData(k.ARRAY_BUFFER,Cd,Sd)}if(Td){Dd=0;for(ve=Td.length;Dd<ve;Dd++)if(Aa=Td[Dd],Aa.Aa&&(Aa.vb===d||"vertices"===Aa.vb)){Ha=
0;Nc=Aa.value.length;if(1===Aa.size)for(Ua=0;Ua<Nc;Ua++)Aa.f[Ua]=Aa.value[Ua];else if(2===Aa.size)for(Ua=0;Ua<Nc;Ua++)ib=Aa.value[Ua],Aa.f[Ha]=ib.x,Aa.f[Ha+1]=ib.y,Ha+=2;else if(3===Aa.size)if("c"===Aa.type)for(Ua=0;Ua<Nc;Ua++)ib=Aa.value[Ua],Aa.f[Ha]=ib.h,Aa.f[Ha+1]=ib.i,Aa.f[Ha+2]=ib.b,Ha+=3;else for(Ua=0;Ua<Nc;Ua++)ib=Aa.value[Ua],Aa.f[Ha]=ib.x,Aa.f[Ha+1]=ib.y,Aa.f[Ha+2]=ib.a,Ha+=3;else if(4===Aa.size)for(Ua=0;Ua<Nc;Ua++)ib=Aa.value[Ua],Aa.f[Ha]=ib.x,Aa.f[Ha+1]=ib.y,Aa.f[Ha+2]=ib.a,Aa.f[Ha+3]=
ib.j,Ha+=4;k.bindBuffer(k.ARRAY_BUFFER,Aa.buffer);k.bufferData(k.ARRAY_BUFFER,Aa.f,Sd)}}}ra.Cb=v;ra.Fb=v;hb.attributes&&p(hb)}else Ab instanceof A.gc&&(hb=c(Ab,ub),Hc=hb.attributes&&q(hb),(ra.Cb||ra.Fb||Ab.Ff||Hc)&&h(ra,k.DYNAMIC_DRAW,Ab),ra.Cb=v,ra.Fb=v,hb.attributes&&p(hb))}};this.vu=function(a,b,c,e){var f,g,h;a instanceof A.bd?h="depth":a instanceof A.xd?h="normal":a instanceof A.ua?h="basic":a instanceof A.Db?h="lambert":a instanceof A.tc?h="phong":a instanceof A.Ub?h="basic":a instanceof A.$d&&
(h="particle_basic");if(h){var i=A.Yk[h];a.n=A.Lb.e(i.n);a.B=i.B;a.A=i.A}var j,l,m,o,n;j=o=n=i=0;for(l=b.length;j<l;j++)m=b[j],m.Yj||(m instanceof A.tb&&o++,m instanceof A.dd&&n++,m instanceof A.ce&&i++);n+i+o<=I?(l=o,m=n,o=i):(l=Math.ceil(I*o/(n+o)),o=m=I-l);var p=0,i=0;for(n=b.length;i<n;i++)j=b[i],j.oc&&(j instanceof A.ce&&p++,j instanceof A.tb&&!j.Hn&&p++);var q=50;e!==d&&e instanceof A.be&&(q=e.ib.length);var s;a:{n=a.A;j=a.B;var i=a.n,b=a.attributes,c={map:!!a.map,Ga:!!a.Ga,Qa:!!a.Qa,m:a.m,
N:c,mr:a.N,ki:a.ki,ob:a.ob,fv:q,O:a.O,Ta:a.Ta,xg:this.xg,Mj:this.Mj,Sp:l,Tp:m,Vp:o,Up:p,ai:this.ai&&e.Eg,tk:this.tk,sk:this.sk,rk:this.rk,bg:a.bg,Jh:a.Jh,Cg:a.Cg,ad:a.ad,ha:e&&e.ha},t,e=[];h?e.push(h):(e.push(n),e.push(j));for(t in c)e.push(t),e.push(c[t]);h=e.join();t=0;for(e=da.length;t<e;t++)if(da[t].code===h){s=da[t].Ac;break a}t=k.createProgram();e=["precision "+O+" float;",0<qb?"#define VERTEX_TEXTURES":"",J.Kd?"#define GAMMA_INPUT":"",J.zp?"#define GAMMA_OUTPUT":"",J.jq?"#define PHYSICALLY_BASED_SHADING":
"","#define MAX_DIR_LIGHTS "+c.Sp,"#define MAX_POINT_LIGHTS "+c.Tp,"#define MAX_SPOT_LIGHTS "+c.Vp,"#define MAX_SHADOWS "+c.Up,"#define MAX_BONES "+c.fv,c.map?"#define USE_MAP":"",c.Ga?"#define USE_ENVMAP":"",c.Qa?"#define USE_LIGHTMAP":"",c.m?"#define USE_COLOR":"",c.ob?"#define USE_SKINNING":"",c.O?"#define USE_MORPHTARGETS":"",c.Ta?"#define USE_MORPHNORMALS":"",c.Cg?"#define PHONG_PER_PIXEL":"",c.ad?"#define WRAP_AROUND":"",c.ha?"#define DOUBLE_SIDED":"",c.ai?"#define USE_SHADOWMAP":"",c.tk?"#define SHADOWMAP_SOFT":
"",c.sk?"#define SHADOWMAP_DEBUG":"",c.rk?"#define SHADOWMAP_CASCADE":"",c.ki?"#define USE_SIZEATTENUATION":"","uniform mat4 objectMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinVertexA;\nattribute vec4 skinVertexB;\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n");
l=["precision "+O+" float;","#define MAX_DIR_LIGHTS "+c.Sp,"#define MAX_POINT_LIGHTS "+c.Tp,"#define MAX_SPOT_LIGHTS "+c.Vp,"#define MAX_SHADOWS "+c.Up,c.bg?"#define ALPHATEST "+c.bg:"",J.Kd?"#define GAMMA_INPUT":"",J.zp?"#define GAMMA_OUTPUT":"",J.jq?"#define PHYSICALLY_BASED_SHADING":"",c.mr&&c.N?"#define USE_FOG":"",c.mr&&c.N instanceof A.xi?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.Ga?"#define USE_ENVMAP":"",c.Qa?"#define USE_LIGHTMAP":"",c.m?"#define USE_COLOR":"",c.Jh?"#define METAL":
"",c.Cg?"#define PHONG_PER_PIXEL":"",c.ad?"#define WRAP_AROUND":"",c.ha?"#define DOUBLE_SIDED":"",c.ai?"#define USE_SHADOWMAP":"",c.tk?"#define SHADOWMAP_SOFT":"",c.sk?"#define SHADOWMAP_DEBUG":"",c.rk?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n");k.attachShader(t,z("fragment",l+n));k.attachShader(t,z("vertex",e+j));k.linkProgram(t);k.getProgramParameter(t,k.LINK_STATUS)||console.error("Could not initialise shader\nVALIDATE_STATUS: "+k.getProgramParameter(t,
k.VALIDATE_STATUS)+", gl error ["+k.getError()+"]");t.n={};t.attributes={};var w,e="viewMatrix modelViewMatrix projectionMatrix normalMatrix objectMatrix cameraPosition boneGlobalMatrices morphTargetInfluences".split(" ");for(w in i)e.push(w);w=e;e=0;for(i=w.length;e<i;e++)n=w[e],t.n[n]=k.getUniformLocation(t,n);e="position normal uv uv2 tangent color skinVertexA skinVertexB skinIndex skinWeight".split(" ");for(w=0;w<c.xg;w++)e.push("morphTarget"+w);for(w=0;w<c.Mj;w++)e.push("morphNormal"+w);for(s in b)e.push(s);
s=e;w=0;for(b=s.length;w<b;w++)c=s[w],t.attributes[c]=k.getAttribLocation(t,c);t.id=da.length;da.push({Ac:t,code:h});J.info.memory.Xv=da.length;s=t}a.Ac=s;s=a.Ac.attributes;0<=s.position&&k.enableVertexAttribArray(s.position);0<=s.color&&k.enableVertexAttribArray(s.color);0<=s.R&&k.enableVertexAttribArray(s.R);0<=s.Tn&&k.enableVertexAttribArray(s.Tn);a.ob&&0<=s.Jn&&0<=s.Kn&&0<=s.In&&0<=s.Mn&&(k.enableVertexAttribArray(s.Jn),k.enableVertexAttribArray(s.Kn),k.enableVertexAttribArray(s.In),k.enableVertexAttribArray(s.Mn));
if(a.attributes)for(g in a.attributes)s[g]!==d&&0<=s[g]&&k.enableVertexAttribArray(s[g]);if(a.O){a.en=0;t="morphTarget";for(g=0;g<this.xg;g++)w=t+g,0<=s[w]&&(k.enableVertexAttribArray(s[w]),a.en++)}if(a.Ta){a.xv=0;t="morphNormal";for(g=0;g<this.Mj;g++)w=t+g,0<=s[w]&&(k.enableVertexAttribArray(s[w]),a.xv++)}a.kr=[];for(f in a.n)a.kr.push([a.n[f],f])};this.XA=function(a,b){a?(!b||"ccw"===b?k.frontFace(k.CCW):k.frontFace(k.CW),"back"===a?k.cullFace(k.BACK):"front"===a?k.cullFace(k.FRONT):k.cullFace(k.FRONT_AND_BACK),
k.enable(k.CULL_FACE)):k.disable(k.CULL_FACE)};this.Cn=function(a){ia!==a.ha&&(a.ha?k.disable(k.CULL_FACE):k.enable(k.CULL_FACE),ia=a.ha);ca!==a.md&&(a.md?k.frontFace(k.CW):k.frontFace(k.CCW),ca=a.md)};this.Lg=function(a){za!==a&&(a?k.enable(k.DEPTH_TEST):k.disable(k.DEPTH_TEST),za=a)};this.lk=function(a){ab!==a&&(k.depthMask(a),ab=a)};this.Kg=function(a,b,c,e){if(a!==Y){switch(a){case A.Zr:k.disable(k.BLEND);break;case A.Jb:k.enable(k.BLEND);k.blendEquation(k.FUNC_ADD);k.blendFunc(k.SRC_ALPHA,k.ONE);
break;case A.ss:k.enable(k.BLEND);k.blendEquation(k.FUNC_ADD);k.blendFunc(k.ZERO,k.ONE_MINUS_SRC_COLOR);break;case A.Yr:k.enable(k.BLEND);k.blendEquation(k.FUNC_ADD);k.blendFunc(k.ZERO,k.SRC_COLOR);break;case A.oo:k.enable(k.BLEND);break;default:k.enable(k.BLEND),k.blendEquationSeparate(k.FUNC_ADD,k.FUNC_ADD),k.blendFuncSeparate(k.SRC_ALPHA,k.ONE_MINUS_SRC_ALPHA,k.ONE,k.ONE_MINUS_SRC_ALPHA)}Y=a}if(a===A.oo){if(b!==V&&(k.blendEquation(M(b)),V=b),c!==aa||e!==ka)k.blendFunc(M(c),M(e)),aa=c,ka=e}else ka=
aa=V=u};this.pk=function(a,b){if(a.Aa){a.af||(a.af=r,a.lc=k.createTexture(),J.info.memory.Zc++);k.activeTexture(k.TEXTURE0+b);k.bindTexture(k.TEXTURE_2D,a.lc);k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.Wv);var c=a.ea,e=0===(c.width&c.width-1)&&0===(c.height&c.height-1),f=M(a.Ob),g=M(a.type);y(k.TEXTURE_2D,a,e);a instanceof A.Re?k.texImage2D(k.TEXTURE_2D,0,f,c.width,c.height,0,f,g,c.data):k.texImage2D(k.TEXTURE_2D,0,f,f,g,a.ea);a.mf&&e&&k.generateMipmap(k.TEXTURE_2D);a.Aa=v;a.Xj&&a.Xj()}else k.activeTexture(k.TEXTURE0+
b),k.bindTexture(k.TEXTURE_2D,a.lc)};this.ok=function(a){var b=a instanceof A.zd;if(a&&!a.Ad){a.oe===d&&(a.oe=r);a.sd===d&&(a.sd=r);a.lc=k.createTexture();var c=0===(a.width&a.width-1)&&0===(a.height&a.height-1),e=M(a.Ob),f=M(a.type);if(b){a.Ad=[];a.$f=[];k.bindTexture(k.TEXTURE_CUBE_MAP,a.lc);y(k.TEXTURE_CUBE_MAP,a,c);for(var g=0;6>g;g++){a.Ad[g]=k.createFramebuffer();a.$f[g]=k.createRenderbuffer();k.texImage2D(k.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,e,a.width,a.height,0,e,f,u);var h=a,i=k.TEXTURE_CUBE_MAP_POSITIVE_X+
g;k.bindFramebuffer(k.FRAMEBUFFER,a.Ad[g]);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,i,h.lc,0);x(a.$f[g],a)}c&&k.generateMipmap(k.TEXTURE_CUBE_MAP)}else a.Ad=k.createFramebuffer(),a.$f=k.createRenderbuffer(),k.bindTexture(k.TEXTURE_2D,a.lc),y(k.TEXTURE_2D,a,c),k.texImage2D(k.TEXTURE_2D,0,e,a.width,a.height,0,e,f,u),e=k.TEXTURE_2D,k.bindFramebuffer(k.FRAMEBUFFER,a.Ad),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,e,a.lc,0),x(a.$f,a),c&&k.generateMipmap(k.TEXTURE_2D);b?k.bindTexture(k.TEXTURE_CUBE_MAP,
u):k.bindTexture(k.TEXTURE_2D,u);k.bindRenderbuffer(k.RENDERBUFFER,u);k.bindFramebuffer(k.FRAMEBUFFER,u)}a?(b=b?a.Ad[a.bf]:a.Ad,c=a.width,a=a.height,f=e=0):(b=u,c=dc,a=ub,e=cc,f=Db);b!==ja&&(k.bindFramebuffer(k.FRAMEBUFFER,b),k.viewport(e,f,c,a),ja=b);Vb=c;uc=a};this.Kq=new A.Zk;this.Vs(this.Kq);this.$o(new A.os);this.$o(new A.Sr)};
A.fd=function(a,b,c){this.width=a;this.height=b;c=c||{};this.dc=c.dc!==d?c.dc:A.Tg;this.ec=c.ec!==d?c.ec:A.Tg;this.yb=c.yb!==d?c.yb:A.Vb;this.eb=c.eb!==d?c.eb:A.Lk;this.offset=new A.r(0,0);this.repeat=new A.r(1,1);this.Ob=c.Ob!==d?c.Ob:A.Zg;this.type=c.type!==d?c.type:A.el;this.oe=c.oe!==d?c.oe:r;this.sd=c.sd!==d?c.sd:r;this.mf=r};
A.fd.prototype.e=function(){var a=new A.fd(this.width,this.height);return a.dc=this.dc,a.ec=this.ec,a.yb=this.yb,a.eb=this.eb,a.offset.copy(this.offset),a.repeat.copy(this.repeat),a.Ob=this.Ob,a.type=this.type,a.oe=this.oe,a.sd=this.sd,a};A.zd=function(a,b,c){A.fd.call(this,a,b,c);this.bf=0};A.zd.prototype=new A.fd;A.zd.prototype.constructor=A.zd;A.ic=function(){this.zc=new A.d;this.c=new A.$a;this.visible=r};A.ic.prototype.copy=function(a){this.zc.copy(a.zc);this.c.copy(a.c)};
A.Tk=function(){this.aa=new A.ic;this.ba=new A.ic;this.pb=new A.ic;this.me=new A.d;this.dj=new A.d;this.Va=new A.d;this.cc=[new A.d,new A.d,new A.d];this.yj=this.F=u;this.Kf=[[]];this.a=u};A.Uk=function(){this.aa=new A.ic;this.ba=new A.ic;this.pb=new A.ic;this.Bk=new A.ic;this.me=new A.d;this.dj=new A.d;this.Va=new A.d;this.cc=[new A.d,new A.d,new A.d,new A.d];this.yj=this.F=u;this.Kf=[[]];this.a=u};A.is=function(){this.a=this.object=u};
A.Hi=function(){this.rotation=this.a=this.y=this.x=u;this.scale=new A.r;this.F=u};A.Vk=function(){this.a=u;this.aa=new A.ic;this.ba=new A.ic;this.F=u};
A.Hk={Xx:function(a,b,c,e){var f=A.Hk.Fs;A.Hk.lw(a,f);f.of=A.wd.qh(f.of+b,0,1);f.Xh=A.wd.qh(f.Xh+c,0,1);f.Z=A.wd.qh(f.Z+e,0,1);var b=f.of,c=f.Xh,f=f.Z,h,g;if(0===f)a.h=a.i=a.b=0;else switch(e=Math.floor(6*b),h=6*b-e,b=f*(1-c),g=f*(1-c*h),c=f*(1-c*(1-h)),e){case 1:a.h=g;a.i=f;a.b=b;break;case 2:a.h=b;a.i=f;a.b=c;break;case 3:a.h=b;a.i=g;a.b=f;break;case 4:a.h=c;a.i=b;a.b=f;break;case 5:a.h=f;a.i=b;a.b=g;break;case 6:case 0:a.h=f,a.i=c,a.b=b}},lw:function(a,b){var c=a.h,e=a.i,f=a.b,h=Math.max(Math.max(c,
e),f),g=Math.min(Math.min(c,e),f);if(g===h)g=c=0;else{var i=h-g,g=i/h,c=(c===h?(e-f)/i:e===h?2+(f-c)/i:4+(c-e)/i)/6;0>c&&(c+=1);1<c&&(c-=1)}return b===d&&(b={of:0,Xh:0,Z:0}),b.of=c,b.Xh=g,b.Z=h,b}};A.Hk.Fs={of:0,Xh:0,Z:0};
A.ka={mb:function(a,b){for(var c,e,f=a.g.length,h=b instanceof A.C?b.s:b,g=a.g,i=h.g,j=a.l,l=h.l,m=a.H[0],q=h.H[0],p={},s=0;s<a.T.length;s++)p[a.T[s].id]=s;b instanceof A.C&&(b.Pb&&b.td(),c=b.u,e=new A.M,gd(e,c));for(var s=0,o=i.length;s<o;s++){var n=i[s].e();c&&c.V(n);g.push(n)}s=0;for(o=l.length;s<o;s++){var g=l[s],t,w,z=g.z,y=g.m;g instanceof A.ga?t=new A.ga(g.o+f,g.b+f,g.w+f):g instanceof A.la&&(t=new A.la(g.o+f,g.b+f,g.w+f,g.da+f));t.R.copy(g.R);e&&e.V(t.R);i=0;for(n=z.length;i<n;i++)w=z[i].e(),
e&&e.V(w),t.z.push(w);t.color.copy(g.color);i=0;for(n=y.length;i<n;i++)w=y[i],t.m.push(w.e());g.pa!==d&&(i=h.T[g.pa],n=i.id,y=p[n],y===d&&(y=a.T.length,p[n]=y,a.T.push(i)),t.pa=y);t.xa.copy(g.xa);c&&c.V(t.xa);j.push(t)}s=0;for(o=q.length;s<o;s++){c=q[s];e=[];i=0;for(n=c.length;i<n;i++)e.push(new A.J(c[i].ia,c[i].Z));m.push(e)}},e:function(a){var b=new A.Q,c,e=a.g,f=a.l,h=a.H[0];a.T&&(b.T=a.T.slice());a=0;for(c=e.length;a<c;a++)b.g.push(e[a].e());a=0;for(c=f.length;a<c;a++)b.l.push(f[a].e());a=0;for(c=
h.length;a<c;a++){for(var e=h[a],f=[],g=0,i=e.length;g<i;g++)f.push(new A.J(e[g].ia,e[g].Z));b.H[0].push(f)}return b},qn:function(a,b,c){var e,f,h,g=new A.d,i=A.ka.Xb;return e=A.ka.random(),f=A.ka.random(),1<e+f&&(e=1-e,f=1-f),h=1-e-f,g.copy(a),g.X(e),i.copy(b),i.X(f),g.L(i),i.copy(c),i.X(h),g.L(i),g},ew:function(a,b,c){var e,f,h;if(a instanceof A.ga)return e=b.g[a.o],f=b.g[a.b],h=b.g[a.w],A.ka.qn(e,f,h);if(a instanceof A.la){e=b.g[a.o];f=b.g[a.b];h=b.g[a.w];var b=b.g[a.da],g;return c?a.Ri&&a.Si?
(c=a.Ri,g=a.Si):(c=A.ka.If(e,f,b),g=A.ka.If(f,h,b),a.Ri=c,a.Si=g):(c=A.ka.If(e,f,b),g=A.ka.If(f,h,b)),A.ka.random()*(c+g)<c?A.ka.qn(e,f,b):A.ka.qn(f,h,b)}},KA:function(a,b){function c(a){function b(c,e){if(e<c)return c;var f=c+Math.floor((e-c)/2);return l[f]>a?b(c,f-1):l[f]<a?b(f+1,e):f}return b(0,l.length-1)}var e,f,h=a.l,g=a.g,i=h.length,j=0,l=[],m,q,p,s;for(f=0;f<i;f++)e=h[f],e instanceof A.ga?(m=g[e.o],q=g[e.b],p=g[e.w],e.Xo=A.ka.If(m,q,p)):e instanceof A.la&&(m=g[e.o],q=g[e.b],p=g[e.w],s=g[e.da],
e.Ri=A.ka.If(m,q,s),e.Si=A.ka.If(q,p,s),e.Xo=e.Ri+e.Si),j+=e.Xo,l[f]=j;e=[];for(f=0;f<b;f++)g=A.ka.random()*j,g=c(g),e[f]=A.ka.ew(h[g],a,r);return e},If:function(a,b,c){var e,f=A.ka.Xb;return f.sub(a,b),e=f.length(),f.sub(a,c),a=f.length(),f.sub(b,c),c=f.length(),b=0.5*(e+a+c),Math.sqrt(b*(b-e)*(b-a)*(b-c))},Ll:function(a){a.Pl();var b=a.kd,c=new A.d;return c.add(b.min,b.max),c.X(-0.5),a.ih(ld(new A.M,c.x,c.y,c.a)),a.Pl(),c},rA:function(a){for(var a=a.H[0],b=0,c=a.length;b<c;b++)for(var e=a[b],f=
0,h=e.length;f<h;f++)1!==e[f].ia&&(e[f].ia-=Math.floor(e[f].ia)),1!==e[f].Z&&(e[f].Z-=Math.floor(e[f].Z))},IB:function(a){var b,c,e,f,h=[],g=[],i=[];b=0;for(c=a.Oc.length;b<c;b++)g[b]=[];b=0;for(c=a.H.length;b<c;b++)i[b]=[];b=0;for(c=a.l.length;b<c;b++)if(e=a.l[b],e instanceof A.la){f=e.o;var j=e.b,l=e.w,m=e.da,q=new A.ga,p=new A.ga;q.color.copy(e.color);p.color.copy(e.color);q.pa=e.pa;p.pa=e.pa;q.o=f;q.b=j;q.w=m;p.o=j;p.b=l;p.w=m;4===e.m.length&&(q.m[0]=e.m[0].e(),q.m[1]=e.m[1].e(),q.m[2]=e.m[3].e(),
p.m[0]=e.m[1].e(),p.m[1]=e.m[2].e(),p.m[2]=e.m[3].e());h.push(q,p);e=0;for(f=a.H.length;e<f;e++)a.H[e].length&&(q=a.H[e][b],j=q[1],l=q[2],m=q[3],q=[q[0].e(),j.e(),m.e()],j=[j.e(),l.e(),m.e()],i[e].push(q,j));e=0;for(f=a.Oc.length;e<f;e++)a.Oc[e].length&&(j=a.Oc[e][b],g[e].push(j,j))}else{h.push(e);e=0;for(f=a.Oc.length;e<f;e++)g[e].push(a.Oc[e]);e=0;for(f=a.H.length;e<f;e++)i[e].push(a.H[e])}a.l=h;a.Oc=g;a.H=i;Yd(a);Xd(a);Wd(a);a.Fj&&Vd(a)},Yy:function(a){for(var b=[],c=0,e=a.l.length;c<e;c++){var f=
b.length,h=a.l[c];if(h instanceof A.la){var g=h.o,i=h.b,j=h.w,g=a.g[g],i=a.g[i],j=a.g[j],l=a.g[h.da];b.push(g.e());b.push(i.e());b.push(j.e());b.push(l.e());h.o=f;h.b=f+1;h.w=f+2;h.da=f+3}else g=h.o,i=h.b,j=h.w,g=a.g[g],i=a.g[i],j=a.g[j],b.push(g.e()),b.push(i.e()),b.push(j.e()),h.o=f,h.b=f+1,h.w=f+2}a.g=b;delete a.gl},AB:function(a,b){var c,e,f,h,g,i,j,l,m,q,p,s,o,n,t,w,z,y,x,F=[],M=[];c=0;for(e=a.H.length;c<e;c++)M[c]=[];c=0;for(e=a.l.length;c<e;c++)if(f=a.l[c],f instanceof A.ga)if(h=f.o,g=f.b,
i=f.w,l=a.g[h],m=a.g[g],q=a.g[i],s=l.Gb(m),o=m.Gb(q),p=l.Gb(q),s>b||o>b||p>b){j=a.g.length;y=f.e();x=f.e();s>=o&&s>=p?(l=l.e(),l.fa(m,0.5),y.o=h,y.b=j,y.w=i,x.o=j,x.b=g,x.w=i,3===f.z.length&&(h=f.z[0].e(),h.fa(f.z[1],0.5),y.z[1].copy(h),x.z[0].copy(h)),3===f.m.length&&(h=f.m[0].e(),h.fa(f.m[1],0.5),y.m[1].copy(h),x.m[0].copy(h)),f=0):o>=s&&o>=p?(l=m.e(),l.fa(q,0.5),y.o=h,y.b=g,y.w=j,x.o=j,x.b=i,x.w=h,3===f.z.length&&(h=f.z[1].e(),h.fa(f.z[2],0.5),y.z[2].copy(h),x.z[0].copy(h),x.z[1].copy(f.z[2]),
x.z[2].copy(f.z[0])),3===f.m.length&&(h=f.m[1].e(),h.fa(f.m[2],0.5),y.m[2].copy(h),x.m[0].copy(h),x.m[1].copy(f.m[2]),x.m[2].copy(f.m[0])),f=1):(l=l.e(),l.fa(q,0.5),y.o=h,y.b=g,y.w=j,x.o=j,x.b=g,x.w=i,3===f.z.length&&(h=f.z[0].e(),h.fa(f.z[2],0.5),y.z[2].copy(h),x.z[0].copy(h)),3===f.m.length&&(h=f.m[0].e(),h.fa(f.m[2],0.5),y.m[2].copy(h),x.m[0].copy(h)),f=2);F.push(y,x);a.g.push(l);h=0;for(g=a.H.length;h<g;h++)a.H[h].length&&(l=a.H[h][c],x=l[0],i=l[1],y=l[2],0===f?(m=x.e(),m.fa(i,0.5),l=[x.e(),m.e(),
y.e()],i=[m.e(),i.e(),y.e()]):1===f?(m=i.e(),m.fa(y,0.5),l=[x.e(),i.e(),m.e()],i=[m.e(),y.e(),x.e()]):(m=x.e(),m.fa(y,0.5),l=[x.e(),i.e(),m.e()],i=[m.e(),i.e(),y.e()]),M[h].push(l,i))}else{F.push(f);h=0;for(g=a.H.length;h<g;h++)M[h].push(a.H[h][c])}else if(h=f.o,g=f.b,i=f.w,j=f.da,l=a.g[h],m=a.g[g],q=a.g[i],p=a.g[j],s=l.Gb(m),o=m.Gb(q),n=q.Gb(p),t=l.Gb(p),s>b||o>b||n>b||t>b){w=a.g.length;z=a.g.length+1;y=f.e();x=f.e();s>=o&&s>=n&&s>=t||n>=o&&n>=s&&n>=t?(s=l.e(),s.fa(m,0.5),m=q.e(),m.fa(p,0.5),y.o=
h,y.b=w,y.w=z,y.da=j,x.o=w,x.b=g,x.w=i,x.da=z,4===f.z.length&&(h=f.z[0].e(),h.fa(f.z[1],0.5),g=f.z[2].e(),g.fa(f.z[3],0.5),y.z[1].copy(h),y.z[2].copy(g),x.z[0].copy(h),x.z[3].copy(g)),4===f.m.length&&(h=f.m[0].e(),h.fa(f.m[1],0.5),g=f.m[2].e(),g.fa(f.m[3],0.5),y.m[1].copy(h),y.m[2].copy(g),x.m[0].copy(h),x.m[3].copy(g)),f=0):(s=m.e(),s.fa(q,0.5),m=p.e(),m.fa(l,0.5),y.o=h,y.b=g,y.w=w,y.da=z,x.o=z,x.b=w,x.w=i,x.da=j,4===f.z.length&&(h=f.z[1].e(),h.fa(f.z[2],0.5),g=f.z[3].e(),g.fa(f.z[0],0.5),y.z[2].copy(h),
y.z[3].copy(g),x.z[0].copy(g),x.z[1].copy(h)),4===f.m.length&&(h=f.m[1].e(),h.fa(f.m[2],0.5),g=f.m[3].e(),g.fa(f.m[0],0.5),y.m[2].copy(h),y.m[3].copy(g),x.m[0].copy(g),x.m[1].copy(h)),f=1);F.push(y,x);a.g.push(s,m);h=0;for(g=a.H.length;h<g;h++)a.H[h].length&&(l=a.H[h][c],x=l[0],i=l[1],y=l[2],l=l[3],0===f?(m=x.e(),m.fa(i,0.5),q=y.e(),q.fa(l,0.5),x=[x.e(),m.e(),q.e(),l.e()],i=[m.e(),i.e(),y.e(),q.e()]):(m=i.e(),m.fa(y,0.5),q=l.e(),q.fa(x,0.5),x=[x.e(),i.e(),m.e(),q.e()],i=[q.e(),m.e(),y.e(),l.e()]),
M[h].push(x,i))}else{F.push(f);h=0;for(g=a.H.length;h<g;h++)M[h].push(a.H[h][c])}a.l=F;a.H=M}};A.ka.random=A.wd.cw;A.ka.Xb=new A.d;
A.vd={crossOrigin:"anonymous",ue:function(a,b,c){var e=new Image,f=new A.uc(e,b);return e.onload=function(){f.Aa=r;c&&c(this)},e.crossOrigin=this.crossOrigin,e.src=a,f},Ru:function(a,b,c){var e,f=[],h=new A.uc(f,b),b=f.Mm=0;for(e=a.length;b<e;++b)f[b]=new Image,f[b].onload=function(){f.Mm+=1;6===f.Mm&&(h.Aa=r);c&&c(this)},f[b].crossOrigin=this.crossOrigin,f[b].src=a[b];return h},lz:function(a,b){var b=b|1,c=a.width,e=a.height,f=document.createElement("canvas");f.width=c;f.height=e;var h=f.getContext("2d");
h.drawImage(a,0,0);for(var g=h.getImageData(0,0,c,e).data,i=h.createImageData(c,e),j=i.data,l=0;l<c;l++)for(var m=0;m<e;m++){var q=0>m-1?0:m-1,p=m+1>e-1?e-1:m+1,s=0>l-1?0:l-1,o=l+1>c-1?c-1:l+1,n=[],t=[0,0,g[4*(m*c+l)]/255*b];n.push([-1,0,g[4*(m*c+s)]/255*b]);n.push([-1,-1,g[4*(q*c+s)]/255*b]);n.push([0,-1,g[4*(q*c+l)]/255*b]);n.push([1,-1,g[4*(q*c+o)]/255*b]);n.push([1,0,g[4*(m*c+o)]/255*b]);n.push([1,1,g[4*(p*c+o)]/255*b]);n.push([0,1,g[4*(p*c+l)]/255*b]);n.push([-1,1,g[4*(p*c+s)]/255*b]);q=[];s=
n.length;for(p=0;p<s;p++){var o=n[p],w=n[(p+1)%s],o=[o[0]-t[0],o[1]-t[1],o[2]-t[2]],w=[w[0]-t[0],w[1]-t[1],w[2]-t[2]],o=[o[1]*w[2]-o[2]*w[1],o[2]*w[0]-o[0]*w[2],o[0]*w[1]-o[1]*w[0]],w=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);q.push([o[0]/w,o[1]/w,o[2]/w])}n=[0,0,0];for(p=0;p<q.length;p++)n[0]+=q[p][0],n[1]+=q[p][1],n[2]+=q[p][2];n[0]/=q.length;n[1]/=q.length;n[2]/=q.length;t=4*(m*c+l);j[t]=255*((n[0]+1)/2)|0;j[t+1]=255*(n[1]+0.5)|0;j[t+2]=255*n[2]|0;j[t+3]=255}return h.putImageData(i,0,0),f},jz:function(a,
b,c){for(var e=a*b,f=new Uint8Array(3*e),h=Math.floor(255*c.h),g=Math.floor(255*c.i),c=Math.floor(255*c.b),i=0;i<e;i++)f[3*i]=h,f[3*i+1]=g,f[3*i+2]=c;return a=new A.Re(f,a,b,A.$g),a.Aa=r,a}};
A.Xk={dB:function(a,b){A.Xk.br(a,function(a){a.visible=b})},br:function(a,b){var c,e,f=a.children.length;for(e=0;e<f;e++)c=a.children[e],b(c),A.Xk.br(c,b)},Iy:function(a,b){var c,e=b.length,f=new A.D;for(c=0;c<e;c++){var h=new A.C(a,b[c]);f.add(h)}return f},xt:function(a){var b;a instanceof A.Xg?(b=new A.Xg(a.s,a.F),b.duration=a.duration,b.Nj=a.Nj,b.time=a.time,b.Mp=a.Mp,b.kp=a.kp,b.direction=a.direction,b.kg=a.kg):a instanceof A.be?b=new A.be(a.s,a.F):a instanceof A.C?b=new A.C(a.s,a.F):a instanceof
A.Xa?b=new A.Xa(a.s,a.F,a.type):a instanceof A.Jc?b=new A.Jc(a.s,a.F):a instanceof A.gc?(b=new A.gc(a.s,a.F),b.Ff=a.Ff):a instanceof A.Zd?b=new A.Zd(a.F):a instanceof A.yd?(b=new A.yd({}),b.color.copy(a.color),b.map=a.map,b.wa=a.wa,b.$c=a.$c,b.yg=a.yg,b.ge=a.ge,b.Yh=a.Yh,b.he=a.he,b.gk.copy(a.gk),b.rotation=a.rotation,b.opacity=a.opacity,b.Pg.copy(a.Pg),b.Qg.copy(a.Qg)):a instanceof A.Ue?b=new A.Ue:a instanceof A.D&&(b=new A.D);b.name=a.name;b.parent=a.parent;b.Ra.copy(a.Ra);b.position.copy(a.position);
b.rotation instanceof A.d&&b.rotation.copy(a.rotation);b.lm=a.lm;b.scale.copy(a.scale);b.uj=a.uj;b.ha=a.ha;b.md=a.md;b.bk=a.bk;b.hk=a.hk;b.u.copy(a.u);b.G.copy(a.G);b.Ih.copy(a.Ih);b.Pb=a.Pb;b.Oa=a.Oa;b.Vc.copy(a.Vc);b.Vd=a.Vd;b.bj=a.bj;b.cj=a.cj;b.visible=a.visible;b.oc=a.oc;b.Eg=a.Eg;b.lf=a.lf;for(var c=0;c<a.children.length;c++){var e=A.Xk.xt(a.children[c]);b.children[c]=e;e.parent=b}if(a instanceof A.Ue)for(c=0;c<a.Gc.length;c++)b.Gc[c]={ur:a.Gc[c].ur,Vj:b.children[c]};return b},detach:function(a,
b,c){a.ih(b.G);b.remove(a);c.add(a)},cy:function(a,b,c){var e=new A.M;e.Pc(c.G);a.ih(e);b.remove(a);c.add(a)}};
A.Fo&&(A.Co={Np:{hz:{n:{Uz:{type:"f",value:1.02},Rz:{type:"f",value:0.1},Sz:{type:"f",value:2},Tz:{type:"f",value:1},Pq:{type:"t",value:1,t:u}},A:"uniform samplerCube tCube;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\nvec4 refractedColor = vec4( 1.0, 1.0, 1.0, 1.0 );\nrefractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;\nrefractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;\nrefractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;\nrefractedColor.a = 1.0;\ngl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\n}",B:"uniform float mRefractionRatio;\nuniform float mFresnelBias;\nuniform float mFresnelScale;\nuniform float mFresnelPower;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvec3 nWorld = normalize ( mat3( objectMatrix[0].xyz, objectMatrix[1].xyz, objectMatrix[2].xyz ) * normal );\nvec3 I = mPosition.xyz - cameraPosition;\nvReflect = reflect( I, nWorld );\nvRefract[0] = refract( normalize( I ), nWorld, mRefractionRatio );\nvRefract[1] = refract( normalize( I ), nWorld, mRefractionRatio * 0.99 );\nvRefract[2] = refract( normalize( I ), nWorld, mRefractionRatio * 0.98 );\nvReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), nWorld ), mFresnelPower );\ngl_Position = projectionMatrix * mvPosition;\n}"},
R:{n:A.Lb.mb([A.Eb.N,A.Eb.lb,A.Eb.ei,{pp:{type:"i",value:0},qp:{type:"i",value:0},rp:{type:"i",value:0},Vy:{type:"i",value:0},Ba:{type:"t",value:0,t:u},Pq:{type:"t",value:1,t:u},Rq:{type:"t",value:2,t:u},Sq:{type:"t",value:3,t:u},Oq:{type:"t",value:4,t:u},sB:{type:"t",value:5,t:u},gr:{type:"f",value:1},LB:{type:"f",value:0},MB:{type:"f",value:1},fr:{type:"c",value:new A.v(16777215)},jr:{type:"c",value:new A.v(1118481)},er:{type:"c",value:new A.v(16777215)},ir:{type:"f",value:30},hr:{type:"f",value:1},
OB:{type:"f",value:0.5},NB:{type:"v2",value:new A.r(0,0)},PB:{type:"v2",value:new A.r(1,1)},Me:{type:"v3",value:new A.d(1,1,1)}}]),A:["uniform vec3 uAmbientColor;\nuniform vec3 uDiffuseColor;\nuniform vec3 uSpecularColor;\nuniform float uShininess;\nuniform float uOpacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform float uNormalScale;\nuniform float uReflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;",
A.k.gi,A.k.Bh,"void main() {\ngl_FragColor = vec4( vec3( 1.0 ), uOpacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec3 pointVector = normalize( vPointLight[ i ].xyz );\nfloat pointDistance = vPointLight[ i ].w;\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n#else\npointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor) + totalSpecular;\nif ( enableReflection ) {\nvec3 wPos = cameraPosition - vViewPosition;\nvec3 vReflect = reflect( normalize( wPos ), normal );\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );\n}",
A.k.fi,A.k.Ij,A.k.Ah,"}"].join("\n"),B:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\nvarying vec3 vViewPosition;",
A.k.hi,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvViewPosition = -mvPosition.xyz;\nvNormal = normalMatrix * normal;\nvTangent = normalMatrix * tangent.xyz;\nvBinormal = cross( vNormal, vTangent ) * tangent.w;\nvUv = uv * uRepeat + uOffset;\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#ifdef VERTEX_TEXTURES\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\nvec4 displacedPosition = vec4( normalize( vNormal.xyz ) * df, 0.0 ) + mvPosition;\ngl_Position = projectionMatrix * displacedPosition;\n#else\ngl_Position = projectionMatrix * mvPosition;\n#endif",
A.k.ii,"}"].join("\n")},th:{n:{Pq:{type:"t",value:1,t:u},tB:{type:"f",value:-1}},B:"varying vec3 vViewPosition;\nvoid main() {\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvViewPosition = cameraPosition - mPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vViewPosition;\nvoid main() {\nvec3 wPos = cameraPosition - vViewPosition;\ngl_FragColor = textureCube( tCube, vec3( tFlip * wPos.x, wPos.yz ) );\n}"}}});
A.Qe=function(){this.id=A.so++;this.YB=this.bC=this.$B=this.aC=this.ZB=this.fo=this.Ck=this.ho=this.qr=this.hx=u;this.uj=v;this.nc=this.kd=u;this.O=[]};A.Qe.prototype={constructor:A.Qe,Pl:la(),kj:la()};A.ta=la();Za=A.ta.prototype;Za.La=function(){return console.log("Warning, getPoint() not implemented!"),u};Za.Dh=function(a){return this.La(de(this,a))};Za.qe=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.La(b/a));return c};
Za.Ej=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.Dh(b/a));return c};Za.nf=function(){var a=ee(this);return a[a.length-1]};function ee(a){var b;b||(b=a.Cs?a.Cs:200);if(a.Jl&&a.Jl.length==b+1&&!a.Aa)return a.Jl;a.Aa=v;var c=[],e,f=a.La(0),h,g=0;c.push(0);for(h=1;h<=b;h++)e=a.La(h/b),g+=e.Gb(f),c.push(g),f=e;return a.Jl=c}
function de(a,b,c){for(var a=ee(a),e=0,f=a.length,b=c?c:b*a[f-1],c=0,h=f-1,g;c<=h;)if(e=Math.floor(c+(h-c)/2),g=a[e]-b,0>g)c=e+1;else{if(!(0<g)){h=e;break}h=e-1}return e=h,a[e]==b?e/(f-1):(c=a[e],(e+(b-c)/(a[e+1]-c))/(f-1))}Za.Eh=function(a){var b=a-1E-4,a=a+1E-4;return 0>b&&(b=0),1<a&&(a=1),b=this.La(b),this.La(a).e().Ia(b).normalize()};A.Wd=function(a,b){this.aa=a;this.ba=b};A.Wd.prototype=new A.ta;A.Wd.prototype.constructor=A.Wd;
A.Wd.prototype.La=function(a){var b=this.ba.e().Ia(this.aa);return b.X(a).L(this.aa),b};A.Wd.prototype.Dh=function(a){return this.La(a)};A.Wd.prototype.Eh=function(){return this.ba.e().Ia(this.aa).normalize()};A.Ye=function(a,b,c){this.Bb=a;this.aa=b;this.ba=c};A.Ye.prototype=new A.ta;A.Ye.prototype.constructor=A.Ye;A.Ye.prototype.La=function(a){var b;return b=A.ja.$.Cd(a,this.Bb.x,this.aa.x,this.ba.x),a=A.ja.$.Cd(a,this.Bb.y,this.aa.y,this.ba.y),new A.r(b,a)};
A.Ye.prototype.Eh=function(a){var b;return b=A.ta.$.Uq(a,this.Bb.x,this.aa.x,this.ba.x),a=A.ta.$.Uq(a,this.Bb.y,this.aa.y,this.ba.y),b=new A.r(b,a),b.normalize(),b};A.Qf=function(a,b,c,e){this.Bb=a;this.aa=b;this.ba=c;this.pb=e};A.Qf.prototype=new A.ta;A.Qf.prototype.constructor=A.Qf;A.Qf.prototype.La=function(a){var b;return b=A.ja.$.Dd(a,this.Bb.x,this.aa.x,this.ba.x,this.pb.x),a=A.ja.$.Dd(a,this.Bb.y,this.aa.y,this.ba.y,this.pb.y),new A.r(b,a)};
A.Qf.prototype.Eh=function(a){var b;return b=A.ta.$.Tq(a,this.Bb.x,this.aa.x,this.ba.x,this.pb.x),a=A.ta.$.Tq(a,this.Bb.y,this.aa.y,this.ba.y,this.pb.y),b=new A.r(b,a),b.normalize(),b};A.eh=function(a){this.P=a==d?[]:a};A.eh.prototype=new A.ta;A.eh.prototype.constructor=A.eh;
A.eh.prototype.La=function(a){var b=new A.r,c=[],e=this.P,f;return f=(e.length-1)*a,a=Math.floor(f),f-=a,c[0]=0==a?a:a-1,c[1]=a,c[2]=a>e.length-2?e.length-1:a+1,c[3]=a>e.length-3?e.length-1:a+2,b.x=A.ta.$.Hb(e[c[0]].x,e[c[1]].x,e[c[2]].x,e[c[3]].x,f),b.y=A.ta.$.Hb(e[c[0]].y,e[c[1]].y,e[c[2]].y,e[c[3]].y,f),b};A.Sg=function(a,b,c,e,f,h){this.Qs=a;this.Rs=b;this.Yo=c;this.Zo=e;this.Ps=f;this.Os=h};A.Sg.prototype=new A.ta;A.Sg.prototype.constructor=A.Sg;
A.Sg.prototype.La=function(a){var b=this.Ps-this.Zo;return this.Os||(a=1-a),b=this.Zo+a*b,a=this.Qs+this.Yo*Math.cos(b),b=this.Rs+this.Yo*Math.sin(b),new A.r(a,b)};
A.ta.$={Uq:function(a,b,c,e){return 2*(1-a)*(c-b)+2*a*(e-c)},Tq:function(a,b,c,e,f){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*e*(1-a)-3*a*a*e+3*a*a*f},xB:function(a){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},Hb:function(a,b,c,e,f){var a=0.5*(c-a),e=0.5*(e-b),h=f*f;return(2*b-2*c+a+e)*f*h+(-3*b+3*c-2*a-e)*h+a*f+b}};A.ta.create=function(a,b){return a.prototype=new A.ta,a.prototype.constructor=a,a.prototype.La=b,a};
A.Fx=A.ta.create(function(a,b){this.aa=a;this.ba=b},function(a){var b=new A.d;return b.sub(this.ba,this.aa),b.X(a),b.L(this.aa),b});A.Ix=A.ta.create(function(a,b,c){this.Bb=a;this.aa=b;this.ba=c},function(a){var b,c;return b=A.ja.$.Cd(a,this.Bb.x,this.aa.x,this.ba.x),c=A.ja.$.Cd(a,this.Bb.y,this.aa.y,this.ba.y),a=A.ja.$.Cd(a,this.Bb.a,this.aa.a,this.ba.a),new A.d(b,c,a)});
A.vx=A.ta.create(function(a,b,c,e){this.Bb=a;this.aa=b;this.ba=c;this.pb=e},function(a){var b,c;return b=A.ja.$.Dd(a,this.Bb.x,this.aa.x,this.ba.x,this.pb.x),c=A.ja.$.Dd(a,this.Bb.y,this.aa.y,this.ba.y,this.pb.y),a=A.ja.$.Dd(a,this.Bb.a,this.aa.a,this.ba.a,this.pb.a),new A.d(b,c,a)});
A.Nx=A.ta.create(function(a){this.P=a==d?[]:a},function(a){var b=new A.d,c=[],e=this.P,f,a=(e.length-1)*a;f=Math.floor(a);a-=f;c[0]=0==f?f:f-1;c[1]=f;c[2]=f>e.length-2?e.length-1:f+1;c[3]=f>e.length-3?e.length-1:f+2;f=e[c[0]];var h=e[c[1]],g=e[c[2]],c=e[c[3]];return b.x=A.ta.$.Hb(f.x,h.x,g.x,c.x,a),b.y=A.ta.$.Hb(f.y,h.y,g.y,c.y,a),b.a=A.ta.$.Hb(f.a,h.a,g.a,c.a,a),b});
A.sx=A.ta.create(function(a){this.P=a==d?[]:a},function(a){var b=new A.d,c=[],e=this.P,f;return f=(e.length-0)*a,a=Math.floor(f),f-=a,a+=0<a?0:(Math.floor(Math.abs(a)/e.length)+1)*e.length,c[0]=(a-1)%e.length,c[1]=a%e.length,c[2]=(a+1)%e.length,c[3]=(a+2)%e.length,b.x=A.ta.$.Hb(e[c[0]].x,e[c[1]].x,e[c[2]].x,e[c[3]].x,f),b.y=A.ta.$.Hb(e[c[0]].y,e[c[1]].y,e[c[2]].y,e[c[3]].y,f),b.a=A.ta.$.Hb(e[c[0]].a,e[c[1]].a,e[c[2]].a,e[c[3]].a,f),b});A.Vg=function(){this.ab=[];this.lh=[];this.dy=v};
A.Vg.prototype=new A.ta;Za=A.Vg.prototype;Za.constructor=A.Vg;Za.add=function(a){this.ab.push(a)};Za.closePath=function(){var a=this.ab[0].La(0),b=this.ab[this.ab.length-1].La(1);a.km(b)||this.ab.push(new A.Wd(b,a))};Za.La=function(a){for(var b=a*this.nf(),c=fe(this),a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.ab[a],b=1-b/a.nf(),a.Dh(b);a++}return u};Za.nf=function(){var a=fe(this);return a[a.length-1]};
function fe(a){if(a.Kl&&a.Kl.length==a.ab.length)return a.Kl;var b=[],c=0,e,f=a.ab.length;for(e=0;e<f;e++)c+=a.ab[e].nf(),b.push(c);return a.Kl=b}function ge(a){var a=a.qe(),b,c,e,f;b=c=Number.NEGATIVE_INFINITY;e=f=Number.POSITIVE_INFINITY;var h,g,i,j;j=new A.r;g=0;for(i=a.length;g<i;g++)h=a[g],h.x>b?b=h.x:h.x<e&&(e=h.x),h.y>c?c=h.y:h.y<c&&(f=h.y),j.L(h.x,h.y);return{iA:e,jA:f,Vm:b,hv:c,xa:j.pc(i)}}Za.oj=function(a){for(var b=new A.Q,c=0;c<a.length;c++)b.g.push(new A.d(a[c].x,a[c].y,0));return b};
function he(a,b){var c=a.qe(d),e,f;b||(b=a.lh);e=0;for(f=b.length;e<f;e++)c=ie(a,c,b[e]);return c}function je(a,b){var c=a.Ej(d),e,f;b||(b=a.lh);e=0;for(f=b.length;e<f;e++)c=ie(a,c,b[e]);return c}function ie(a,b,c){var a=ge(a),e,f,h,g,i,j;e=0;for(f=b.length;e<f;e++)h=b[e],g=h.x,i=h.y,j=g/a.Vm,j=de(c,j,g),g=c.La(j),i=(j=c.Eh(j),new A.r(-j.y,j.x)).X(i),h.x=g.x+i.x,h.y=g.y+i.y;return b}
A.Lr=function(){var a={};this.addEventListener=function(b,c){a[b]==d&&(a[b]=[]);-1===a[b].indexOf(c)&&a[b].push(c)};this.dispatchEvent=function(b){for(var c in a[b.type])a[b.type][c](b)};this.removeEventListener=function(b,c){var e=a[b].indexOf(c);-1!==e&&a[b].splice(e,1)}};A.yi=function(){A.D.call(this)};A.yi.prototype=new A.D;Za=A.yi.prototype;Za.constructor=A.yi;
Za.bc=function(a){this.Pb&&this.td();if(this.Oa||a)this.parent?(this.G.multiply(this.parent.G,this.u),md(this.G,this.$q,this.qw,this.Cq),md(this.u,this.Zw,this.Aq,this.tw),this.G.gp(this.$q,this.Aq,this.Cq)):this.G.copy(this.u),this.Oa=v,a=r;for(var b=0,c=this.children.length;b<c;b++)this.children[b].bc(a)};Za.$q=new A.d;Za.Zw=new A.d;Za.qw=new A.Wb;Za.Aq=new A.Wb;Za.Cq=new A.d;Za.tw=new A.d;
A.Hc=function(a){A.Vg.call(this);this.na=[];if(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)}};A.Hc.prototype=new A.Vg;A.Hc.prototype.constructor=A.Hc;A.hc={Mk:"moveTo",to:"lineTo",zo:"quadraticCurveTo",lo:"bezierCurveTo",mo:"splineThru",jo:"arc"};Za=A.Hc.prototype;Za.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.na.push({action:A.hc.Mk,mc:c})};
Za.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),e=this.na[this.na.length-1].mc;this.ab.push(new A.Wd(new A.r(e[e.length-2],e[e.length-1]),new A.r(a,b)));this.na.push({action:A.hc.to,mc:c})};Za.quadraticCurveTo=function(a,b,c,e){var f=Array.prototype.slice.call(arguments),h=this.na[this.na.length-1].mc;this.ab.push(new A.Ye(new A.r(h[h.length-2],h[h.length-1]),new A.r(a,b),new A.r(c,e)));this.na.push({action:A.hc.zo,mc:f})};
Za.bezierCurveTo=function(a,b,c,e,f,h){var g=Array.prototype.slice.call(arguments),i=this.na[this.na.length-1].mc;this.ab.push(new A.Qf(new A.r(i[i.length-2],i[i.length-1]),new A.r(a,b),new A.r(c,e),new A.r(f,h)));this.na.push({action:A.hc.lo,mc:g})};Za.arc=function(a,b,c,e,f,h){var g=Array.prototype.slice.call(arguments),i=this.na[this.na.length-1],i=new A.Sg(i.x+a,i.y+b,c,e,f,h);this.ab.push(i);i=i.La(h?1:0);g.push(i.x);g.push(i.y);this.na.push({action:A.hc.jo,mc:g})};
Za.Ej=function(a){a||(a=40);for(var b=[],c=0;c<a;c++)b.push(this.La(c/a));return b};
Za.qe=function(a,b){if(this.ex)return console.log("tata"),this.Ej(a,b);var a=a||12,c=[],e,f,h,g,i,j,l,m,q,p,s,o,n;e=0;for(f=this.na.length;e<f;e++)switch(h=this.na[e],g=h.action,h=h.mc,g){case A.hc.Mk:c.push(new A.r(h[0],h[1]));break;case A.hc.to:c.push(new A.r(h[0],h[1]));break;case A.hc.zo:i=h[2];j=h[3];q=h[0];p=h[1];0<c.length?(g=c[c.length-1],s=g.x,o=g.y):(g=this.na[e-1].mc,s=g[g.length-2],o=g[g.length-1]);for(h=1;h<=a;h++)n=h/a,g=A.ja.$.Cd(n,s,q,i),n=A.ja.$.Cd(n,o,p,j),c.push(new A.r(g,n));break;
case A.hc.lo:i=h[4];j=h[5];q=h[0];p=h[1];l=h[2];m=h[3];0<c.length?(g=c[c.length-1],s=g.x,o=g.y):(g=this.na[e-1].mc,s=g[g.length-2],o=g[g.length-1]);for(h=1;h<=a;h++)n=h/a,g=A.ja.$.Dd(n,s,q,l,i),n=A.ja.$.Dd(n,o,p,m,j),c.push(new A.r(g,n));break;case A.hc.mo:g=this.na[e-1].mc;n=[new A.r(g[g.length-2],g[g.length-1])];g=a*h[0].length;n=n.concat(h[0]);n=new A.eh(n);for(h=1;h<=g;h++)c.push(n.Dh(h/g));break;case A.hc.jo:i=h[0];j=h[1];l=h[2];q=h[3];p=!!h[5];m=h[4]-q;s=2*a;for(h=1;h<=s;h++)n=h/s,p||(n=1-n),
n=q+n*m,g=i+l*Math.cos(n),n=j+l*Math.sin(n),c.push(new A.r(g,n))}return e=c[c.length-1],1E-10>Math.abs(e.x-c[0].x)&&1E-10>Math.abs(e.y-c[0].y)&&c.splice(c.length-1,1),b&&c.push(c[0]),c};Za.transform=function(a,b){return ge(this),ie(this,this.qe(b),a)};
Za.debug=function(a){var b=ge(this);a||(a=document.createElement("canvas"),a.setAttribute("width",b.Vm+100),a.setAttribute("height",b.hv+100),document.body.appendChild(a));b=a.getContext("2d");b.fillStyle="white";b.fillRect(0,0,a.width,a.height);b.strokeStyle="black";b.beginPath();var c,e,f,a=0;for(c=this.na.length;a<c;a++)e=this.na[a],f=e.mc,e=e.action,e!=A.hc.mo&&b[e].apply(b,f);b.stroke();b.closePath();b.strokeStyle="red";e=this.qe();a=0;for(c=e.length;a<c;a++)f=e[a],b.beginPath(),b.arc(f.x,f.y,
1.5,0,2*Math.PI,v),b.stroke(),b.closePath()};
Za.Wn=function(){var a,b,c,e,f=[],h=new A.Hc;a=0;for(b=this.na.length;a<b;a++)c=this.na[a],e=c.mc,c=c.action,c==A.hc.Mk&&0!=h.na.length&&(f.push(h),h=new A.Hc),h[c].apply(h,e);0!=h.na.length&&f.push(h);if(0==f.length)return[];var g;e=[];a=!A.ja.$.Fh(f[0].qe());if(1==f.length)return h=f[0],g=new A.ja,g.na=h.na,g.ab=h.ab,e.push(g),e;if(a){g=new A.ja;a=0;for(b=f.length;a<b;a++)h=f[a],A.ja.$.Fh(h.qe())?(g.na=h.na,g.ab=h.ab,e.push(g),g=new A.ja):g.Md.push(h)}else{a=0;for(b=f.length;a<b;a++)h=f[a],A.ja.$.Fh(h.qe())?
(g&&e.push(g),g=new A.ja,g.na=h.na,g.ab=h.ab):g.Md.push(h);e.push(g)}return e};A.ja=function(){A.Hc.apply(this,arguments);this.Md=[]};A.ja.prototype=new A.Hc;A.ja.prototype.constructor=A.Hc;
A.ja.$={hw:function(a,b){var c=a.concat(),e=c.concat(),f,h,g,i,j,l,m,q,p,s,o=[];for(j=0;j<b.length;j++){l=b[j];Array.prototype.push.apply(e,l);h=Number.POSITIVE_INFINITY;for(f=0;f<l.length;f++){p=l[f];s=[];for(q=0;q<c.length;q++)m=c[q],m=p.tj(m),s.push(m),m<h&&(h=m,g=f,i=q)}f=0<=i-1?i-1:c.length-1;h=0<=g-1?g-1:l.length-1;var n=[l[g],c[i],c[f]];q=A.Kb.$e.jh(n);var t=[l[g],l[h],c[i]];p=A.Kb.$e.jh(t);s=i;m=g;i+=1;g+=-1;0>i&&(i+=c.length);i%=c.length;0>g&&(g+=l.length);g%=l.length;f=0<=i-1?i-1:c.length-
1;h=0<=g-1?g-1:l.length-1;n=[l[g],c[i],c[f]];n=A.Kb.$e.jh(n);t=[l[g],l[h],c[i]];t=A.Kb.$e.jh(t);q+p>n+t&&(i=s,g=m,0>i&&(i+=c.length),i%=c.length,0>g&&(g+=l.length),g%=l.length,f=0<=i-1?i-1:c.length-1,h=0<=g-1?g-1:l.length-1);q=c.slice(0,i);p=c.slice(i);s=l.slice(g);m=l.slice(0,g);h=[l[g],l[h],c[i]];o.push([l[g],c[i],c[f]]);o.push(h);c=q.concat(s).concat(m).concat(p)}return{shape:c,Du:o,Xs:e}},ax:function(a,b){var c=A.ja.$.hw(a,b),e=c.Xs,f=c.Du,c=A.Kb.$e(c.shape,v),h,g,i,j,l={};h=0;for(g=e.length;h<
g;h++)j=e[h].x+":"+e[h].y,l[j]!==d&&console.log("Duplicate point",j),l[j]=h;h=0;for(g=c.length;h<g;h++){i=c[h];for(e=0;3>e;e++)j=i[e].x+":"+i[e].y,j=l[j],j!==d&&(i[e]=j)}h=0;for(g=f.length;h<g;h++){i=f[h];for(e=0;3>e;e++)j=i[e].x+":"+i[e].y,j=l[j],j!==d&&(i[e]=j)}return c.concat(f)},Fh:function(a){return 0>A.Kb.$e.jh(a)},ft:function(a,b){var c=1-a;return c*c*b},gt:function(a,b){return 2*(1-a)*a*b},ht:function(a,b){return a*a*b},Cd:function(a,b,c,e){return this.ft(a,b)+this.gt(a,c)+this.ht(a,e)},it:function(a,
b){var c=1-a;return c*c*c*b},jt:function(a,b){var c=1-a;return 3*c*c*a*b},kt:function(a,b){return 3*(1-a)*a*a*b},lt:function(a,b){return a*a*a*b},Dd:function(a,b,c,e,f){return this.it(a,b)+this.jt(a,c)+this.kt(a,e)+this.lt(a,f)}};A.cl=function(a,b){A.Hc.call(this);this.ca=b||{};this.set(a)};
A.cl.prototype.set=function(a,b){b=b||this.ca;this.text=a;var c=b.Kt!==d?b.Kt:4,e=b.font!==d?b.font:"helvetiker",f=b.Nf!==d?b.Nf:"normal",h=b.style!==d?b.style:"normal";A.Kb.size=b.size!==d?b.size:100;A.Kb.$l=c;A.Kb.face=e;A.Kb.Nf=f;A.Kb.style=h};A.cl.prototype.Wn=function(){for(var a=A.Kb.St(this.text).iq,b=[],c=0,e=a.length;c<e;c++)Array.prototype.push.apply(b,a[c].Wn());return b};
var ke,we=[],xe={},ze={update:function(a){for(var b=0;b<we.length;b++)we[b].update(a)},Vi:function(a){-1===we.indexOf(a)&&we.push(a)},ak:function(a){a=we.indexOf(a);-1!==a&&we.splice(a,1)},add:function(a){xe[a.name]!==d&&console.log("THREE.AnimationHandler.add: Warning! "+a.name+" already exists in library. Overwriting.");xe[a.name]=a;if(a.xu!==r){for(var b=0;b<a.q.length;b++){for(var c=0;c<a.q[b].keys.length;c++)if(0>a.q[b].keys[c].time&&(a.q[b].keys[c].time=0),a.q[b].keys[c].Sd!==d&&!(a.q[b].keys[c].Sd instanceof
A.Wb)){var e=a.q[b].keys[c].Sd;a.q[b].keys[c].Sd=new A.Wb(e[0],e[1],e[2],e[3])}if(a.q[b].keys.length&&a.q[b].keys[0].O!==d){e={};for(c=0;c<a.q[b].keys.length;c++)for(var f=0;f<a.q[b].keys[c].O.length;f++){var h=a.q[b].keys[c].O[f];e[h]=-1}a.q[b].WB=e;for(c=0;c<a.q[b].keys.length;c++){var g={};for(h in e){for(f=0;f<a.q[b].keys[c].O.length;f++)if(a.q[b].keys[c].O[f]===h){g[h]=a.q[b].keys[c].ov[f];break}f===a.q[b].keys[c].O.length&&(g[h]=0)}a.q[b].keys[c].ov=g}}for(c=1;c<a.q[b].keys.length;c++)a.q[b].keys[c].time===
a.q[b].keys[c-1].time&&(a.q[b].keys.splice(c,1),c--);for(c=0;c<a.q[b].keys.length;c++)a.q[b].keys[c].index=c}c=parseInt(a.length*a.lg,10);a.Ai={};a.Ai.q=[];for(b=0;b<a.q.length;b++)a.Ai.q.push(Array(c));a.xu=r}},get:function(a){if("string"==typeof a)return xe[a]?xe[a]:(console.log("THREE.AnimationHandler.get: Couldn't find animation "+a),u)},parse:function(a){var b=[];if(a instanceof A.be)for(var c=0;c<a.ib.length;c++)b.push(a.ib[c]);else ye(a,b);return b}};
function ye(a,b){b.push(a);for(var c=0;c<a.children.length;c++)ye(a.children[c],b)}ke=(ze.LINEAR=0,ze.Fk=1,ze.Pf=2,ze);A.Da=ke;A.ko=function(a,b,c,e){this.root=a;this.data=A.Da.get(b);this.q=A.Da.parse(a);this.currentTime=0;this.Vn=1;this.Pd=v;this.loop=this.Qc=r;this.Nd=c!==d?c:A.Da.LINEAR;this.Te=e!==d?e:r;this.P=[];this.target=new A.d};Za=A.ko.prototype;
Za.play=function(a,b){if(!this.Pd){this.Pd=r;this.loop=a!==d?a:r;this.currentTime=b!==d?b:0;var c,e=this.q.length,f;for(c=0;c<e;c++){f=this.q[c];this.Nd!==A.Da.Pf&&(f.Vd=r);f.Pb=r;f.Ea===d&&(f.Ea={},f.Ea.Bf={Qd:0,Sd:0,Jg:0},f.Ea.wf={Qd:0,Sd:0,Jg:0},f.Ea.De=f instanceof A.sb?f.zb:f.u);var h=f.Ea.Bf;f=f.Ea.wf;h.Qd=this.data.q[c].keys[0];h.Sd=this.data.q[c].keys[0];h.Jg=this.data.q[c].keys[0];f.Qd=this.Ld("pos",c,1);f.Sd=this.Ld("rot",c,1);f.Jg=this.Ld("scl",c,1)}this.update(0)}this.Qc=v;A.Da.Vi(this)};
Za.pause=function(){this.Qc?A.Da.Vi(this):A.Da.ak(this);this.Qc=!this.Qc};Za.stop=function(){this.Qc=this.Pd=v;A.Da.ak(this);for(var a=0;a<this.q.length;a++)this.q[a].Ea!==d&&(this.q[a]instanceof A.sb?this.q[a].zb=this.q[a].Ea.De:this.q[a].u=this.q[a].Ea.De,delete this.q[a].Ea)};
Za.update=function(a){if(this.Pd){var b=["pos","rot","scl"],c,e,f,h,g,i,j,l,m=this.data.Ai.q,q,p;p=this.currentTime+=a*this.Vn;q=this.currentTime%=this.data.length;l=parseInt(Math.min(q*this.data.lg,this.data.length*this.data.lg),10);for(var s=0,o=this.q.length;s<o;s++)if(a=this.q[s],j=a.Ea,this.Te&&m[s][l]!==d)a instanceof A.sb?(a.zb=m[s][l],a.Pb=v,a.Oa=v):(a.u=m[s][l],a.Pb=v,a.Oa=r);else{this.Te&&(a instanceof A.sb?a.zb=a.Ea.De:a.u=a.Ea.De);for(var n=0;3>n;n++){c=b[n];g=j.Bf[c];i=j.wf[c];if(i.time<=
p){if(q<p){if(!this.loop){this.stop();return}g=this.data.q[s].keys[0];for(i=this.Ld(c,s,1);i.time<q;)g=i,i=this.Ld(c,s,i.index+1)}else{do g=i,i=this.Ld(c,s,i.index+1);while(i.time<q)}j.Bf[c]=g;j.wf[c]=i}a.Pb=r;a.Oa=r;e=(q-g.time)/(i.time-g.time);f=g[c];h=i[c];if(0>e||1<e)console.log("THREE.Animation.update: Warning! Scale out of bounds:"+e+" on bone "+s),e=0>e?0:1;if("pos"===c)if(c=a.position,this.Nd===A.Da.LINEAR)c.x=f[0]+(h[0]-f[0])*e,c.y=f[1]+(h[1]-f[1])*e,c.a=f[2]+(h[2]-f[2])*e;else{if(this.Nd===
A.Da.Fk||this.Nd===A.Da.Pf)this.P[0]=this.wm("pos",s,g.index-1).Qd,this.P[1]=f,this.P[2]=h,this.P[3]=this.Ld("pos",s,i.index+1).Qd,e=0.33*e+0.33,f=Ae(this,this.P,e),c.x=f[0],c.y=f[1],c.a=f[2],this.Nd===A.Da.Pf&&(e=Ae(this,this.P,1.01*e),this.target.set(e[0],e[1],e[2]),this.target.Ia(c),this.target.y=0,this.target.normalize(),e=Math.atan2(this.target.x,this.target.a),a.rotation.set(0,e,0))}else"rot"===c?A.Wb.Dw(f,h,a.Vc,e):"scl"===c&&(c=a.scale,c.x=f[0]+(h[0]-f[0])*e,c.y=f[1]+(h[1]-f[1])*e,c.a=f[2]+
(h[2]-f[2])*e)}}if(this.Te&&m[0][l]===d){this.q[0].bc(r);for(s=0;s<this.q.length;s++)m[s][l]=this.q[s]instanceof A.sb?this.q[s].zb.e():this.q[s].u.e()}}};function Ae(a,b,c){var e=[],f=[],h,g,i,j,l,m;return h=(b.length-1)*c,g=Math.floor(h),h-=g,e[0]=0===g?g:g-1,e[1]=g,e[2]=g>b.length-2?g:g+1,e[3]=g>b.length-3?g:g+2,g=b[e[0]],j=b[e[1]],l=b[e[2]],m=b[e[3]],e=h*h,i=h*e,f[0]=a.Hb(g[0],j[0],l[0],m[0],h,e,i),f[1]=a.Hb(g[1],j[1],l[1],m[1],h,e,i),f[2]=a.Hb(g[2],j[2],l[2],m[2],h,e,i),f}
Za.Hb=function(a,b,c,e,f,h,g){return a=0.5*(c-a),e=0.5*(e-b),(2*(b-c)+a+e)*g+(-3*(b-c)-2*a-e)*h+a*f+b};Za.Ld=function(a,b,c){for(var e=this.data.q[b].keys,c=this.Nd===A.Da.Fk||this.Nd===A.Da.Pf?c<e.length-1?c:e.length-1:c%e.length;c<e.length;c++)if(e[c][a]!==d)return e[c];return this.data.q[b].keys[0]};Za.wm=function(a,b,c){for(var e=this.data.q[b].keys,c=this.Nd===A.Da.Fk||this.Nd===A.Da.Pf?0<c?c:0:0<=c?c:c+e.length;0<=c;c--)if(e[c][a]!==d)return e[c];return this.data.q[b].keys[e.length-1]};
A.Qr=function(a,b,c){this.root=a;this.data=A.Da.get(b);this.q=A.Da.parse(a);this.currentTime=0;this.Vn=0.0010;this.Pd=v;this.loop=this.Qc=r;this.Te=c!==d?c:r;a=0;for(b=this.q.length;a<b;a++){var c=this.data.q[a].Cw,e=this.q[a];if(this.data.q[a].keys.length&&c){for(var f=0;f<c.length;f++){var h=c[f],g=this.Ld(h,a,0);g&&g.apply(h)}e.Pb=v;this.data.q[a].cn.td();e.Oa=r}}};Za=A.Qr.prototype;
Za.play=function(a,b){if(!this.Pd){this.Pd=r;this.loop=a!==d?a:r;this.currentTime=b!==d?b:0;this.Mq=b;this.startTime=1E7;this.sp=-this.startTime;var c,e=this.q.length,f,h;for(c=0;c<e;c++)f=this.q[c],h=this.data.q[c],f.Vd=r,h.Ea===d&&(h.Ea={},h.Ea.Bf=u,h.Ea.wf=u,h.Ea.De=f instanceof A.sb?f.zb:f.u),f=this.data.q[c].keys,f.length&&(h.Ea.Bf=f[0],h.Ea.wf=f[1],this.startTime=Math.min(f[0].time,this.startTime),this.sp=Math.max(f[f.length-1].time,this.sp));this.update(0)}this.Qc=v;A.Da.Vi(this)};
Za.pause=function(){this.Qc?A.Da.Vi(this):A.Da.ak(this);this.Qc=!this.Qc};Za.stop=function(){this.Qc=this.Pd=v;A.Da.ak(this);for(var a=0;a<this.data.q.length;a++){var b=this.q[a],c=this.data.q[a];if(c.Ea!==d){var e=c.Ea.De;b instanceof A.sb?(e.copy(b.zb),b.zb=e):(e.copy(b.u),b.u=e);delete c.Ea}}};
Za.update=function(a){if(this.Pd){var b,c,e,f,h=this.data.Ai.q,g,i,j;i=this.currentTime+=a*this.Vn;g=this.currentTime%=this.data.length;g<this.Mq&&(g=this.currentTime=this.Mq+g);f=parseInt(Math.min(g*this.data.lg,this.data.length*this.data.lg),10);if((j=g<i)&&!this.loop){for(var a=0,l=this.q.length;a<l;a++){var m=this.data.q[a].keys,h=this.data.q[a].Cw;e=m.length-1;f=this.q[a];if(m.length){for(m=0;m<h.length;m++)g=h[m],(i=this.wm(g,a,e))&&i.apply(g);this.data.q[a].cn.td();f.Oa=r}}this.stop()}else if(!(g<
this.startTime)){a=0;for(l=this.q.length;a<l;a++){e=this.q[a];b=this.data.q[a];var m=b.keys,q=b.Ea;if(this.Te&&h[a][f]!==d)e instanceof A.sb?(e.zb=h[a][f],e.Oa=v):(e.u=h[a][f],e.Oa=r);else if(m.length){this.Te&&q&&(e instanceof A.sb?e.zb=q.De:e.u=q.De);b=q.Bf;c=q.wf;if(b&&c){if(c.time<=i){if(j&&this.loop){b=m[0];for(c=m[1];c.time<g;)b=c,c=m[b.index+1]}else if(!j)for(var p=m.length-1;c.time<g&&c.index!==p;)b=c,c=m[b.index+1];q.Bf=b;q.wf=c}c.time>=g?b.Hb(c,g):b.Hb(c,c.time)}this.data.q[a].cn.td();e.Oa=
r}}if(this.Te&&h[0][f]===d){this.q[0].bc(r);for(a=0;a<this.q.length;a++)h[a][f]=this.q[a]instanceof A.sb?this.q[a].zb.e():this.q[a].u.e()}}}};Za.Ld=function(a,b,c){b=this.data.q[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].pu(a))return b[c];return b[0]};Za.wm=function(a,b,c){b=this.data.q[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].pu(a))return b[c];return b[b.length-1]};
A.Ik=function(a,b,c){A.D.call(this);var e=new A.Pa(90,1,a,b);e.Ra.set(0,-1,0);e.oa(new A.d(1,0,0));this.add(e);var f=new A.Pa(90,1,a,b);f.Ra.set(0,-1,0);f.oa(new A.d(-1,0,0));this.add(f);var h=new A.Pa(90,1,a,b);h.Ra.set(0,0,1);h.oa(new A.d(0,1,0));this.add(h);var g=new A.Pa(90,1,a,b);g.Ra.set(0,0,-1);g.oa(new A.d(0,-1,0));this.add(g);var i=new A.Pa(90,1,a,b);i.Ra.set(0,-1,0);i.oa(new A.d(0,0,1));this.add(i);var j=new A.Pa(90,1,a,b);j.Ra.set(0,-1,0);j.oa(new A.d(0,0,-1));this.add(j);this.Wh=new A.zd(c,
c,{Ob:A.$g,yb:A.Vb,eb:A.Vb});this.TB=function(a,b){var c=this.Wh,p=c.mf;c.mf=v;c.bf=0;a.p(b,e,c);c.bf=1;a.p(b,f,c);c.bf=2;a.p(b,h,c);c.bf=3;a.p(b,g,c);c.bf=4;a.p(b,i,c);c.mf=p;c.bf=5;a.p(b,j,c)}};A.Ik.prototype=new A.D;A.Ik.prototype.constructor=A.Ik;A.Ug=function(a,b,c,e,f,h,g){A.fc.call(this);this.kf=c;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2;this.ke=new A.Yd(a/-2,a/2,b/2,b/-2,h,g);this.Gd=new A.Pa(c,a/b,e,f);this.zoom=1;Be(this)};A.Ug.prototype=new A.fc;
A.Ug.prototype.constructor=A.Ug;function Be(a){a.Ua=a.Gd.Ua;a.bb=a.Gd.bb;a.Gd.kf=a.kf/a.zoom;a.Gd.Ud();a.va=a.Gd.va;a.Jp=r;a.tu=v}A.Ug.prototype.Mg=function(a,b){this.Gd.cg=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2};
A.Ug.prototype.Ud=function(){if(this.Jp)Be(this);else{Be(this);var a=this.Gd.cg,b=(this.Gd.Ua+this.Gd.bb)/2,b=Math.tan(this.kf/2)*b,a=2*b*a/2,b=b/this.zoom,a=a/this.zoom;this.ke.left=-a;this.ke.right=a;this.ke.top=b;this.ke.bottom=-b;this.ke.Ud();this.Ua=this.ke.Ua;this.bb=this.ke.bb;this.va=this.ke.va;this.Jp=v;this.tu=r}};
A.Ax=function(a,b){function c(a,b){return function(){b.apply(a,arguments)}}this.object=a;this.target=new A.d(0,0,0);this.K=b!==d?b:document;this.Lh=1;this.wg=0.0050;this.pA=v;this.Lj=r;this.kh=v;this.wl=r;this.ru=v;this.qu=1;this.Fp=0;this.gf=v;this.tr=0;this.sr=Math.PI;this.Dc=this.fb=this.yc=this.Ib=this.Ae=this.ze=this.Bl=0;this.$p=this.freeze=this.bn=this.an=this.Be=this.uf=v;this.K===document?(this.Lf=window.innerWidth/2,this.Mf=window.innerHeight/2):(this.Lf=this.K.offsetWidth/2,this.Mf=this.K.offsetHeight/
2,this.K.setAttribute("tabindex",-1));this.Lv=function(a){this.K!==document&&this.K.focus();a.preventDefault();a.stopPropagation();if(this.wl)switch(a.button){case 0:this.uf=r;break;case 2:this.Be=r}this.$p=r};this.Mv=function(a){a.preventDefault();a.stopPropagation();if(this.wl)switch(a.button){case 0:this.uf=v;break;case 2:this.Be=v}this.$p=v};this.gn=function(a){this.K===document?(this.ze=a.pageX-this.Lf,this.Ae=a.pageY-this.Mf):(this.ze=a.pageX-this.K.offsetLeft-this.Lf,this.Ae=a.pageY-this.K.offsetTop-
this.Mf)};this.Gv=function(a){switch(a.keyCode){case 38:case 87:this.uf=r;break;case 37:case 65:this.an=r;break;case 40:case 83:this.Be=r;break;case 39:case 68:this.bn=r;break;case 82:this.cq=r;break;case 70:this.bq=r;break;case 81:this.freeze=!this.freeze}};this.Hv=function(a){switch(a.keyCode){case 38:case 87:this.uf=v;break;case 37:case 65:this.an=v;break;case 40:case 83:this.Be=v;break;case 39:case 68:this.bn=v;break;case 82:this.cq=v;break;case 70:this.bq=v}};this.update=function(a){var b;if(!this.freeze){this.ru?
(b=A.wd.qh(this.object.position.y,this.Fp,this.sz)-this.Fp,this.Bl=0*a*this.qu):this.Bl=0;b=a*this.Lh;(this.uf||this.kh&&!this.Be)&&this.object.qi(-(b+this.Bl));this.Be&&this.object.qi(b);this.an&&this.object.oi(-b);this.bn&&this.object.oi(b);this.cq&&this.object.pi(b);this.bq&&this.object.pi(-b);a*=this.wg;this.wl||(a=0);this.yc+=this.ze*a;this.Lj&&(this.Ib-=this.Ae*a);this.Ib=Math.max(-85,Math.min(85,this.Ib));this.fb=(90-this.Ib)*Math.PI/180;this.Dc=this.yc*Math.PI/180;b=this.target;var c=this.object.position;
b.x=c.x+100*Math.sin(this.fb)*Math.cos(this.Dc);b.y=c.y+100*Math.cos(this.fb);b.a=c.a+100*Math.sin(this.fb)*Math.sin(this.Dc);b=1;this.gf&&(b=Math.PI/(this.sr-this.tr));this.yc+=this.ze*a;this.Lj&&(this.Ib-=this.Ae*a*b);this.Ib=Math.max(-85,Math.min(85,this.Ib));this.fb=(90-this.Ib)*Math.PI/180;this.Dc=this.yc*Math.PI/180;this.gf&&(this.fb=A.wd.Nm(this.fb,0,Math.PI,this.tr,this.sr));b=this.target;c=this.object.position;b.x=c.x+100*Math.sin(this.fb)*Math.cos(this.Dc);b.y=c.y+100*Math.cos(this.fb);
b.a=c.a+100*Math.sin(this.fb)*Math.sin(this.Dc);this.object.oa(b)}};this.K.addEventListener("contextmenu",function(a){a.preventDefault()},v);this.K.addEventListener("mousemove",c(this,this.gn),v);this.K.addEventListener("mousedown",c(this,this.Lv),v);this.K.addEventListener("mouseup",c(this,this.Mv),v);this.K.addEventListener("keydown",c(this,this.Gv),v);this.K.addEventListener("keyup",c(this,this.Hv),v)};
A.Hx=function(a,b){function c(a){return 1>(a*=2)?0.5*a*a:-0.5*(--a*(a-2)-1)}function e(a,b,c,e){var f={name:c,lg:0.6,length:e,q:[]},g,h=b.ju(),o=b.nf(),n=h.length,t=0;g=n-1;b={parent:-1,keys:[]};b.keys[0]={time:0,Qd:h[0],Sd:[0,0,0,1],Jg:[1,1,1]};b.keys[g]={time:e,Qd:h[g],Sd:[0,0,0,1],Jg:[1,1,1]};for(g=1;g<n-1;g++)t=e*o.Nl[g]/o.total,b.keys[g]={time:t,Qd:h[g]};return f.q[0]=b,A.Da.add(f),new A.ko(a,c,A.Da.Pf,v)}function f(a){var b,c,e=new A.Q;for(b=0;b<10*a.P.length;b++)c=b/(10*a.P.length),c=a.La(c),
e.g[b]=new A.d(c.x,c.y,c.a);return e}this.object=a;this.K=b!==d?b:document;this.id="PathControls"+A.fs++;this.duration=1E4;this.lx=[];this.cx=r;this.kw=50;this.Nt=new A.D;this.Oy=new A.D;this.ie=new A.D;this.wg=0.0050;this.Su=this.Lj=r;this.rr={Rn:[0,2*Math.PI],dm:[0,2*Math.PI]};this.Ip={Rn:[0,2*Math.PI],dm:[0,2*Math.PI]};this.target=new A.D;this.Dc=this.fb=this.yc=this.Ib=this.Ae=this.ze=0;this.K===document?(this.Lf=window.innerWidth/2,this.Mf=window.innerHeight/2):(this.Lf=this.K.offsetWidth/2,
this.Mf=this.K.offsetHeight/2,this.K.setAttribute("tabindex",-1));var h=2*Math.PI,g=Math.PI/180;this.update=function(a){var b;this.Su&&(this.yc+=this.ze*this.wg*a);this.Lj&&(this.Ib-=this.Ae*this.wg*a);this.yc=Math.max(0,Math.min(360,this.yc));this.Ib=Math.max(-85,Math.min(85,this.Ib));this.fb=(90-this.Ib)*g;this.Dc=this.yc*g;a=this.fb%h;this.fb=0<=a?a:a+h;b=this.rr.Rn;a=this.rr.dm;b=A.wd.Nm(this.fb,b[0],b[1],a[0],a[1]);var e=a[1]-a[0];this.fb=c((b-a[0])/e)*e+a[0];b=this.Ip.Rn;a=this.Ip.dm;b=A.wd.Nm(this.Dc,
b[0],b[1],a[0],a[1]);e=a[1]-a[0];this.Dc=c((b-a[0])/e)*e+a[0];a=this.target.position;a.x=100*Math.sin(this.fb)*Math.cos(this.Dc);a.y=100*Math.cos(this.fb);a.a=100*Math.sin(this.fb)*Math.sin(this.Dc);this.object.oa(this.target.position)};this.gn=function(a){this.K===document?(this.ze=a.pageX-this.Lf,this.Ae=a.pageY-this.Mf):(this.ze=a.pageX-this.K.offsetLeft-this.Lf,this.Ae=a.pageY-this.K.offsetTop-this.Mf)};this.rg=function(){this.mi=new A.ns;this.mi.uu(this.lx);this.cx&&this.mi.jw(this.kw);if(this.Fy){var a=
new A.Db({color:30719}),b=new A.Db({color:65280}),c=new A.sc(10,10,20),g=new A.sc(2,2,10);this.ie=new A.C(c,a);a=new A.C(g,b);a.position.set(0,10,0);this.zl=e(this.ie,this.mi,this.id,this.duration);this.ie.add(this.object);this.ie.add(this.target);this.ie.add(a)}else this.zl=e(this.ie,this.mi,this.id,this.duration),this.ie.add(this.target),this.ie.add(this.object);if(this.Gy){var a=this.Nt,b=this.mi,g=f(b),c=f(b),h=new A.Ub({color:16711680,rf:3}),g=new A.Xa(g,h),c=new A.gc(c,new A.$d({color:16755200,
size:3}));g.scale.set(1,1,1);a.add(g);c.scale.set(1,1,1);a.add(c);for(var g=new A.Uf(1,16,8),h=new A.ua({color:65280}),p=0;p<b.P.length;p++)c=new A.C(g,h),c.position.copy(b.P[p]),a.add(c)}var s=this,o=this.gn;this.K.addEventListener("mousemove",function(){o.apply(s,arguments)},v)}};A.fs=0;
A.Cx=function(a,b){function c(a,b){return function(){b.apply(a,arguments)}}this.object=a;this.K=b!==d?b:document;b&&this.K.setAttribute("tabindex",-1);this.Lh=1;this.An=0.0050;this.kh=this.bm=v;this.object.Vd=r;this.Yq=new A.Wb;this.$m=0;this.U={Ra:0,am:0,left:0,right:0,forward:0,back:0,kn:0,Rh:0,ui:0,io:0,yn:0,zn:0};this.zg=new A.d(0,0,0);this.Ig=new A.d(0,0,0);this.handleEvent=function(a){"function"==typeof this[a.type]&&this[a.type](a)};this.Fu=function(a){if(!a.altKey){switch(a.keyCode){case 16:this.sv=
0.1;break;case 87:this.U.forward=1;break;case 83:this.U.back=1;break;case 65:this.U.left=1;break;case 68:this.U.right=1;break;case 82:this.U.Ra=1;break;case 70:this.U.am=1;break;case 38:this.U.kn=1;break;case 40:this.U.Rh=1;break;case 37:this.U.ui=1;break;case 39:this.U.io=1;break;case 81:this.U.yn=1;break;case 69:this.U.zn=1}this.ao();this.si()}};this.Gu=function(a){switch(a.keyCode){case 16:this.sv=1;break;case 87:this.U.forward=0;break;case 83:this.U.back=0;break;case 65:this.U.left=0;break;case 68:this.U.right=
0;break;case 82:this.U.Ra=0;break;case 70:this.U.am=0;break;case 38:this.U.kn=0;break;case 40:this.U.Rh=0;break;case 37:this.U.ui=0;break;case 39:this.U.io=0;break;case 81:this.U.yn=0;break;case 69:this.U.zn=0}this.ao();this.si()};this.qv=function(a){this.K!==document&&this.K.focus();a.preventDefault();a.stopPropagation();if(this.bm)this.$m++;else switch(a.button){case 0:this.object.uf=r;break;case 2:this.object.Be=r}};this.aq=function(a){if(!this.bm||0<this.$m){var b=this.iu(),c=b.size[0]/2,g=b.size[1]/
2;this.U.ui=-(a.pageX-b.offset[0]-c)/c;this.U.Rh=(a.pageY-b.offset[1]-g)/g;this.si()}};this.rv=function(a){a.preventDefault();a.stopPropagation();if(this.bm)this.$m--,this.U.ui=this.U.Rh=0;else switch(a.button){case 0:this.uf=v;break;case 2:this.Be=v}this.si()};this.update=function(a){var b=a*this.Lh,a=a*this.An;this.object.oi(this.zg.x*b);this.object.pi(this.zg.y*b);this.object.qi(this.zg.a*b);this.Yq.set(this.Ig.x*a,this.Ig.y*a,this.Ig.a*a,1).normalize();this.object.Vc.vf(this.Yq);Ed(this.object.u,
this.object.position);id(this.object.u,this.object.Vc);this.object.Oa=r};this.ao=function(){var a=this.U.forward||this.kh&&!this.U.back?1:0;this.zg.x=-this.U.left+this.U.right;this.zg.y=-this.U.am+this.U.Ra;this.zg.a=-a+this.U.back};this.si=function(){this.Ig.x=-this.U.Rh+this.U.kn;this.Ig.y=-this.U.io+this.U.ui;this.Ig.a=-this.U.zn+this.U.yn};this.iu=function(){return this.K!=document?{size:[this.K.offsetWidth,this.K.offsetHeight],offset:[this.K.offsetLeft,this.K.offsetTop]}:{size:[window.innerWidth,
window.innerHeight],offset:[0,0]}};this.K.addEventListener("mousemove",c(this,this.aq),v);this.K.addEventListener("mousedown",c(this,this.qv),v);this.K.addEventListener("mouseup",c(this,this.rv),v);this.K.addEventListener("keydown",c(this,this.Fu),v);this.K.addEventListener("keyup",c(this,this.Gu),v);this.ao();this.si()};
A.Jx=function(a,b){this.object=a;this.K=b!==d?b:document;this.pv=r;this.kh=v;this.An=this.Lh=this.wg=1;this.gf=[-0.9,0.9];this.object.Pb=v;this.forward=new A.d(0,0,1);this.Hg=0;var c=new A.d,e=new A.d,f=new A.d,h=new A.M,g=v,i=1,j=0,l=0,m=0,q=0,p=0,s=window.innerWidth/2,o=window.innerHeight/2;this.update=function(a){if(this.pv){var b=a*this.wg;this.nw(b*q);this.pw(b*p)}b=a*this.Lh;this.object.qi(-b*(0<j||this.kh&&!(0>j)?1:j));this.object.oi(b*l);this.object.pi(b*m);g&&(this.Hg+=this.An*a*i);this.forward.y>
this.gf[1]?(this.forward.y=this.gf[1],this.forward.normalize()):this.forward.y<this.gf[0]&&(this.forward.y=this.gf[0],this.forward.normalize());f.copy(this.forward);e.set(0,1,0);Pc(c,e,f).normalize();Pc(e,f,c).normalize();this.object.u.elements[0]=c.x;this.object.u.elements[4]=e.x;this.object.u.elements[8]=f.x;this.object.u.elements[1]=c.y;this.object.u.elements[5]=e.y;this.object.u.elements[9]=f.y;this.object.u.elements[2]=c.a;this.object.u.elements[6]=e.a;this.object.u.elements[10]=f.a;h.pf();h.elements[0]=
Math.cos(this.Hg);h.elements[4]=-Math.sin(this.Hg);h.elements[1]=Math.sin(this.Hg);h.elements[5]=Math.cos(this.Hg);this.object.u.vf(h);this.object.Oa=r;this.object.u.elements[12]=this.object.position.x;this.object.u.elements[13]=this.object.position.y;this.object.u.elements[14]=this.object.position.a};this.oi=function(a){this.object.position.x+=this.object.u.elements[0]*a;this.object.position.y+=this.object.u.elements[1]*a;this.object.position.a+=this.object.u.elements[2]*a};this.pi=function(a){this.object.position.x+=
this.object.u.elements[4]*a;this.object.position.y+=this.object.u.elements[5]*a;this.object.position.a+=this.object.u.elements[6]*a};this.qi=function(a){this.object.position.x-=this.object.u.elements[8]*a;this.object.position.y-=this.object.u.elements[9]*a;this.object.position.a-=this.object.u.elements[10]*a};this.nw=function(a){c.set(this.object.u.elements[0],this.object.u.elements[1],this.object.u.elements[2]);c.X(a);this.forward.Ia(c);this.forward.normalize()};this.pw=function(a){e.set(this.object.u.elements[4],
this.object.u.elements[5],this.object.u.elements[6]);e.X(a);this.forward.L(e);this.forward.normalize()};this.K.addEventListener("contextmenu",function(a){a.preventDefault()},v);this.K.addEventListener("mousemove",function(a){q=(a.clientX-s)/window.innerWidth;p=(a.clientY-o)/window.innerHeight},v);this.K.addEventListener("mousedown",function(a){a.preventDefault();a.stopPropagation();switch(a.button){case 0:j=1;break;case 2:j=-1}},v);this.K.addEventListener("mouseup",function(a){a.preventDefault();
a.stopPropagation();switch(a.button){case 0:j=0;break;case 2:j=0}},v);this.K.addEventListener("keydown",function(a){switch(a.keyCode){case 38:case 87:j=1;break;case 37:case 65:l=-1;break;case 40:case 83:j=-1;break;case 39:case 68:l=1;break;case 81:g=r;i=1;break;case 69:g=r;i=-1;break;case 82:m=1;break;case 70:m=-1}},v);this.K.addEventListener("keyup",function(a){switch(a.keyCode){case 38:case 87:j=0;break;case 37:case 65:l=0;break;case 40:case 83:j=0;break;case 39:case 68:l=0;break;case 81:g=v;break;
case 69:g=v;break;case 82:m=0;break;case 70:m=0}},v)};
A.Rx=function(a,b){A.Lr.call(this);var c=this;this.object=a;this.K=b!==d?b:document;this.enabled=r;this.screen={width:window.innerWidth,height:window.innerHeight,offsetLeft:0,offsetTop:0};this.ra=(this.screen.width+this.screen.height)/4;this.ow=1;this.ox=1.2;this.Qv=0.3;this.Sn=this.Mh=this.Nh=this.Sj=v;this.em=0.2;this.Xm=0;this.Tm=Infinity;this.keys=[65,83,68];this.target=new A.d;var e=new A.d,f=v,h=-1,g=new A.d,i=new A.d,j=new A.d,l=new A.r,m=new A.r,q=new A.r,p=new A.r,s={type:"change"};this.handleEvent=
function(a){"function"==typeof this[a.type]&&this[a.type](a)};this.og=function(a,b){return new A.r(0.5*((a-c.screen.offsetLeft)/c.ra),0.5*((b-c.screen.offsetTop)/c.ra))};this.vm=function(a,b){var e=new A.d((a-0.5*c.screen.width-c.screen.offsetLeft)/c.ra,(0.5*c.screen.height+c.screen.offsetTop-b)/c.ra,0),f=e.length();return 1<f?e.normalize():e.a=Math.sqrt(1-f*f),g.copy(c.object.position).Ia(c.target),f=c.object.Ra.e().Yc(e.y),f.L(Oc(c.object.Ra.e(),g).Yc(e.x)),f.L(g.Yc(e.a)),f};this.mw=function(){var a=
Math.acos(i.Fa(j)/i.length()/j.length());if(a){var b=Pc(new A.d,i,j).normalize(),e=new A.Wb,a=a*c.ow;Kd(e,b,-a);e.V(g);e.V(c.object.Ra);e.V(j);c.Sn?i=j:(Kd(e,b,a*(c.em-1)),e.V(i))}};this.nx=function(){var a=1+(m.y-l.y)*c.ox;1!==a&&0<a&&(g.X(a),c.Sn?l=m:l.y+=(m.y-l.y)*this.em)};this.Pv=function(){var a=p.e().Ia(q);if(a.Rc()){a.X(g.length()*c.Qv);var b=Oc(g.e(),c.object.Ra).Yc(a.x);b.L(c.object.Ra.e().Yc(a.y));c.object.position.L(b);c.target.L(b);c.Sn?q=p:q.L(a.sub(p,q).X(c.em))}};this.wt=function(){if(!c.Nh||
!c.Mh)c.object.position.Rc()>c.Tm*c.Tm&&c.object.position.Yc(c.Tm),g.Rc()<c.Xm*c.Xm&&c.object.position.add(c.target,g.Yc(c.Xm))};this.update=function(){g.copy(c.object.position).Ia(c.target);c.Sj||c.mw();c.Nh||c.nx();c.Mh||c.Pv();c.object.position.add(c.target,g);c.wt();c.object.oa(c.target);0<e.Gb(c.object.position)&&(c.dispatchEvent(s),e.copy(c.object.position))};this.K.addEventListener("contextmenu",function(a){a.preventDefault()},v);this.K.addEventListener("mousemove",function(a){c.enabled&&(f&&
(i=j=c.vm(a.clientX,a.clientY),l=m=c.og(a.clientX,a.clientY),q=p=c.og(a.clientX,a.clientY),f=v),-1!==h&&(0===h&&!c.Sj?j=c.vm(a.clientX,a.clientY):1===h&&!c.Nh?m=c.og(a.clientX,a.clientY):2===h&&!c.Mh&&(p=c.og(a.clientX,a.clientY))))},v);this.K.addEventListener("mousedown",function(a){c.enabled&&(a.preventDefault(),a.stopPropagation(),-1===h&&(h=a.button,0===h&&!c.Sj?i=j=c.vm(a.clientX,a.clientY):1===h&&!c.Nh?l=m=c.og(a.clientX,a.clientY):this.Mh||(q=p=c.og(a.clientX,a.clientY))))},v);this.K.addEventListener("mouseup",
function(a){c.enabled&&(a.preventDefault(),a.stopPropagation(),h=-1)},v);window.addEventListener("keydown",function(a){c.enabled&&-1===h&&(a.keyCode===c.keys[0]&&!c.Sj?h=0:a.keyCode===c.keys[1]&&!c.Nh?h=1:a.keyCode===c.keys[2]&&!c.Mh&&(h=2),-1!==h&&(f=r))},v);window.addEventListener("keyup",function(){c.enabled&&-1!==h&&(h=-1)},v)};
A.sc=function(a,b,c,e,f,h,g,i){function j(a,b,c,g,i,j,m,n){var p,o=e||1,q=f||1,s=i/2,t=j/2,w=l.g.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)p="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)p="y",q=h||1;else if("z"===a&&"y"===b||"y"===a&&"z"===b)p="x",o=h||1;var k=o+1,y=q+1,z=i/o,ja=j/q,H=new A.d;H[p]=0<m?1:-1;for(i=0;i<y;i++)for(j=0;j<k;j++){var Z=new A.d;Z[a]=(j*z-s)*c;Z[b]=(i*ja-t)*g;Z[p]=m;l.g.push(Z)}for(i=0;i<q;i++)for(j=0;j<o;j++)a=new A.la(j+k*i+w,j+k*(i+1)+w,j+1+k*(i+1)+w,j+1+k*i+w),a.R.copy(H),
a.z.push(H.e(),H.e(),H.e(),H.e()),a.pa=n,l.l.push(a),l.H[0].push([new A.J(j/o,i/q),new A.J(j/o,(i+1)/q),new A.J((j+1)/o,(i+1)/q),new A.J((j+1)/o,i/q)])}A.Q.call(this);var l=this,m=a/2,q=b/2,p=c/2,s,o,n,t,w,z;if(g!==d){if(g instanceof Array)this.T=g;else{this.T=[];for(s=0;6>s;s++)this.T.push(g)}s=0;t=1;o=2;w=3;n=4;z=5}else this.T=[];this.Je={$v:r,yv:r,aw:r,zv:r,bw:r,Av:r};if(i!=d)for(var y in i)this.Je[y]!==d&&(this.Je[y]=i[y]);this.Je.$v&&j("z","y",-1,-1,c,b,m,s);this.Je.yv&&j("z","y",1,-1,c,b,-m,
t);this.Je.aw&&j("x","z",1,1,a,c,q,o);this.Je.zv&&j("x","z",1,-1,a,c,-q,w);this.Je.bw&&j("x","y",1,-1,a,b,p,n);this.Je.Av&&j("x","y",-1,-1,a,b,-p,z);Yd(this);Ud(this)};A.sc.prototype=new A.Q;A.sc.prototype.constructor=A.sc;
A.Rf=function(a,b,c,e,f,h){A.Q.call(this);var a=a!==d?a:20,b=b!==d?b:20,c=c!==d?c:100,g=c/2,e=e||8,f=f||1,i,j,l=[],m=[];for(j=0;j<=f;j++){var q=[],p=[],s=j/f,o=s*(b-a)+a;for(i=0;i<=e;i++){var n=i/e,t=new A.d;t.x=o*Math.sin(2*n*Math.PI);t.y=-s*c+g;t.a=o*Math.cos(2*n*Math.PI);this.g.push(t);q.push(this.g.length-1);p.push(new A.J(n,s))}l.push(q);m.push(p)}c=(b-a)/c;for(i=0;i<e;i++){0!==a?(q=this.g[l[0][i]].e(),p=this.g[l[0][i+1]].e()):(q=this.g[l[1][i]].e(),p=this.g[l[1][i+1]].e());(q.y=Math.sqrt(q.x*
q.x+q.a*q.a)*c,q).normalize();(p.y=Math.sqrt(p.x*p.x+p.a*p.a)*c,p).normalize();for(j=0;j<f;j++){var s=l[j][i],o=l[j+1][i],n=l[j+1][i+1],t=l[j][i+1],w=q.e(),z=q.e(),y=p.e(),x=p.e(),F=m[j][i].e(),M=m[j+1][i].e(),S=m[j+1][i+1].e(),O=m[j][i+1].e();this.l.push(new A.la(s,o,n,t,[w,z,y,x]));this.H[0].push([F,M,S,O])}}if(!h&&0<a){this.g.push(new A.d(0,g,0));for(i=0;i<e;i++)s=l[0][i],o=l[0][i+1],n=this.g.length-1,w=new A.d(0,1,0),z=new A.d(0,1,0),y=new A.d(0,1,0),F=m[0][i].e(),M=m[0][i+1].e(),S=new A.J(M.ia,
0),this.l.push(new A.ga(s,o,n,[w,z,y])),this.H[0].push([F,M,S])}if(!h&&0<b){this.g.push(new A.d(0,-g,0));for(i=0;i<e;i++)s=l[j][i+1],o=l[j][i],n=this.g.length-1,w=new A.d(0,-1,0),z=new A.d(0,-1,0),y=new A.d(0,-1,0),F=m[j][i+1].e(),M=m[j][i].e(),S=new A.J(M.ia,1),this.l.push(new A.ga(s,o,n,[w,z,y])),this.H[0].push([F,M,S])}Yd(this);Xd(this)};A.Rf.prototype=new A.Q;A.Rf.prototype.constructor=A.Rf;
A.Wa=function(a,b){if("undefined"!=typeof a){A.Q.call(this);a=a instanceof Array?a:[a];this.bB=ge(a[a.length-1]);for(var c=a,e=c.length,f=0;f<e;f++)Ce(this,c[f],b);Yd(this);Xd(this)}};A.Wa.prototype=new A.Q;A.Wa.prototype.constructor=A.Wa;
function Ce(a,b,c){function e(a,b,c){return b||console.log("die"),b.e().X(c).L(a)}function f(a,b,c){var e=A.Wa.Xb,f=A.Wa.Ni,g=A.Wa.Oi,h=A.Wa.Js,i=A.Wa.Ks,j=A.Wa.Ls;return e.set(a.x-b.x,a.y-b.y),f.set(a.x-c.x,a.y-c.y),e=e.normalize(),f=f.normalize(),g.set(-e.y,e.x),h.set(f.y,-f.x),i.copy(a).L(g),j.copy(a).L(h),i.km(j)?h.e():(i.copy(b).L(g),j.copy(c).L(h),g=e.Fa(h),h=j.Ia(i).Fa(h),0===g&&(console.log("Either infinite or no solutions!"),0===h?console.log("Its finite solutions."):console.log("Too bad, no solutions.")),
h/=g,0>h?(b=Math.atan2(b.y-a.y,b.x-a.x),a=Math.atan2(c.y-a.y,c.x-a.x),b>a&&(a+=2*Math.PI),c=(b+a)/2,a=-Math.cos(c),c=-Math.sin(c),new A.r(a,c)):e.X(h).L(i).Ia(a).e())}function h(a,e){var f,g;for(H=a.length;0<=--H;){f=H;g=H-1;0>g&&(g=a.length-1);for(var h=0,i=s+2*q,h=0;h<i;h++){var j=ja*h,l=ja*(h+1),k=e+f+j,j=e+g+j,m=e+g+l,l=e+f+l,n=a,p=h,o=i,k=k+U,j=j+U,m=m+U,l=l+U;N.l.push(new A.la(k,j,m,l,u,u,y));k=ia.gu(N,b,n,c,k,j,m,l,p,o);N.H[0].push(k)}}}function g(a,b,c){N.g.push(new A.d(a,b,c))}function i(a,
e,f,g){a+=U;e+=U;f+=U;N.l.push(new A.ga(a,e,f,u,u,z));a=g?ia.fu(N,b,c,a,e,f):ia.Ap(N,b,c,a,e,f);N.H[0].push(a)}var j=c.yl!==d?c.yl:100,l=c.Gl!==d?c.Gl:6,m=c.Fl!==d?c.Fl:l-2,q=c.ot!==d?c.ot:3,p=c.El!==d?c.El:r,s=c.Rw!==d?c.Rw:1,o=c.nt,n=c.$y,t,w=v,z=c.F,y=c.Zy,x,F,M,S;n&&(t=n.Ej(s),w=r,p=v,x=new A.Vf.ro(n,s,v),F=new A.d,M=new A.d,S=new A.d);p||(m=l=q=0);var O,G,B,N=a,U=a.g.length;o&&b.lh.push(o);a=b;if(a.ex){var X=je(a),T,R=a.Md.length,o=[];for(T=0;T<R;T++)o[T]=je(a.Md[T],a.lh)}else{X=he(a);R=a.Md.length;
o=[];for(T=0;T<R;T++)o[T]=he(a.Md[T],a.lh)}n=a={shape:X,Md:o};o=n.shape;a=n.Md;if(n=!A.ja.$.Fh(o)){o=o.reverse();G=0;for(B=a.length;G<B;G++)O=a[G],A.ja.$.Fh(O)&&(a[G]=O.reverse());n=v}T=A.ja.$.ax(o,a);X=o;G=0;for(B=a.length;G<B;G++)O=a[G],o=o.concat(O);var I,J,k,da,D,ja=o.length,R=T.length,n=[],H=0;k=X.length;I=k-1;for(J=H+1;H<k;H++,I++,J++)I===k&&(I=0),J===k&&(J=0),n[H]=f(X[H],X[I],X[J]);var Z=[],L,ha=n.concat();G=0;for(B=a.length;G<B;G++){O=a[G];L=[];H=0;k=O.length;I=k-1;for(J=H+1;H<k;H++,I++,J++)I===
k&&(I=0),J===k&&(J=0),L[H]=f(O[H],O[I],O[J]);Z.push(L);ha=ha.concat(L)}for(I=0;I<q;I++){k=I/q;da=l*(1-k);J=m*Math.sin(k*Math.PI/2);H=0;for(k=X.length;H<k;H++)D=e(X[H],n[H],J),g(D.x,D.y,-da);G=0;for(B=a.length;G<B;G++){O=a[G];L=Z[G];H=0;for(k=O.length;H<k;H++)D=e(O[H],L[H],J),g(D.x,D.y,-da)}}J=m;for(H=0;H<ja;H++)D=p?e(o[H],ha[H],J):o[H],w?(M.copy(x.Oh[0]).X(D.x),F.copy(x.$i[0]).X(D.y),S.copy(t[0]).L(M).L(F),g(S.x,S.y,S.a)):g(D.x,D.y,0);for(k=1;k<=s;k++)for(H=0;H<ja;H++)D=p?e(o[H],ha[H],J):o[H],w?(M.copy(x.Oh[k]).X(D.x),
F.copy(x.$i[k]).X(D.y),S.copy(t[k]).L(M).L(F),g(S.x,S.y,S.a)):g(D.x,D.y,j/s*k);for(I=q-1;0<=I;I--){k=I/q;da=l*(1-k);J=m*Math.sin(k*Math.PI/2);H=0;for(k=X.length;H<k;H++)D=e(X[H],n[H],J),g(D.x,D.y,j+da);G=0;for(B=a.length;G<B;G++){O=a[G];L=Z[G];H=0;for(k=O.length;H<k;H++)D=e(O[H],L[H],J),w?g(D.x,D.y+t[s-1].y,t[s-1].x+da):g(D.x,D.y,j+da)}}var ia=A.Wa.zs;if(p){l=0*ja;for(H=0;H<R;H++)j=T[H],i(j[2]+l,j[1]+l,j[0]+l,r);l=ja*(s+2*q);for(H=0;H<R;H++)j=T[H],i(j[0]+l,j[1]+l,j[2]+l,v)}else{for(H=0;H<R;H++)j=
T[H],i(j[2],j[1],j[0],r);for(H=0;H<R;H++)j=T[H],i(j[0]+ja*s,j[1]+ja*s,j[2]+ja*s,v)}j=0;h(X,j);j+=X.length;G=0;for(B=a.length;G<B;G++)O=a[G],h(O,j),j+=O.length}
A.Wa.zs={Ap:function(a,b,c,e,f,h){return b=a.g[f].x,f=a.g[f].y,c=a.g[h].x,h=a.g[h].y,[new A.J(a.g[e].x,1-a.g[e].y),new A.J(b,1-f),new A.J(c,1-h)]},fu:function(a,b,c,e,f,h){return this.Ap(a,b,c,e,f,h)},gu:function(a,b,c,e,f,h,g,i){var b=a.g[f].x,c=a.g[f].y,f=a.g[f].a,e=a.g[h].x,j=a.g[h].y,h=a.g[h].a,l=a.g[g].x,m=a.g[g].y,g=a.g[g].a,q=a.g[i].x,p=a.g[i].y,a=a.g[i].a;return 0.01>Math.abs(c-j)?[new A.J(b,f),new A.J(e,h),new A.J(l,g),new A.J(q,a)]:[new A.J(c,f),new A.J(j,h),new A.J(m,g),new A.J(p,a)]}};
A.Wa.Xb=new A.r;A.Wa.Ni=new A.r;A.Wa.Oi=new A.r;A.Wa.Js=new A.r;A.Wa.Ks=new A.r;A.Wa.Ls=new A.r;
A.Kk=function(a,b,c){A.Q.call(this);var b=b||12,c=c||2*Math.PI,e=[],f;f=new A.M;var c=c/b,h=Math.cos(c),c=Math.sin(c);f=(f.set(h,-c,0,0,c,h,0,0,0,0,1,0,0,0,0,1),f);for(h=0;h<a.length;h++)e[h]=a[h].e(),this.g.push(e[h]);for(var g=b+1,c=0;c<g;c++)for(h=0;h<e.length;h++)e[h]=f.V(e[h].e()),this.g.push(e[h]);for(c=0;c<b;c++){e=0;for(f=a.length;e<f-1;e++)this.l.push(new A.la(c*f+e,(c+1)%g*f+e,(c+1)%g*f+(e+1)%f,c*f+(e+1)%f)),this.H[0].push([new A.J(1-c/b,e/f),new A.J(1-(c+1)/b,e/f),new A.J(1-(c+1)/b,(e+
1)/f),new A.J(1-c/b,(e+1)/f)])}Yd(this);Xd(this);Wd(this)};A.Kk.prototype=new A.Q;A.Kk.prototype.constructor=A.Kk;
A.cd=function(a,b,c,e){A.Q.call(this);for(var f=a/2,h=b/2,c=c||1,e=e||1,g=c+1,i=e+1,j=a/c,l=b/e,m=new A.d(0,1,0),a=0;a<i;a++)for(b=0;b<g;b++)this.g.push(new A.d(b*j-f,0,a*l-h));for(a=0;a<e;a++)for(b=0;b<c;b++)f=new A.la(b+g*a,b+g*(a+1),b+1+g*(a+1),b+1+g*a),f.R.copy(m),f.z.push(m.e(),m.e(),m.e(),m.e()),this.l.push(f),this.H[0].push([new A.J(b/c,a/e),new A.J(b/c,(a+1)/e),new A.J((b+1)/c,(a+1)/e),new A.J((b+1)/c,a/e)]);Yd(this)};A.cd.prototype=new A.Q;A.cd.prototype.constructor=A.cd;
A.Uf=function(a,b,c,e,f,h,g){A.Q.call(this);var a=a||50,e=e!==d?e:0,f=f!==d?f:2*Math.PI,h=h!==d?h:0,g=g!==d?g:Math.PI,b=Math.max(3,Math.floor(b)||8),c=Math.max(2,Math.floor(c)||6),i,j,l=[],m=[];for(j=0;j<=c;j++){var q=[],p=[];for(i=0;i<=b;i++){var s=i/b,o=j/c,n=new A.d;n.x=-a*Math.cos(e+s*f)*Math.sin(h+o*g);n.y=a*Math.cos(h+o*g);n.a=a*Math.sin(e+s*f)*Math.sin(h+o*g);this.g.push(n);q.push(this.g.length-1);p.push(new A.J(s,o))}l.push(q);m.push(p)}for(j=0;j<c;j++)for(i=0;i<b;i++){var e=l[j][i+1],f=l[j][i],
h=l[j+1][i],g=l[j+1][i+1],q=this.g[e].e().normalize(),p=this.g[f].e().normalize(),s=this.g[h].e().normalize(),o=this.g[g].e().normalize(),n=m[j][i+1].e(),t=m[j][i].e(),w=m[j+1][i].e(),z=m[j+1][i+1].e();Math.abs(this.g[e].y)==a?(this.l.push(new A.ga(e,h,g,[q,s,o])),this.H[0].push([n,w,z])):Math.abs(this.g[h].y)==a?(this.l.push(new A.ga(e,f,h,[q,p,s])),this.H[0].push([n,t,w])):(this.l.push(new A.la(e,f,h,g,[q,p,s,o])),this.H[0].push([n,t,w,z]))}Yd(this);Xd(this);this.nc={ra:a}};A.Uf.prototype=new A.Q;
A.Uf.prototype.constructor=A.Uf;A.bl=function(a,b){var c=(new A.cl(a,b)).Wn();b.yl=b.height!==d?b.height:50;b.Gl===d&&(b.Gl=10);b.Fl===d&&(b.Fl=8);b.El===d&&(b.El=v);if(b.ey){var e=ge(c[c.length-1]).Vm;b.nt=new A.Ye(new A.r(0,0),new A.r(e/2,120),new A.r(e,0))}A.Wa.call(this,c,b)};A.bl.prototype=new A.Wa;A.bl.prototype.constructor=A.bl;
A.Kb={l:{},face:"helvetiker",Nf:"normal",style:"normal",size:150,$l:10,ku:function(){return this.l[this.face][this.Nf][this.style]},Pp:function(a){var b=a.az.toLowerCase();return this.l[b]=this.l[b]||{},this.l[b][a.Wl]=this.l[b][a.Wl]||{},this.l[b][a.Wl][a.Jt]=a,this.l[b][a.Wl][a.Jt]=a},St:function(a){for(var b=this.ku(),c=this.size/b.ek,e=0,f=(""+a).split(""),h=f.length,g=[],a=0;a<h;a++){var i=new A.Hc,i=this.Zt(f[a],b,c,e,i),e=e+i.offset;g.push(i.path)}return{iq:g,offset:e/2}},Zt:function(a,b,c,
e,f){var h=[],g,i,j,l,m,q,p,s,o,n,t,w=b.nu[a]||b.nu["?"];if(w){if(w.Bv){b=w.Ns||(w.Ns=w.Bv.split(" "));l=b.length;for(a=0;a<l;)switch(j=b[a++],j){case "m":j=b[a++]*c+e;m=b[a++]*c;h.push(new A.r(j,m));f.moveTo(j,m);break;case "l":j=b[a++]*c+e;m=b[a++]*c;h.push(new A.r(j,m));f.lineTo(j,m);break;case "q":j=b[a++]*c+e;m=b[a++]*c;s=b[a++]*c+e;o=b[a++]*c;f.quadraticCurveTo(s,o,j,m);if(g=h[h.length-1]){q=g.x;p=g.y;g=1;for(i=this.$l;g<=i;g++){var z=g/i,y=A.ja.$.Cd(z,q,s,j),z=A.ja.$.Cd(z,p,o,m);h.push(new A.r(y,
z))}}break;case "b":if(j=b[a++]*c+e,m=b[a++]*c,s=b[a++]*c+e,o=b[a++]*-c,n=b[a++]*c+e,t=b[a++]*-c,f.bezierCurveTo(j,m,s,o,n,t),g=h[h.length-1]){q=g.x;p=g.y;g=1;for(i=this.$l;g<=i;g++)z=g/i,y=A.ja.$.Dd(z,q,s,n,j),z=A.ja.$.Dd(z,p,o,t,m),h.push(new A.r(y,z))}}}return{offset:w.oz*c,P:h,path:f}}}};var De=A.Kb;function Ee(a){for(var b=a.length,c=0,e=b-1,f=0;f<b;e=f++)c+=a[e].x*a[f].y-a[f].x*a[e].y;return 0.5*c}
De.$e=function(a,b){var c=a.length;if(3>c)return u;var e=[],f=[],h=[],g,i,j;if(0<Ee(a))for(i=0;i<c;i++)f[i]=i;else for(i=0;i<c;i++)f[i]=c-1-i;var l=2*c;for(i=c-1;2<c;){if(0>=l--){console.log("Warning, unable to triangulate polygon!");break}g=i;c<=g&&(g=0);i=g+1;c<=i&&(i=0);j=i+1;c<=j&&(j=0);var m;a:{m=a;var q=g,p=i,s=j,o=c,n=f,t=d,w=d,z=d,y=d,x=d,F=d,M=d,S=d,O=d,w=m[n[q]].x,z=m[n[q]].y,y=m[n[p]].x,x=m[n[p]].y,F=m[n[s]].x,M=m[n[s]].y;if(1E-10>(y-w)*(M-z)-(x-z)*(F-w))m=v;else{for(t=0;t<o;t++)if(t!=
q&&t!=p&&t!=s){var S=m[n[t]].x,O=m[n[t]].y,G=d,B=d,N=d,U=d,X=d,T=d,R=d,I=d,J=d,k=d,da=d,D=d,G=F-y,B=M-x,N=w-F,U=z-M,X=y-w,T=x-z,R=S-w,I=O-z,J=S-y,k=O-x,da=S-F,D=O-M,G=G*k-B*J,X=X*I-T*R,N=N*D-U*da;if(0<=G&&0<=N&&0<=X){m=v;break a}}m=r}}if(m){e.push([a[f[g]],a[f[i]],a[f[j]]]);h.push([f[g],f[i],f[j]]);g=i;for(j=i+1;j<c;g++,j++)f[g]=f[j];c--;l=2*c}}return b?h:e};De.$e.jh=Ee;self.Wx={l:A.Kb.l,Pp:A.Kb.Pp};
A.Ji=function(a,b,c,e,f){A.Q.call(this);this.ra=a||100;this.Jf=b||40;this.Qb=c||8;this.gb=e||6;this.arc=f||2*Math.PI;f=new A.d;a=[];b=[];for(c=0;c<=this.Qb;c++)for(e=0;e<=this.gb;e++){var h=e/this.gb*this.arc,g=2*c/this.Qb*Math.PI;f.x=this.ra*Math.cos(h);f.y=this.ra*Math.sin(h);var i=new A.d;i.x=(this.ra+this.Jf*Math.cos(g))*Math.cos(h);i.y=(this.ra+this.Jf*Math.cos(g))*Math.sin(h);i.a=this.Jf*Math.sin(g);this.g.push(i);a.push(new A.J(e/this.gb,1-c/this.Qb));b.push(i.e().Ia(f).normalize())}for(c=
1;c<=this.Qb;c++)for(e=1;e<=this.gb;e++){var f=(this.gb+1)*c+e-1,h=(this.gb+1)*(c-1)+e-1,g=(this.gb+1)*(c-1)+e,i=(this.gb+1)*c+e,j=new A.la(f,h,g,i,[b[f],b[h],b[g],b[i]]);j.R.L(b[f]);j.R.L(b[h]);j.R.L(b[g]);j.R.L(b[i]);j.R.normalize();this.l.push(j);this.H[0].push([a[f].e(),a[h].e(),a[g].e(),a[i].e()])}Yd(this)};A.Ji.prototype=new A.Q;A.Ji.prototype.constructor=A.Ji;
A.dl=function(a,b,c,e,f,h,g){function i(a,b,c,e,f,g){var h=Math.cos(a);return b=Math.sin(a),a*=c/e,c=Math.cos(a),h*=0.5*f*(2+c),b=0.5*f*(2+c)*b,f=0.5*g*f*Math.sin(a),new A.d(h,b,f)}A.Q.call(this);this.ra=a||200;this.Jf=b||40;this.Qb=c||64;this.gb=e||8;this.jn=f||2;this.nq=h||3;this.Gp=g||1;this.qc=Array(this.Qb);c=new A.d;e=new A.d;f=new A.d;for(a=0;a<this.Qb;++a){this.qc[a]=Array(this.gb);for(b=0;b<this.gb;++b){var j=2*(a/this.Qb)*this.jn*Math.PI,g=2*(b/this.gb)*Math.PI,h=i(j,g,this.nq,this.jn,this.ra,
this.Gp),j=i(j+0.01,g,this.nq,this.jn,this.ra,this.Gp);c.sub(j,h);e.add(j,h);Pc(f,c,e);Pc(e,f,c);f.normalize();e.normalize();j=-this.Jf*Math.cos(g);g=this.Jf*Math.sin(g);h.x+=j*e.x+g*f.x;h.y+=j*e.y+g*f.y;h.a+=j*e.a+g*f.a;this.qc[a][b]=this.g.push(new A.d(h.x,h.y,h.a))-1}}for(a=0;a<this.Qb;++a)for(b=0;b<this.gb;++b){var f=(a+1)%this.Qb,h=(b+1)%this.gb,c=this.qc[a][b],e=this.qc[f][b],f=this.qc[f][h],h=this.qc[a][h],g=new A.J(a/this.Qb,b/this.gb),j=new A.J((a+1)/this.Qb,b/this.gb),l=new A.J((a+1)/this.Qb,
(b+1)/this.gb),m=new A.J(a/this.Qb,(b+1)/this.gb);this.l.push(new A.la(c,e,f,h));this.H[0].push([g,j,l,m])}Yd(this);Xd(this);Wd(this)};A.dl.prototype=new A.Q;A.dl.prototype.constructor=A.dl;
A.Vf=function(a,b,c,e,f,h){A.Q.call(this);this.path=a;this.Cf=b||64;this.ra=c||1;this.Fe=e||8;this.closed=f||v;h&&(this.debug=new A.D);this.qc=[];var g,i,h=this.Cf+1,j,l,m,q=new A.d,p,s,o,b=new A.Vf.ro(a,b,f);p=b.Vq;s=b.Oh;o=b.$i;this.Vq=p;this.Oh=s;this.$i=o;for(b=0;b<h;b++){this.qc[b]=[];e=b/(h-1);m=a.Dh(e);e=p[b];g=s[b];i=o[b];this.debug&&(this.debug.add(new A.Oe(e,m,c,255)),this.debug.add(new A.Oe(g,m,c,16711680)),this.debug.add(new A.Oe(i,m,c,65280)));for(e=0;e<this.Fe;e++)j=2*(e/this.Fe)*Math.PI,
l=-this.ra*Math.cos(j),j=this.ra*Math.sin(j),q.copy(m),q.x+=l*g.x+j*i.x,q.y+=l*g.y+j*i.y,q.a+=l*g.a+j*i.a,this.qc[b][e]=this.g.push(new A.d(q.x,q.y,q.a))-1}for(b=0;b<this.Cf;b++)for(e=0;e<this.Fe;e++)h=f?(b+1)%this.Cf:b+1,q=(e+1)%this.Fe,a=this.qc[b][e],c=this.qc[h][e],h=this.qc[h][q],q=this.qc[b][q],p=new A.J(b/this.Cf,e/this.Fe),s=new A.J((b+1)/this.Cf,e/this.Fe),o=new A.J((b+1)/this.Cf,(e+1)/this.Fe),g=new A.J(b/this.Cf,(e+1)/this.Fe),this.l.push(new A.la(a,c,h,q)),this.H[0].push([p,s,o,g]);Yd(this);
Xd(this);Wd(this)};A.Vf.prototype=new A.Q;A.Vf.prototype.constructor=A.Vf;
A.Vf.ro=function(a,b,c){var e=new A.d,f=[],h=[],g=[],i=new A.d,j=new A.M,b=b+1,l,m,q;this.Vq=f;this.Oh=h;this.$i=g;for(l=0;l<b;l++)m=l/(b-1),f[l]=a.Eh(de(a,m)),f[l].normalize();h[0]=new A.d;g[0]=new A.d;a=Number.MAX_VALUE;l=Math.abs(f[0].x);m=Math.abs(f[0].y);q=Math.abs(f[0].a);l<=a&&(a=l,e.set(1,0,0));m<=a&&(a=m,e.set(0,1,0));q<=a&&e.set(0,0,1);Pc(i,f[0],e).normalize();Pc(h[0],f[0],i);Pc(g[0],f[0],h[0]);for(l=1;l<b;l++)h[l]=h[l-1].e(),g[l]=g[l-1].e(),Pc(i,f[l-1],f[l]),1E-4<i.length()&&(i.normalize(),
e=Math.acos(f[l-1].Fa(f[l])),kd(j,i,e).V(h[l])),Pc(g[l],f[l],h[l]);if(c){e=Math.acos(h[0].Fa(h[b-1]));e/=b-1;0<f[0].Fa(Pc(i,h[0],h[b-1]))&&(e=-e);for(l=1;l<b;l++)kd(j,f[l],e*l).V(h[l]),Pc(g[l],f[l],h[l])}};
A.Tf=function(a,b,c,e){function f(a){var b=a.normalize().e();b.index=j.g.push(b)-1;var c=Math.atan2(a.a,-a.x)/2/Math.PI+0.5,a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.a*a.a))/Math.PI+0.5;return b.Ab=new A.J(c,a),b}function h(a,b,c,e){1>e?(e=new A.ga(a.index,b.index,c.index,[a.e(),b.e(),c.e()]),e.xa.L(a).L(b).L(c).pc(3),e.R=e.xa.e().normalize(),j.l.push(e),e=Math.atan2(e.xa.a,-e.xa.x),j.H[0].push([i(a.Ab,a,e),i(b.Ab,b,e),i(c.Ab,c,e)])):(e-=1,h(a,g(a,b),g(a,c),e),h(g(a,b),b,g(b,c),e),h(g(a,c),g(b,c),c,e),
h(g(a,b),g(b,c),g(a,c),e))}function g(a,b){q[a.index]||(q[a.index]=[]);q[b.index]||(q[b.index]=[]);var c=q[a.index][b.index];return c===d&&(q[a.index][b.index]=q[b.index][a.index]=c=f((new A.d).add(a,b).pc(2))),c}function i(a,b,c){return 0>c&&1===a.ia&&(a=new A.J(a.ia-1,a.Z)),0===b.x&&0===b.a&&(a=new A.J(c/2/Math.PI+0.5,a.Z)),a}A.Q.call(this);for(var c=c||1,e=e||0,j=this,l=0,m=a.length;l<m;l++)f(new A.d(a[l][0],a[l][1],a[l][2]));for(var q=[],a=this.g,l=0,m=b.length;l<m;l++)h(a[b[l][0]],a[b[l][1]],
a[b[l][2]],e);Ud(this);l=0;for(m=this.g.length;l<m;l++)this.g[l].X(c);Yd(this);this.nc={ra:c}};A.Tf.prototype=new A.Q;A.Tf.prototype.constructor=A.Tf;A.zi=function(a,b){var c=(1+Math.sqrt(5))/2;A.Tf.call(this,[[-1,c,0],[1,c,0],[-1,-c,0],[1,-c,0],[0,-1,c],[0,1,c],[0,-1,-c],[0,1,-c],[c,0,-1],[c,0,1],[-c,0,-1],[-c,0,1]],[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],a,b)};
A.zi.prototype=new A.Q;A.zi.prototype.constructor=A.zi;A.Qk=function(a,b){A.Tf.call(this,[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]],a,b)};A.Qk.prototype=new A.Q;A.Qk.prototype.constructor=A.Qk;A.al=function(a,b){A.Tf.call(this,[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],[[2,1,0],[0,3,2],[1,3,0],[2,3,1]],a,b)};A.al.prototype=new A.Q;A.al.prototype.constructor=A.al;
A.Sk=function(a,b,c,e){A.Q.call(this);var f=this.g,h=this.l,g=this.H[0],e=e===d?v:e,i,j,l,m,q=b+1;for(i=0;i<=c;i++){m=i/c;for(j=0;j<=b;j++)l=j/b,l=a(l,m),f.push(l)}var p,s,o,n;for(i=0;i<c;i++)for(j=0;j<b;j++)a=i*q+j,f=i*q+j+1,m=(i+1)*q+j,l=(i+1)*q+j+1,p=new A.J(i/b,j/c),s=new A.J(i/b,(j+1)/c),o=new A.J((i+1)/b,j/c),n=new A.J((i+1)/b,(j+1)/c),e?(h.push(new A.ga(a,f,m)),h.push(new A.ga(f,l,m)),g.push([p,s,o]),g.push([s,n,o])):(h.push(new A.la(a,f,l,m)),g.push([p,s,o,n]));Yd(this);Xd(this);Wd(this)};
A.Sk.prototype=new A.Q;A.Sk.prototype.constructor=A.Sk;
A.Ek=function(){A.D.call(this);var a=new A.Q;a.g.push(new A.d);a.g.push(new A.d(0,100,0));var b=new A.Rf(0,5,25,5,1),c;c=new A.Xa(a,new A.Ub({color:16711680}));c.rotation.a=-Math.PI/2;this.add(c);c=new A.C(b,new A.ua({color:16711680}));c.position.x=100;c.rotation.a=-Math.PI/2;this.add(c);c=new A.Xa(a,new A.Ub({color:65280}));this.add(c);c=new A.C(b,new A.ua({color:65280}));c.position.y=100;this.add(c);c=new A.Xa(a,new A.Ub({color:255}));c.rotation.x=Math.PI/2;this.add(c);c=new A.C(b,new A.ua({color:255}));
c.position.a=100;c.rotation.x=Math.PI/2;this.add(c)};A.Ek.prototype=new A.D;A.Ek.prototype.constructor=A.Ek;
A.Oe=function(a,b,c,e){A.D.call(this);e===d&&(e=16776960);c===d&&(c=20);var f=new A.Q;f.g.push(new A.d(0,0,0));f.g.push(new A.d(0,1,0));this.Pu=new A.Xa(f,new A.Ub({color:e}));this.add(this.Pu);f=new A.Rf(0,0.05,0.25,5,1);this.hp=new A.C(f,new A.ua({color:e}));this.hp.position.set(0,1,0);this.add(this.hp);b instanceof A.d&&(this.position=b);b=Oc(new A.d(0,1,0),a);a=Math.acos((new A.d(0,1,0)).Fa(a.e().normalize()));this.u=kd(new A.M,b.normalize(),a);Ec(this.rotation,this.u,this.scale);this.Yc(c)};
A.Oe.prototype=new A.D;A.Oe.prototype.constructor=A.Oe;A.Oe.prototype.Yc=function(a){this.scale.set(a,a,a)};
A.Sb=function(a){function b(a,b,e){c(a,e);c(b,e)}function c(a,b){e.vg.g.push(new A.d);e.vg.wb.push(new A.v(b));e.$j[a]===d&&(e.$j[a]=[]);e.$j[a].push(e.vg.g.length-1)}A.D.call(this);var e=this;this.vg=new A.Q;this.Qu=new A.Ub({color:16777215,m:A.Jk});this.$j={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);b("n2","f2",16755200);b("n3","f3",16755200);
b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);this.W=a;this.update(a);this.Op=new A.Xa(this.vg,this.Qu,A.uo);this.add(this.Op)};A.Sb.prototype=new A.D;A.Sb.prototype.constructor=A.Sb;
A.Sb.prototype.update=function(){function a(a,e,f,h){A.Sb.hl.set(e,f,h);A.Sb.fl.zk(A.Sb.hl,A.Sb.Go);a=b.$j[a];if(a!==d){e=0;for(f=a.length;e<f;e++)b.vg.g[a[e]].copy(A.Sb.hl)}}var b=this;A.Sb.Go.va.copy(this.W.va);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",0.7,1.1,-1);a("u2",-0.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",
1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);this.vg.Cb=r};A.Sb.fl=new A.Yg;A.Sb.hl=new A.d;A.Sb.Go=new A.fc;A.Do=function(a){this.Sw=a===d?1:a;this.VB=v;this.nB=r;this.debug=v};A.Do.prototype.constructor=A.Do;A.Wg=function(){A.D.call(this);this.p=la()};A.Wg.prototype=new A.D;A.Wg.prototype.constructor=A.Wg;A.Ve=function(a,b,c,e,f){A.D.call(this);this.Sc=[];this.c=new A.d;this.Yl=d;a!==d&&this.add(a,b,c,e,f)};A.Ve.prototype=new A.D;A.Ve.prototype.constructor=A.Ve;
A.Ve.prototype.add=function(a,b,c,e,f,h){b===d&&(b=-1);c===d&&(c=0);h===d&&(h=1);f===d&&(f=new A.v(16777215));e===d&&(e=A.Xe);c=Math.min(c,Math.max(0,c));this.Sc.push({t:a,size:b,kb:c,x:0,y:0,a:0,scale:1,rotation:1,opacity:h,color:f,wa:e})};
A.Bi=function(a,b){A.C.call(this,a,b);this.cp={};this.Al=[];var c=this.s.O.length,e=c-1,c=c/1,f=0,f={Ow:f,Xy:e,length:e-f+1,lg:c,duration:(e-f)/c,Gm:0,wh:0,Ss:v,time:0,direction:1,Nf:1,kg:v,Nj:v};this.cp.__default=f;this.Al.push(f);(e=this.cp.__default)&&(e.Nf=1)};A.Bi.prototype=new A.C;A.Bi.prototype.constructor=A.Bi;
A.Bi.prototype.update=function(a){for(var b=0,c=this.Al.length;b<c;b++){var e=this.Al[b];if(e.Ss){var f=e.duration/e.length;e.time+=e.direction*a;if(e.Nj){if(e.time>e.duration||0>e.time)e.direction*=-1,e.time>e.duration&&(e.time=e.duration,e.kg=r),0>e.time&&(e.time=0,e.kg=v)}else e.time%=e.duration,0>e.time&&(e.time+=e.duration);var h=e.Ow+A.wd.qh(Math.floor(e.time/f),0,e.length-1),g=e.Nf;h!==e.wh&&(this.Uc[e.Gm]=0,this.Uc[e.wh]=1*g,this.Uc[h]=0,e.Gm=e.wh,e.wh=h);f=e.time%f/f;e.kg&&(f=1-f);this.Uc[e.wh]=
f*g;this.Uc[e.Gm]=(1-f)*g}}};
A.Sr=function(){function a(a){var c=b.createProgram(),e=b.createShader(b.FRAGMENT_SHADER),f=b.createShader(b.VERTEX_SHADER);return b.shaderSource(e,a.A),b.shaderSource(f,a.B),b.compileShader(e),b.compileShader(f),b.attachShader(c,e),b.attachShader(c,f),b.linkProgram(c),c}var b,c,e,f,h,g,i,j,l,m,q,p,s;this.rg=function(o){b=o.ya;c=o;e=new Float32Array(16);f=new Uint16Array(6);o=0;e[o++]=-1;e[o++]=-1;e[o++]=0;e[o++]=0;e[o++]=1;e[o++]=-1;e[o++]=1;e[o++]=0;e[o++]=1;e[o++]=1;e[o++]=1;e[o++]=1;e[o++]=-1;
e[o++]=1;e[o++]=0;e[o++]=1;o=0;f[o++]=0;f[o++]=1;f[o++]=2;f[o++]=0;f[o++]=2;f[o++]=3;h=b.createBuffer();g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,h);b.bufferData(b.ARRAY_BUFFER,e,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,b.STATIC_DRAW);i=b.createTexture();j=b.createTexture();b.bindTexture(b.TEXTURE_2D,i);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,u);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,j);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,u);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);
0>=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(l=v,m=a(A.Bo.$b)):(l=r,m=a(A.Bo.Iu));q={};p={};q.pr=b.getAttribLocation(m,"position");q.Ab=b.getAttribLocation(m,"uv");p.un=b.getUniformLocation(m,"renderType");p.map=b.getUniformLocation(m,"map");p.Dv=b.getUniformLocation(m,"occlusionMap");p.opacity=b.getUniformLocation(m,"opacity");p.color=b.getUniformLocation(m,"color");p.scale=b.getUniformLocation(m,"scale");p.rotation=b.getUniformLocation(m,"rotation");p.jk=b.getUniformLocation(m,"screenPosition");
s=v};this.p=function(a,e,f,w){var a=a.kl,z=a.length;if(z){var y=new A.d,x=w/f,F=0.5*f,M=0.5*w,S=16/w,O=new A.r(S*x,S),G=new A.d(1,1,0),B=new A.r(1,1),N=p,S=q;b.useProgram(m);s||(b.enableVertexAttribArray(q.pr),b.enableVertexAttribArray(q.Ab),s=r);b.uniform1i(N.Dv,0);b.uniform1i(N.map,1);b.bindBuffer(b.ARRAY_BUFFER,h);b.vertexAttribPointer(S.pr,2,b.FLOAT,v,16,0);b.vertexAttribPointer(S.Ab,2,b.FLOAT,v,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.disable(b.CULL_FACE);b.depthMask(v);var U,X,T,R,I;for(U=
0;U<z;U++)if(S=16/w,O.set(S*x,S),R=a[U],y.set(R.G.elements[12],R.G.elements[13],R.G.elements[14]),e.Ca.V(y),e.va.V(y),G.copy(y),B.x=G.x*F+F,B.y=G.y*M+M,l||0<B.x&&B.x<f&&0<B.y&&B.y<w){b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,i);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,B.x-8,B.y-8,16,16,0);b.uniform1i(N.un,0);b.uniform2f(N.scale,O.x,O.y);b.uniform3f(N.jk,G.x,G.y,G.a);b.disable(b.BLEND);b.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,
j);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,B.x-8,B.y-8,16,16,0);b.uniform1i(N.un,1);b.disable(b.DEPTH_TEST);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,i);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);R.c.copy(G);if(R.Yl)R.Yl(R);else{X=R;T=d;I=X.Sc.length;var J=d,k=2*-X.c.x,da=2*-X.c.y;for(T=0;T<I;T++)J=X.Sc[T],J.x=X.c.x+k*J.kb,J.y=X.c.y+da*J.kb,J.kx=0.25*J.x*Math.PI,J.rotation+=0.25*(J.kx-J.rotation)}b.uniform1i(N.un,2);b.enable(b.BLEND);X=0;for(T=R.Sc.length;X<T;X++)I=R.Sc[X],0.0010<
I.opacity&&0.0010<I.scale&&(G.x=I.x,G.y=I.y,G.a=I.a,S=I.size*I.scale/w,O.x=S*x,O.y=S,b.uniform3f(N.jk,G.x,G.y,G.a),b.uniform2f(N.scale,O.x,O.y),b.uniform1f(N.rotation,I.rotation),b.uniform1f(N.opacity,I.opacity),b.uniform3f(N.color,I.color.h,I.color.i,I.color.b),c.Kg(I.wa,I.blendEquation,I.jd,I.hd),c.pk(I.t,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}b.enable(b.CULL_FACE);b.enable(b.DEPTH_TEST);b.depthMask(r)}}};
A.Zk=function(){var a,b,c,e,f=new A.Se,h=new A.M,g=new A.d,i=new A.d;this.rg=function(f){a=f.ya;b=f;var f=A.Yk.mp,g=A.Lb.e(f.n);c=new A.Za({A:f.A,B:f.B,n:g});e=new A.Za({A:f.A,B:f.B,n:g,O:r});c.Ui=r;e.Ui=r};this.p=function(a,c){b.ai&&b.Bw&&this.update(a,c)};this.update=function(j,l){var m,q,p,s,o,n,t,w,z,y=[];s=0;a.clearColor(1,1,1,1);a.disable(a.BLEND);a.enable(a.CULL_FACE);b.Jq?a.cullFace(a.FRONT):a.cullFace(a.BACK);b.Lg(r);m=0;for(q=j.jc.length;m<q;m++)if(p=j.jc[m],p.oc)if(p instanceof A.tb&&p.Hn)for(o=
0;o<p.xw;o++){var x;if(p.qk[o])x=p.qk[o];else{z=p;t=o;x=new A.tb;x.Cu=r;x.Yj=r;x.oc=r;x.$h=z.$h;x.Zh=z.Zh;x.En=z.En;x.Fn=z.Fn;x.Dn=z.Dn;x.Gn=z.Gn;x.Ge=z.Ge;x.He=z.He;x.Ng=z.Gq[t];x.di=z.Aw[t];x.bi=z.yw[t];x.lq=[];x.nn=[];w=x.lq;n=x.nn;for(var F=0;8>F;F++)w[F]=new A.d,n[F]=new A.d;w=z.Iq[t];z=z.Hq[t];n[0].set(-1,-1,w);n[1].set(1,-1,w);n[2].set(-1,1,w);n[3].set(1,1,w);n[4].set(-1,-1,z);n[5].set(1,-1,z);n[6].set(-1,1,z);n[7].set(1,1,z);x.Ov=l;n=new A.yi;n.position=p.zw;n.add(x);n.add(x.target);l.add(n);
p.qk[o]=x;console.log("Created virtualLight",x)}t=p;w=o;z=t.qk[w];z.position.copy(t.position);z.target.position.copy(t.target.position);z.oa(z.target);z.Ge=t.Ge;z.He=t.He;z.Ng=t.Gq[w];n=t.Iq[w];t=t.Hq[w];z=z.nn;z[0].a=n;z[1].a=n;z[2].a=n;z[3].a=n;z[4].a=t;z[5].a=t;z[6].a=t;z[7].a=t;y[s]=x;s++}else y[s]=p,s++;m=0;for(q=y.length;m<q;m++){p=y[m];p.Df||(p.Df=new A.fd(p.di,p.bi,{eb:A.Vb,yb:A.Vb,Ob:A.Zg}),p.ci=new A.r(p.di,p.bi),p.Ef=new A.M);if(!p.Td){if(p instanceof A.ce)p.Td=new A.Pa(p.ww,p.di/p.bi,
p.$h,p.Zh);else{if(!(p instanceof A.tb)){console.error("Unsupported light type for shadow");continue}p.Td=new A.Yd(p.En,p.Fn,p.Gn,p.Dn,p.$h,p.Zh)}j.add(p.Td);b.Cl&&j.bc()}p.Ge&&!p.nh&&(p.nh=new A.Sb(p.Td),p.Td.add(p.nh));if(p.Cu&&x.Ov==l){o=l;s=p.Td;n=p.nn;z=p.lq;g.set(Infinity,Infinity,Infinity);i.set(-Infinity,-Infinity,-Infinity);for(t=0;8>t;t++)w=z[t],w.copy(n[t]),A.Zk.fl.zk(w,o),s.Ca.V(w),w.x<g.x&&(g.x=w.x),w.x>i.x&&(i.x=w.x),w.y<g.y&&(g.y=w.y),w.y>i.y&&(i.y=w.y),w.a<g.a&&(g.a=w.a),w.a>i.a&&
(i.a=w.a);s.left=g.x;s.right=i.x;s.top=i.y;s.bottom=g.y;s.Ud()}s=p.Df;n=p.Ef;o=p.Td;o.position.copy(Rc(p.G));o.oa(Rc(p.target.G));o.bc();o.Ca.Pc(o.G);p.nh&&(p.nh.Op.visible=p.Ge);p.Ge&&p.nh.update();n.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);n.vf(o.va);n.vf(o.Ca);o.Bd||(o.Bd=new Float32Array(16));o.gd||(o.gd=new Float32Array(16));Gd(o.Ca,o.Bd);Gd(o.va,o.gd);h.multiply(o.va,o.Ca);Qc(f,h);b.ok(s);b.clear();z=j.kc;p=0;for(s=z.length;p<s;p++)t=z[p],n=t.object,t.p=v,n.visible&&n.oc&&(!(n instanceof
A.C)||!n.lf||f.contains(n))&&(n.Lc.multiply(o.Ca,n.G),t.p=r);p=0;for(s=z.length;p<s;p++)t=z[p],t.p&&(n=t.object,t=t.buffer,w=n.Xl?n.Xl:n.s.O.length?e:c,t instanceof A.Qe?b.sn(o,j.jc,u,w,t,n):b.rn(o,j.jc,u,w,t,n));z=j.fe;p=0;for(s=z.length;p<s;p++)t=z[p],n=t.object,n.visible&&n.oc&&(n.Lc.multiply(o.Ca,n.G),b.tn(o,j.jc,u,c,n))}m=b.um();q=b.tm();a.clearColor(m.h,m.i,m.b,q);a.enable(a.BLEND);b.Jq&&a.cullFace(a.BACK)}};A.Zk.fl=new A.Yg;
A.os=function(){function a(a,b){return b.a-a.a}var b,c,e,f,h,g,i,j,l,m;this.rg=function(a){b=a.ya;c=a;e=new Float32Array(16);f=new Uint16Array(6);a=0;e[a++]=-1;e[a++]=-1;e[a++]=0;e[a++]=1;e[a++]=1;e[a++]=-1;e[a++]=1;e[a++]=1;e[a++]=1;e[a++]=1;e[a++]=1;e[a++]=0;e[a++]=-1;e[a++]=1;e[a++]=0;a=e[a++]=0;f[a++]=0;f[a++]=1;f[a++]=2;f[a++]=0;f[a++]=2;f[a++]=3;h=b.createBuffer();g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,h);b.bufferData(b.ARRAY_BUFFER,e,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
g);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,b.STATIC_DRAW);var a=A.ks.Nw,p=b.createProgram(),s=b.createShader(b.FRAGMENT_SHADER),o=b.createShader(b.VERTEX_SHADER);b.shaderSource(s,a.A);b.shaderSource(o,a.B);b.compileShader(s);b.compileShader(o);b.attachShader(p,s);b.attachShader(p,o);b.linkProgram(p);i=p;j={};l={};j.position=b.getAttribLocation(i,"position");j.Ab=b.getAttribLocation(i,"uv");l.Pg=b.getUniformLocation(i,"uvOffset");l.Qg=b.getUniformLocation(i,"uvScale");l.rotation=b.getUniformLocation(i,
"rotation");l.scale=b.getUniformLocation(i,"scale");l.he=b.getUniformLocation(i,"alignment");l.color=b.getUniformLocation(i,"color");l.map=b.getUniformLocation(i,"map");l.opacity=b.getUniformLocation(i,"opacity");l.$c=b.getUniformLocation(i,"useScreenCoordinates");l.ge=b.getUniformLocation(i,"affectedByDistance");l.jk=b.getUniformLocation(i,"screenPosition");l.Xp=b.getUniformLocation(i,"modelViewMatrix");l.va=b.getUniformLocation(i,"projectionMatrix");m=v};this.p=function(e,f,s,o){var e=e.sl,n=e.length;
if(n){var t=j,w=l,z=o/s,s=0.5*s,y=0.5*o,x=r;b.useProgram(i);m||(b.enableVertexAttribArray(t.position),b.enableVertexAttribArray(t.Ab),m=r);b.disable(b.CULL_FACE);b.enable(b.BLEND);b.depthMask(r);b.bindBuffer(b.ARRAY_BUFFER,h);b.vertexAttribPointer(t.position,2,b.FLOAT,v,16,0);b.vertexAttribPointer(t.Ab,2,b.FLOAT,v,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,g);b.uniformMatrix4fv(w.va,v,f.gd);b.activeTexture(b.TEXTURE0);b.uniform1i(w.map,0);for(var F,M=[],t=0;t<n;t++)F=e[t],F.visible&&0!==F.opacity&&
(F.$c?F.a=-F.position.a:(F.Lc.multiply(f.Ca,F.G),F.a=-F.Lc.elements[14]));e.sort(a);for(t=0;t<n;t++)F=e[t],F.visible&&0!==F.opacity&&F.map&&F.map.ea&&F.map.ea.width&&(F.$c?(b.uniform1i(w.$c,1),b.uniform3f(w.jk,(F.position.x-s)/s,(y-F.position.y)/y,Math.max(0,Math.min(1,F.position.a)))):(b.uniform1i(w.$c,0),b.uniform1i(w.ge,F.ge?1:0),b.uniformMatrix4fv(w.Xp,v,F.Lc.elements)),f=F.map.ea.width/(F.Yh?o:1),M[0]=f*z*F.scale.x,M[1]=f*F.scale.y,b.uniform2f(w.Qg,F.Qg.x,F.Qg.y),b.uniform2f(w.Pg,F.Pg.x,F.Pg.y),
b.uniform2f(w.he,F.he.x,F.he.y),b.uniform1f(w.opacity,F.opacity),b.uniform3f(w.color,F.color.h,F.color.i,F.color.b),b.uniform1f(w.rotation,F.rotation),b.uniform2fv(w.scale,M),F.yg&&!x?(b.enable(b.DEPTH_TEST),x=r):!F.yg&&x&&(b.disable(b.DEPTH_TEST),x=v),c.Kg(F.wa,F.blendEquation,F.jd,F.hd),c.pk(F.map,0),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0));b.enable(b.CULL_FACE);b.enable(b.DEPTH_TEST);b.depthMask(r)}}};
A.xx=function(){this.enabled=v;this.Wh=u;var a,b,c,e,f=new A.Se,h=new A.M;this.rg=function(f){a=f.ya;b=f;var f=A.Yk.mp,h=A.Lb.e(f.n);c=new A.Za({A:f.A,B:f.B,n:h});e=new A.Za({A:f.A,B:f.B,n:h,O:r});c.Ui=r;e.Ui=r};this.p=function(a,b){this.enabled&&this.update(a,b)};this.update=function(g,i){var j,l,m,q,p,s;a.clearColor(1,1,1,1);a.disable(a.BLEND);b.Lg(r);b.Cl&&g.bc();i.Bd||(i.Bd=new Float32Array(16));i.gd||(i.gd=new Float32Array(16));i.Ca.Pc(i.G);Gd(i.Ca,i.Bd);Gd(i.va,i.gd);h.multiply(i.va,i.Ca);Qc(f,
h);b.ok(this.Wh);b.clear();s=g.kc;j=0;for(l=s.length;j<l;j++)m=s[j],p=m.object,m.p=v,p.visible&&(!(p instanceof A.C)||!p.lf||f.contains(p))&&(p.Lc.multiply(i.Ca,p.G),m.p=r);j=0;for(l=s.length;j<l;j++)m=s[j],m.p&&(p=m.object,m=m.buffer,b.Cn(p),q=p.Xl?p.Xl:p.s.O.length?e:c,m instanceof A.Qe?b.sn(i,g.jc,u,q,m,p):b.rn(i,g.jc,u,q,m,p));s=g.fe;j=0;for(l=s.length;j<l;j++)m=s[j],p=m.object,p.visible&&p.oc&&(p.Lc.multiply(i.Ca,p.G),b.tn(i,g.jc,u,c,p));j=b.um();l=b.tm();a.clearColor(j.h,j.i,j.b,l);a.enable(a.BLEND)}};
A.Bo={Iu:{B:"uniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform int renderType;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) ) +\ntexture2D( occlusionMap, vec2( 0.5, 0.1 ) ) +\ntexture2D( occlusionMap, vec2( 0.9, 0.1 ) ) +\ntexture2D( occlusionMap, vec2( 0.9, 0.5 ) ) +\ntexture2D( occlusionMap, vec2( 0.9, 0.9 ) ) +\ntexture2D( occlusionMap, vec2( 0.5, 0.9 ) ) +\ntexture2D( occlusionMap, vec2( 0.1, 0.9 ) ) +\ntexture2D( occlusionMap, vec2( 0.1, 0.5 ) ) +\ntexture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility = (       visibility.r / 9.0 ) *\n( 1.0 - visibility.g / 9.0 ) *\n(       visibility.b / 9.0 ) *\n( 1.0 - visibility.a / 9.0 );\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
A:"precision mediump float;\nuniform sampler2D map;\nuniform float opacity;\nuniform int renderType;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},$b:{B:"uniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform int renderType;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
A:"precision mediump float;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform int renderType;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a +\ntexture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a +\ntexture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a +\ntexture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};
A.ks={Nw:{B:"uniform int useScreenCoordinates;\nuniform int affectedByDistance;\nuniform vec3 screenPosition;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 alignment;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position + alignment;\nvec2 rotatedPosition;\nrotatedPosition.x = ( cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y ) * scale.x;\nrotatedPosition.y = ( sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y ) * scale.y;\nvec4 finalPosition;\nif( useScreenCoordinates != 0 ) {\nfinalPosition = vec4( screenPosition.xy + rotatedPosition, screenPosition.z, 1.0 );\n} else {\nfinalPosition = projectionMatrix * modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition * ( affectedByDistance == 1 ? 1.0 : finalPosition.z );\n}\ngl_Position = finalPosition;\n}",
A:"precision mediump float;\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n}"}};var Fe=this;define("Three",function(){return Fe.Qx});var Ge;
Ge=function(a,b){var c,e,f,h,g,i;f="undefined"!=typeof exports&&exports!==u?exports:window;if(0<a.length){i=a.split(".");h=0;for(g=i.length;h<g;h++)e=i[h],f=f[e]||(f[e]={})}h=[];for(c in b)e=b[c],h.push(f[c]=e);return h};Ge("",{nA:Ge});define("libs/namespace",la());
define("cs!core/utils/AutoReload",["socket.io"],function(){function a(){var a;"true"===this.lu("dev")&&(console.log("AutoReload init"),a=io.Id("http://localhost"),a.wA("reload",function(){return console.log("reload!"),window.location.reload(r)}))}var b=namespace,c;c=(a.prototype.lu=function(a){return decodeURI((RegExp(a+"=(.+?)(&|$)").exec(location.search)||[0,u])[1])},a);return b("Next",{zr:c})});
define("cs!core/utils/CameraManager",["Underscore","libs/namespace","Three"],function(){function a(a){this.I=a;var b=this.update,c=this;this.update=function(){return b.apply(c,arguments)};this.te=[];this.W=new A.Pa(60,window.innerWidth/window.innerHeight,1,2E4);this.ep=new A.D;this.ep.add(this.W);this.I.add(this.ep);this.Ka=this.W;this.W.position.set(0,2,200);this.W.oa(new A.d(0,1480,-3800));this.Nb=new A.Pa(60,window.innerWidth/window.innerHeight,1,2E4);this.Nb.position.set(500,2,200);this.Nb.oa(new A.d(0,
50,200));this.I.add(this.Nb);this.te.push(this.Nb);this.le=new A.Pa(60,window.innerWidth/window.innerHeight,1,2E4);this.le.position.set(100,2,200);this.le.oa(new A.d(0,30,185));this.I.add(this.le);this.te.push(this.le);this.Ed=new A.Pa(60,window.innerWidth/window.innerHeight,1,2E4);this.Ed.position.set(89,5,-250);this.Ed.oa(new A.d(0,10,-280));this.I.add(this.Ed);this.te.push(this.Ed);this.Fd=new A.Pa(60,window.innerWidth/window.innerHeight,1,2E4);this.Fd.position.set(70,2,-280);this.Fd.oa(new A.d(0,
15,-270));this.I.add(this.Fd);this.te.push(this.Fd);this.cf=new A.Pa(60,window.innerWidth/window.innerHeight,1,2E4);this.cf.position.set(110,220,-2810);this.cf.oa(new A.d(0,0,-2980));this.I.add(this.cf);this.te.push(this.cf);this.ld=new A.Pa(60,window.innerWidth/window.innerHeight,1,2E4);this.ld.position.set(160,320,-2360);this.ld.oa(new A.d(0,0,-1960));this.I.add(this.ld);this.te.push(this.ld);this.df=new A.Pa(80,window.innerWidth/window.innerHeight,1,2E4);this.df.position.set(0,250,-2180);this.df.oa(new A.d(0,
0,-2200));this.I.add(this.df);this.te.push(this.df);this.Ka=this.Nb}var b=namespace,c;c=(a.prototype.update=function(a,b,c){var g,i,j;return this.target=b,g=0,this.Nb.position.x=500-14*a,this.Nb.position.a=200-18*a+20,this.le.position.a=200-18*a+10,25<a&&(this.Ka=this.Ed),28<a&&(this.Ka=this.Fd,this.Fd.position.a=200-12*a-150),32<a&&(this.Nb.position.x=150,this.Nb.position.y=8,this.Nb.oa(this.target.position),this.Ka=this.Nb),41<a&&(this.Ka=this.le),45<a&&(this.Ka=this.Nb,this.Nb.position.y=1,this.Nb.position.x=
65,this.Nb.oa(new A.d(this.target.position.x,this.target.position.y+30,this.target.position.a+10))),49<a&&(this.Ka=this.Fd,this.Fd.position.a=200-15*a-130),53<a&&(this.Ka=this.Ed,this.Ed.position.a=-730,this.Ed.position.y=1),57<a&&(this.Ka=this.le,this.le.position.a=200-12*a-290,this.Fd.position.x=130),64<a&&(this.Ka=this.W),96<a&&(this.Ka=this.df),112<a&&120>a&&(this.Ka=this.cf,this.cf.oa(this.target.position)),120<a&&133>=a&&(this.Ka=this.ld,this.ld.position.y+=0.0020*(120-this.ld.position.y),this.df.position.a=
-2180),133<a&&(this.Ka=this.W,g=-700),this.Ka===this.W&&169>a?$("#container canvas").Us("interactive"):$("#container canvas").OA("interactive"),this.W.position.a=200-18*a+g,this.Ed.oa(this.target.position),this.df.position.a=-600-7*a,this.ld.oa(new A.d(0,0,-2100)),this.W.position.y=4+0.6*Math.sin(0.5*a),i=-0.8*c.x,j=-0.4*c.y+0.4,this.W.rotation.y+=0.2*(i-this.W.rotation.y),this.W.rotation.x+=0.2*(j-this.W.rotation.x)},a);return b("Next.utils",{Fr:c})});
A.S=function(a,b){this.Bc=a;this.pd=b;this.pd===d&&(this.uq={eb:A.Vb,yb:A.Vb,Ob:A.$g,sd:v},this.pd=new A.fd(window.innerWidth,window.innerHeight,this.uq));this.ck=this.pd.e();this.Rg=this.pd;this.Dg=this.ck;this.Af=[];this.Et=new A.Ii(A.Ze.screen)};
A.S.prototype={p:function(a){this.Rg=this.pd;this.Dg=this.ck;var b=v,c,e,f=this.Af.length;for(e=0;e<f;e++)if(c=this.Af[e],c.enabled){c.p(this.Bc,this.Rg,this.Dg,a,b);if(c.Ag){if(b){var h=this.Bc.ya;h.stencilFunc(h.NOTEQUAL,1,4294967295);this.Et.p(this.Bc,this.Rg,this.Dg,a);h.stencilFunc(h.EQUAL,1,4294967295)}h=this.Dg;this.Dg=this.Rg;this.Rg=h}c instanceof A.wo?b=r:c instanceof A.no&&(b=v)}},reset:function(a){this.pd=a;this.pd===d&&(this.pd=new A.fd(window.innerWidth,window.innerHeight,this.uq));
this.ck=this.pd.e();this.Rg=this.pd;this.Dg=this.ck;A.S.Rd.scale.set(window.innerWidth,window.innerHeight,1);A.S.W.left=window.innerWidth/-2;A.S.W.right=window.innerWidth/2;A.S.W.top=window.innerHeight/2;A.S.W.bottom=window.innerHeight/-2;A.S.W.Ud()}};A.S.W=new A.Yd(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,-1E4,1E4);A.S.s=new A.cd(1,1);
A.S.s.ih(function(){var a=new A.M,b=Math.PI/2,c=Math.cos(b),b=Math.sin(b);return a.set(1,0,0,0,0,c,-b,0,0,b,c,0,0,0,0,1),a}());A.S.Rd=new A.C(A.S.s,u);A.S.Rd.position.a=-100;A.S.Rd.scale.set(window.innerWidth,window.innerHeight,1);A.S.I=new A.ae;A.S.I.add(A.S.Rd);A.S.I.add(A.S.W);define("EffectComposer",la());A.Ao=function(a,b,c,e,f){this.I=a;this.W=b;this.Bg=c;this.clearColor=e;this.ej=f!==d?f:1;this.eq=new A.v;this.dq=1;this.clear=this.enabled=r;this.Ag=v};
A.Ao.prototype={p:function(a,b,c){this.I.Bg=this.Bg;this.clearColor&&(this.eq.copy(a.um()),this.dq=a.tm(),a.kk(this.clearColor,this.ej));a.p(this.I,this.W,c,this.clear);this.clearColor&&a.kk(this.eq,this.dq);this.I.Bg=u}};define("RenderPass",la());
A.Pe=function(a,b,c,e){var a=a!==d?a:1,b=b!==d?b:25,c=c!==d?c:4,e=e!==d?e:256,f={eb:A.Vb,yb:A.Vb,Ob:A.$g};this.vq=new A.fd(e,e,f);this.wq=new A.fd(e,e,f);e=A.Ze.screen;this.Bn=A.Lb.e(e.n);this.Bn.opacity.value=a;this.ev=new A.Za({n:this.Bn,B:e.B,A:e.A,wa:A.Jb,Ma:r});a=A.Ze.Dt;this.hf=A.Lb.e(a.n);this.hf.Zn.value=A.Pe.ly;this.hf.tt.value=A.Ze.rt(c);this.av=new A.Za({n:this.hf,B:"#define KERNEL_SIZE "+b+".0\n"+a.B,A:"#define KERNEL_SIZE "+b+"\n"+a.A});this.enabled=r;this.clear=this.Ag=v};
A.Pe.prototype={p:function(a,b,c,e,f){f&&a.ya.disable(a.ya.STENCIL_TEST);A.S.Rd.F=this.av;this.hf.Ba.t=c;this.hf.Zn.value=A.Pe.pt;a.p(A.S.I,A.S.W,this.vq,r);this.hf.Ba.t=this.vq;this.hf.Zn.value=A.Pe.qt;a.p(A.S.I,A.S.W,this.wq,r);A.S.Rd.F=this.ev;this.Bn.Ba.t=this.wq;f&&a.ya.enable(a.ya.STENCIL_TEST);a.p(A.S.I,A.S.W,c,this.clear)}};A.Pe.pt=new A.r(0.001953125,0);A.Pe.qt=new A.r(0,0.001953125);define("BloomPass",la());
A.po=function(a,b,c,e){var f=A.Ze.cu;this.n=A.Lb.e(f.n);this.F=new A.Za({n:this.n,B:f.B,A:f.A});e!==d&&(this.n.ou.value=e);a!==d&&(this.n.tv.value=a);b!==d&&(this.n.sw.value=b);c!==d&&(this.n.rw.value=c);this.enabled=r;this.dk=v;this.Ag=r};A.po.prototype={p:function(a,b,c,e){this.n.Ba.t=c;this.n.time.value+=e;A.S.Rd.F=this.F;this.dk?a.p(A.S.I,A.S.W):a.p(A.S.I,A.S.W,b,v)}};define("FilmPass",la());
A.us=function(a,b){var c=A.Ze.screen;this.n=A.Lb.e(c.n);this.n.opacity.value=b!==d?b:1;this.n.Ba.t=a;this.F=new A.Za({n:this.n,B:c.B,A:c.A});this.enabled=r;this.Ag=v};A.us.prototype={p:function(a,b,c){A.S.Rd.F=this.F;a.p(A.S.I,A.S.W,c)}};define("TexturePass",la());A.Ii=function(a,b){this.Wq=b!==d?b:"tDiffuse";this.n=A.Lb.e(a.n);this.F=new A.Za({n:this.n,B:a.B,A:a.A});this.dk=v;this.Ag=this.enabled=r;this.clear=v};
A.Ii.prototype={p:function(a,b,c){this.n[this.Wq]&&(this.n[this.Wq].t=c);A.S.Rd.F=this.F;this.dk?a.p(A.S.I,A.S.W):a.p(A.S.I,A.S.W,b,this.clear)}};define("ShaderPass",la());A.wo=function(a,b){this.I=a;this.W=b;this.clear=this.enabled=r;this.inverse=this.Ag=v};
A.wo.prototype={p:function(a,b,c){var e=a.ya;e.colorMask(v,v,v,v);e.depthMask(v);var f,h;this.inverse?(f=0,h=1):(f=1,h=0);e.enable(e.STENCIL_TEST);e.stencilOp(e.REPLACE,e.REPLACE,e.REPLACE);e.stencilFunc(e.ALWAYS,f,4294967295);e.clearStencil(h);a.p(this.I,this.W,c,this.clear);a.p(this.I,this.W,b,this.clear);e.colorMask(r,r,r,r);e.depthMask(r);e.stencilFunc(e.EQUAL,1,4294967295);e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}};A.no=function(){this.enabled=r};A.no.prototype={p:function(a){a=a.ya;a.disable(a.STENCIL_TEST)}};
define("MaskPass",la());
A.Ze={screen:{n:{Ba:{type:"t",value:0,t:u},opacity:{type:"f",value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel = texture2D( tDiffuse, vUv );\ngl_FragColor = opacity * texel;\n}"},Dt:{n:{Ba:{type:"t",value:0,t:u},Zn:{type:"v2",value:new A.r(0.001953125,0)},tt:{type:"fv1",value:[]}},B:"uniform vec2 uImageIncrement;\nvarying vec2 vUv;\nvoid main() {\nvUv = uv - ( ( KERNEL_SIZE - 1.0 ) / 2.0 ) * uImageIncrement;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
A:"uniform float cKernel[ KERNEL_SIZE ];\nuniform sampler2D tDiffuse;\nuniform vec2 uImageIncrement;\nvarying vec2 vUv;\nvoid main() {\nvec2 imageCoord = vUv;\nvec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );\nfor( int i = 0; i < KERNEL_SIZE; i ++ ) {\nsum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];\nimageCoord += uImageIncrement;\n}\ngl_FragColor = sum;\n}"},cu:{n:{Ba:{type:"t",value:0,t:u},time:{type:"f",value:0},tv:{type:"f",value:0.5},sw:{type:"f",value:0.05},rw:{type:"f",value:4096},ou:{type:"i",
value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float time;\nuniform bool grayscale;\nuniform float nIntensity;\nuniform float sIntensity;\nuniform float sCount;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 cTextureScreen = texture2D( tDiffuse, vUv );\nfloat x = vUv.x * vUv.y * time *  1000.0;\nx = mod( x, 13.0 ) * mod( x, 123.0 );\nfloat dx = mod( x, 0.01 );\nvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );\nvec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );\ncResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;\ncResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\nif( grayscale ) {\ncResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );\n}\ngl_FragColor =  vec4( cResult, cTextureScreen.a );\n}"},
my:{n:{Tw:{type:"t",value:0,t:u},Qq:{type:"t",value:1,t:u},focus:{type:"f",value:1},cg:{type:"f",value:1},ay:{type:"f",value:0.025},iv:{type:"f",value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"varying vec2 vUv;\nuniform sampler2D tColor;\nuniform sampler2D tDepth;\nuniform float maxblur;\nuniform float aperture;\nuniform float focus;\nuniform float aspect;\nvoid main() {\nvec2 aspectcorrect = vec2( 1.0, aspect );\nvec4 depth1 = texture2D( tDepth, vUv );\nfloat factor = depth1.x - focus;\nvec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );\nvec2 dofblur9 = dofblur * 0.9;\nvec2 dofblur7 = dofblur * 0.7;\nvec2 dofblur4 = dofblur * 0.4;\nvec4 col = vec4( 0.0 );\ncol += texture2D( tColor, vUv.xy );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\ncol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\ncol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );\ngl_FragColor = col / 41.0;\ngl_FragColor.a = 1.0;\n}"},
Ty:{n:{Tw:{type:"t",value:0,t:u},Qq:{type:"t",value:1,t:u},focus:{type:"f",value:1},iv:{type:"f",value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float focus;\nuniform float maxblur;\nuniform sampler2D tColor;\nuniform sampler2D tDepth;\nvarying vec2 vUv;\nvoid main() {\nvec4 depth = texture2D( tDepth, vUv );\nfloat factor = depth.x - focus;\nvec4 col = texture2D( tColor, vUv, 2.0 * maxblur * abs( focus - depth.x ) );\ngl_FragColor = col;\ngl_FragColor.a = 1.0;\n}"},
WA:{n:{Ba:{type:"t",value:0,t:u},yl:{type:"f",value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float amount;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 color = texture2D( tDiffuse, vUv );\nvec3 c = color.rgb;\ncolor.r = dot( c, vec3( 1.0 - 0.607 * amount, 0.769 * amount, 0.189 * amount ) );\ncolor.g = dot( c, vec3( 0.349 * amount, 1.0 - 0.314 * amount, 0.168 * amount ) );\ncolor.b = dot( c, vec3( 0.272 * amount, 0.534 * amount, 1.0 - 0.869 * amount ) );\ngl_FragColor = vec4( min( vec3( 1.0 ), color.rgb ), color.a );\n}"},
Uy:{n:{Ba:{type:"t",value:0,t:u},uB:{type:"v2",value:new A.r(256,256)},Ll:{type:"v2",value:new A.r(0.5,0.5)},ap:{type:"f",value:1.57},scale:{type:"f",value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform vec2 center;\nuniform float angle;\nuniform float scale;\nuniform vec2 tSize;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nfloat pattern() {\nfloat s = sin( angle ), c = cos( angle );\nvec2 tex = vUv * tSize - center;\nvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\nreturn ( sin( point.x ) * sin( point.y ) ) * 4.0;\n}\nvoid main() {\nvec4 color = texture2D( tDiffuse, vUv );\nfloat average = ( color.r + color.g + color.b ) / 3.0;\ngl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );\n}"},
jx:{n:{Ba:{type:"t",value:0,t:u},offset:{type:"f",value:1},Lt:{type:"f",value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float offset;\nuniform float darkness;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel = texture2D( tDiffuse, vUv );\nvec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );\ngl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );\n}"},
jy:{n:{Ba:{type:"t",value:0,t:u},opacity:{type:"f",value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 base = texture2D( tDiffuse, vUv );\nvec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );\nfloat lum = dot( lumCoeff, base.rgb );\nvec3 blend = vec3( lum );\nfloat L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );\nvec3 result1 = 2.0 * base.rgb * blend;\nvec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );\nvec3 newColor = mix( result1, result2, L );\nfloat A2 = opacity * base.a;\nvec3 mixRGB = A2 * newColor.rgb;\nmixRGB += ( ( 1.0 - A2 ) * base.rgb );\ngl_FragColor = vec4( mixRGB, base.a );\n}"},
focus:{n:{Ba:{type:"t",value:0,t:u},UA:{type:"f",value:1024},TA:{type:"f",value:1024},RA:{type:"f",value:0.94},eC:{type:"f",value:0.00125}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float screenWidth;\nuniform float screenHeight;\nuniform float sampleDistance;\nuniform float waveFactor;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 color, org, tmp, add;\nfloat sample_dist, f;\nvec2 vin;\nvec2 uv = vUv;\nadd = color = org = texture2D( tDiffuse, uv );\nvin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );\nsample_dist = dot( vin, vin ) * 2.0;\nf = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;\nvec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );\nadd += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );\nif( tmp.b < color.b ) color = tmp;\nadd += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );\nif( tmp.b < color.b ) color = tmp;\nadd += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );\nif( tmp.b < color.b ) color = tmp;\nadd += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );\nif( tmp.b < color.b ) color = tmp;\nadd += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );\nif( tmp.b < color.b ) color = tmp;\nadd += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );\nif( tmp.b < color.b ) color = tmp;\nadd += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );\nif( tmp.b < color.b ) color = tmp;\ncolor = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );\ncolor = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );\ngl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );\n}"},
HB:{n:{t:{type:"t",value:0,t:u},Py:{type:"v2",value:new A.r(1,1)}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"#define ITERATIONS 10.0\nuniform sampler2D texture;\nuniform vec2 delta;\nvarying vec2 vUv;\nfloat random( vec3 scale, float seed ) {\nreturn fract( sin( dot( gl_FragCoord.xyz + seed, scale ) ) * 43758.5453 + seed );\n}\nvoid main() {\nvec4 color = vec4( 0.0 );\nfloat total = 0.0;\nfloat offset = random( vec3( 12.9898, 78.233, 151.7182 ), 0.0 );\nfor ( float t = -ITERATIONS; t <= ITERATIONS; t ++ ) {\nfloat percent = ( t + offset - 0.5 ) / ITERATIONS;\nfloat weight = 1.0 - abs( percent );\ncolor += texture2D( texture, vUv + delta * percent ) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}"},
mt:{n:{},B:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"void main() {\ngl_FragColor = vec4( 1.0, 0.0, 0.0, 0.5 );\n}"},xz:{n:{Ba:{type:"t",value:0,t:u},of:{type:"f",value:1/512}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform sampler2D tDiffuse;\nuniform float h;\nvarying vec2 vUv;\nvoid main() {\nvec4 sum = vec4( 0.0 );\nsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\nsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x, \t\t  \tvUv.y ) ) * 0.1633;\nsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\ngl_FragColor = sum;\n}"},
cC:{n:{Ba:{type:"t",value:0,t:u},Z:{type:"f",value:1/512}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform sampler2D tDiffuse;\nuniform float v;\nvarying vec2 vUv;\nvoid main() {\nvec4 sum = vec4( 0.0 );\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y\t\t\t  ) ) * 0.1633;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\ngl_FragColor = sum;\n}"},
yz:{n:{Ba:{type:"t",value:0,t:u},of:{type:"f",value:1/512},h:{type:"f",value:0.35}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform sampler2D tDiffuse;\nuniform float h;\nuniform float r;\nvarying vec2 vUv;\nvoid main() {\nvec4 sum = vec4( 0.0 );\nfloat hh = h * abs( r - vUv.y );\nsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * hh, vUv.y ) ) * 0.051;\nsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * hh, vUv.y ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * hh, vUv.y ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * hh, vUv.y ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x, \t\t  \t vUv.y ) ) * 0.1633;\nsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * hh, vUv.y ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * hh, vUv.y ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * hh, vUv.y ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * hh, vUv.y ) ) * 0.051;\ngl_FragColor = sum;\n}"},
dC:{n:{Ba:{type:"t",value:0,t:u},Z:{type:"f",value:1/512},h:{type:"f",value:0.35}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform sampler2D tDiffuse;\nuniform float v;\nuniform float r;\nvarying vec2 vUv;\nvoid main() {\nvec4 sum = vec4( 0.0 );\nfloat vv = v * abs( r - vUv.y );\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * vv ) ) * 0.051;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * vv ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * vv ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * vv ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y\t\t\t   ) ) * 0.1633;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * vv ) ) * 0.1531;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * vv ) ) * 0.12245;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * vv ) ) * 0.0918;\nsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * vv ) ) * 0.051;\ngl_FragColor = sum;\n}"},
ky:{n:{qB:{type:"t",value:0,t:u},rB:{type:"t",value:1,t:u},kA:{type:"f",value:0.5},opacity:{type:"f",value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float opacity;\nuniform float mixRatio;\nuniform sampler2D tDiffuse1;\nuniform sampler2D tDiffuse2;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel1 = texture2D( tDiffuse1, vUv );\nvec4 texel2 = texture2D( tDiffuse2, vUv );\ngl_FragColor = opacity * mix( texel1, texel2, mixRatio );\n}"},
iz:{n:{Ba:{type:"t",value:0,t:u},ek:{type:"v2",value:new A.r(1/1024,1/512)}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvarying vec2 vUv;\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n#define FXAA_REDUCE_MUL   (1.0/8.0)\n#define FXAA_SPAN_MAX     8.0\nvoid main() {\nvec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;\nvec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;\nvec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;\nvec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;\nvec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );\nvec3 rgbM  = rgbaM.xyz;\nfloat opacity  = rgbaM.w;\nvec3 luma = vec3( 0.299, 0.587, 0.114 );\nfloat lumaNW = dot( rgbNW, luma );\nfloat lumaNE = dot( rgbNE, luma );\nfloat lumaSW = dot( rgbSW, luma );\nfloat lumaSE = dot( rgbSE, luma );\nfloat lumaM  = dot( rgbM,  luma );\nfloat lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\nfloat lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\nvec2 dir;\ndir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\ndir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\nfloat dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\nfloat rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\ndir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\nmax( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\ndir * rcpDirMin)) * resolution;\nvec3 rgbA = 0.5 * (\ntexture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz +\ntexture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz );\nvec3 rgbB = rgbA * 0.5 + 0.25 * (\ntexture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * -0.5 ).xyz +\ntexture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * 0.5 ).xyz );\nfloat lumaB = dot( rgbB, luma );\nif ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {\ngl_FragColor = vec4( rgbA, opacity );\n} else {\ngl_FragColor = vec4( rgbB, opacity );\n}\n}"},
Qz:{n:{Ba:{type:"t",value:0,t:u}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel = texture2D( tDiffuse, vUv );\nvec3 luma = vec3( 0.299, 0.587, 0.114 );\nfloat v = dot( texel.xyz, luma );\ngl_FragColor = vec4( v, v, v, texel.w );\n}"},Cy:{n:{Ba:{type:"t",value:0,t:u},EA:{type:"v3",value:new A.d(2,2,2)},lA:{type:"v3",value:new A.d(1,
1,1)}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform sampler2D tDiffuse;\nuniform vec3 powRGB;\nuniform vec3 mulRGB;\nvarying vec2 vUv;\nvoid main() {\ngl_FragColor = texture2D( tDiffuse, vUv );\ngl_FragColor.rgb = mulRGB * pow( gl_FragColor.rgb, powRGB );\n}"},sA:{n:{rz:{type:"t",value:0,t:u},ek:{type:"v2",value:new A.r(512,512)},scale:{type:"v2",value:new A.r(1,1)},height:{type:"f",value:0.05}},
B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float height;\nuniform vec2 resolution;\nuniform sampler2D heightMap;\nvarying vec2 vUv;\nvoid main() {\nfloat val = texture2D( heightMap, vUv ).x;\nfloat valU = texture2D( heightMap, vUv + vec2( 1.0 / resolution.x, 0.0 ) ).x;\nfloat valV = texture2D( heightMap, vUv + vec2( 0.0, 1.0 / resolution.y ) ).x;\ngl_FragColor = vec4( ( 0.5 * normalize( vec3( val - valU, val - valV, height  ) ) + 0.5 ), 1.0 );\n}"},
mB:{n:{Ba:{type:"t",value:0,t:u},Qq:{type:"t",value:1,t:u},size:{type:"v2",value:new A.r(512,512)},wy:{type:"f",value:1},vy:{type:"f",value:100},pm:{type:"f",value:5},om:{type:"f",value:100},dz:{type:"i",value:0},yA:{type:"i",value:0},$x:{type:"f",value:0.3},Pz:{type:"f",value:0.9}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float cameraNear;\nuniform float cameraFar;\nuniform float fogNear;\nuniform float fogFar;\nuniform bool fogEnabled;\nuniform bool onlyAO;\nuniform vec2 size;\nuniform float aoClamp;\nuniform float lumInfluence;\nuniform sampler2D tDiffuse;\nuniform sampler2D tDepth;\nvarying vec2 vUv;\n#define DL 2.399963229728653\n#define EULER 2.718281828459045\nfloat width = size.x;\nfloat height = size.y;\nfloat cameraFarPlusNear = cameraFar + cameraNear;\nfloat cameraFarMinusNear = cameraFar - cameraNear;\nfloat cameraCoef = 2.0 * cameraNear;\nconst int samples = 8;\nconst float radius = 5.0;\nconst bool useNoise = false;\nconst float noiseAmount = 0.0003;\nconst float diffArea = 0.4;\nconst float gDisplace = 0.4;\nconst vec3 onlyAOColor = vec3( 1.0, 0.7, 0.5 );\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\nvec2 rand( const vec2 coord ) {\nvec2 noise;\nif ( useNoise ) {\nfloat nx = dot ( coord, vec2( 12.9898, 78.233 ) );\nfloat ny = dot ( coord, vec2( 12.9898, 78.233 ) * 2.0 );\nnoise = clamp( fract ( 43758.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );\n} else {\nfloat ff = fract( 1.0 - coord.s * ( width / 2.0 ) );\nfloat gg = fract( coord.t * ( height / 2.0 ) );\nnoise = vec2( 0.25, 0.75 ) * vec2( ff ) + vec2( 0.75, 0.25 ) * gg;\n}\nreturn ( noise * 2.0  - 1.0 ) * noiseAmount;\n}\nfloat doFog() {\nfloat zdepth = unpackDepth( texture2D( tDepth, vUv ) );\nfloat depth = -cameraFar * cameraNear / ( zdepth * cameraFarMinusNear - cameraFar );\nreturn smoothstep( fogNear, fogFar, depth );\n}\nfloat readDepth( const in vec2 coord ) {\nreturn cameraCoef / ( cameraFarPlusNear - unpackDepth( texture2D( tDepth, coord ) ) * cameraFarMinusNear );\n}\nfloat compareDepths( const in float depth1, const in float depth2, inout int far ) {\nfloat garea = 2.0;\nfloat diff = ( depth1 - depth2 ) * 100.0;\nif ( diff < gDisplace ) {\ngarea = diffArea;\n} else {\nfar = 1;\n}\nfloat dd = diff - gDisplace;\nfloat gauss = pow( EULER, -2.0 * dd * dd / ( garea * garea ) );\nreturn gauss;\n}\nfloat calcAO( float depth, float dw, float dh ) {\nfloat dd = radius - depth * radius;\nvec2 vv = vec2( dw, dh );\nvec2 coord1 = vUv + dd * vv;\nvec2 coord2 = vUv - dd * vv;\nfloat temp1 = 0.0;\nfloat temp2 = 0.0;\nint far = 0;\ntemp1 = compareDepths( depth, readDepth( coord1 ), far );\nif ( far > 0 ) {\ntemp2 = compareDepths( readDepth( coord2 ), depth, far );\ntemp1 += ( 1.0 - temp1 ) * temp2;\n}\nreturn temp1;\n}\nvoid main() {\nvec2 noise = rand( vUv );\nfloat depth = readDepth( vUv );\nfloat tt = clamp( depth, aoClamp, 1.0 );\nfloat w = ( 1.0 / width )  / tt + ( noise.x * ( 1.0 - noise.x ) );\nfloat h = ( 1.0 / height ) / tt + ( noise.y * ( 1.0 - noise.y ) );\nfloat pw;\nfloat ph;\nfloat ao;\nfloat dz = 1.0 / float( samples );\nfloat z = 1.0 - dz / 2.0;\nfloat l = 0.0;\nfor ( int i = 0; i <= samples; i ++ ) {\nfloat r = sqrt( 1.0 - z );\npw = cos( l ) * r;\nph = sin( l ) * r;\nao += calcAO( depth, pw * w, ph * h );\nz = z - dz;\nl = l + DL;\n}\nao /= float( samples );\nao = 1.0 - ao;\nif ( fogEnabled ) {\nao = mix( ao, 1.0, doFog() );\n}\nvec3 color = texture2D( tDiffuse, vUv ).rgb;\nvec3 lumcoeff = vec3( 0.299, 0.587, 0.114 );\nfloat lum = dot( color.rgb, lumcoeff );\nvec3 luminance = vec3( lum );\nvec3 final = vec3( color * mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );\nif ( onlyAO ) {\nfinal = onlyAOColor * vec3( mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );\n}\ngl_FragColor = vec4( final, 1.0 );\n}"},
Dy:{n:{Ba:{type:"t",value:0,t:u},color:{type:"c",value:new A.v(16777215)}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform vec3 color;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel = texture2D( tDiffuse, vUv );\nvec3 luma = vec3( 0.299, 0.587, 0.114 );\nfloat v = dot( texel.xyz, luma );\ngl_FragColor = vec4( v * color, texel.w );\n}"},SB:{n:{Ba:{type:"t",value:0,
t:u},opacity:{type:"f",value:1}},B:"varying vec2 vUv;\nvoid main() {\nvUv = vec2( uv.x, 1.0 - uv.y );\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",A:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\nvoid main() {\nfloat depth = 1.0 - unpackDepth( texture2D( tDiffuse, vUv ) );\ngl_FragColor = opacity * vec4( vec3( depth ), 1.0 );\n}"},
rt:function(a){var b,c,e,f,h=2*Math.ceil(3*a)+1;25<h&&(h=25);f=0.5*(h-1);c=Array(h);for(b=e=0;b<h;++b)c[b]=Math.exp(-((b-f)*(b-f))/(2*a*a)),e+=c[b];for(b=0;b<h;++b)c[b]/=e;return c}};define("ShaderExtras",la());function He(a,b){return function(){return a.apply(b,arguments)}}
define("cs!core/utils/ThreeApp","Underscore libs/namespace cs!core/utils/AutoReload cs!core/utils/CameraManager Three EffectComposer RenderPass BloomPass FilmPass TexturePass ShaderPass MaskPass ShaderExtras".split(" "),function(){function a(){this.Wj=He(this.Wj,this);this.p=He(this.p,this);this.Xi=He(this.Xi,this);this.Og=He(this.Og,this);this.hg=He(this.hg,this);this.Ql=He(this.Ql,this);this.Rl=He(this.Rl,this);this.Sl=He(this.Sl,this);this.on=He(this.on,this);this.mm=v;this.on();this.Wj();this.Xi()}
var b=namespace,c;c=(a.prototype.on=function(){var a=this;return new Next.zr,this.fj=new A.Gk,this.I=new A.ae,this.Ql(),this.Rl(),this.hg(),this.Sl(),$(window).bind("resize",function(){return a.Wj()})},a.prototype.Sl=function(){var a,b;$("body").append("<div id='container'></div>");this.Ct=$("#container")[0];this.Bc=new A.Fo({clearColor:Next.Fq.backgroundColor,ej:1,antialias:v});this.Bc.Mg(window.innerWidth,window.innerHeight);this.Bc.dg=v;this.Ct.appendChild(this.Bc.K);if(Next.Fq.Vv===r){this.rq=
new A.Ao(this.I,this.jb.Ka);this.Tt=new A.Pe(1.3);this.Ut=new A.po(0.51,0.135,648,v);this.fm=new A.Ii(A.Ze.jx);this.fm.n.Lt.value=1.6;a={eb:A.Vb,yb:A.Vb,Ob:A.Zg,sd:v};this.Wh=new A.fd(window.innerWidth,window.innerHeight,a);this.Hd=new A.S(this.Bc,this.Wh);this.Hd.Af.push(this.rq);this.Hd.Af.push(this.Tt);this.Hd.Af.push(this.Ut);a=A.vd.ue("textures/lens_dirt.jpg");b=A.vd.ue("textures/glitch3.jpg");this.ve=new A.Ii(Next.aB.Nr);this.ve.F.n.Vw.t=a;this.ve.F.n.Uw.t=b;this.Hd.Af.push(this.ve);this.Hd.Af.push(this.fm);
return this.fm.dk=r}},a.prototype.Rl=function(){return this.np=new A.tb(16777215,1.15),this.np.position.set(500,1E3,0),this.I.add(this.np)},a.prototype.Ql=function(){return this.jb=new Next.Ec.Fr(this.I)},a.prototype.hg=Ba(v),a.prototype.Og=Ba(v),a.prototype.Xi=function(){var a,b;a=Cb(this.fj);b=(this.fj.elapsedTime=this.fj.elapsedTime+Cb(this.fj))*10;this.Og(b,a);this.p(b,a);if(this.mm===v)return requestAnimationFrame(this.Xi)},a.prototype.p=function(a,b){return this.Bc.clear(),this.Hd?this.Hd.p(b):
this.Bc.p(this.I,this.jb.Ka)},a.prototype.Wj=function(){var a,b,c,g,i;b=window.innerWidth/window.innerHeight;i=this.jb.te;c=0;for(g=i.length;c<g;c++){a=i[c];a.cg=b;a.Ud()}this.Bc.Mg(window.innerWidth,window.innerHeight);if(this.Hd)return this.Hd.reset()},a);return b("Next",{vs:c})});function Ie(a,b){return function(){return a.apply(b,arguments)}}
define("cs!core/objects/BuildingBlock",["Underscore","libs/namespace","Three"],function(){function a(a,b,c,g,i,j){var l,m;this.T=a;this.F=b;this.uh=c;this.nb=g;this.random=i;this.ne=j;this.nk=Ie(this.nk,this);this.mk=Ie(this.mk,this);this.vh=parseInt(100+100*this.random.za());this.ig=parseInt(100+100*this.random.za());this.pj=parseInt(50+200*this.random.za());this.gg=new A.Q;l=new A.sc(this.vh,this.pj,this.ig,1,1,1,this.T);this.nk(l);this.mk(l);this.object=new A.C(l,this.F);this.object.position.y=
this.pj/2;A.ka.mb(this.gg,this.object);b=this.pj/2;c=this.vh;a=this.ig;j=new A.C(this.uh,this.F);j.scale.set(1.01*this.vh,2+10*this.random.za(),1.01*this.ig);j.position.y=this.pj;A.ka.mb(this.gg,j);if(0.7<this.random.za()){g=0;for(i=parseInt(2*this.random.za());0<=i?g<=i:g>=i;0<=i?++g:--g)j=parseInt(50+200*this.random.za()),c*=0.5*this.random.za()+0.5,a*=0.5*this.random.za()+0.5,l=new A.sc(c,j,a,1,1,1,this.T),this.nk(l),this.mk(l),l=new A.C(l,this.F),l.position.y=j/2+b,A.ka.mb(this.gg,l),b+=j,j=new A.C(this.uh,
this.F),j.scale.set(1.01*c,2+10*this.random.za(),1.01*a),j.position.y=b,A.ka.mb(this.gg,j)}this.ne===r&&(this.Vh=new A.C(this.nb,this.T[2]),m=0.5*this.random.za(),this.Vh.scale.set(1.3*this.vh+m,1,1.3*this.ig+m),this.Vh.position.y=this.random.za()+0.1,A.ka.mb(this.gg,ref));this.sf=new A.C(this.gg,this.F)}var b=namespace,c;c=(a.prototype.mk=function(a){return a.l[0].pa=0,a.l[1].pa=0,a.l[2].pa=1,a.l[3].pa=1,a.l[4].pa=0,a.l[5].pa=0},a.prototype.nk=function(a){var b,c,g,i,j;c=Math.random();g=Math.random();
j=[];for(b=i=0;5>=i;b=++i)a.H[0][b][0].ia=c,a.H[0][b][0].Z=g,a.H[0][b][1].ia=c,a.H[0][b][1].Z=0.4+g,a.H[0][b][2].ia=0.4+c,a.H[0][b][2].Z=0.4+g,a.H[0][b][3].ia=0.4+c,j.push(a.H[0][b][3].Z=g);return j},a);return b("Next.objects",{Cr:c})});function Je(a,b){return function(){return a.apply(b,arguments)}}
define("cs!core/utils/Rc4Random",["libs/namespace"],function(){function a(a){this.za=Je(this.za,this);this.xm=Je(this.xm,this);var b,c,g,i;this.Zb=[];for(b=c=this.Gh=this.sg=0;255>=c;b=++c)this.Zb[b]=b;for(b=i=c=0;255>=i;b=++i)c=(c+this.Zb[b]+a.charCodeAt(b%a.length))%256,g=this.Zb[b],this.Zb[b]=this.Zb[c],this.Zb[c]=g}var b=namespace,c;c=(a.prototype.xm=function(){var a;return this.sg=(this.sg+1)%256,this.Gh=(this.Gh+this.Zb[this.sg])%256,a=this.Zb[this.sg],this.Zb[this.sg]=this.Zb[this.Gh],this.Zb[this.Gh]=
a,this.Zb[(this.Zb[this.sg]+this.Zb[this.Gh])%256]},a.prototype.za=function(){var a,b,c;b=0;a=1;for(c=0;7>=c;++c)b+=this.xm()*a,a*=256;return b/1.8446744073709552E19},a);return b("Next.utils",{ah:c})});function Ke(a,b){return function(){return a.apply(b,arguments)}}var Le={}.hasOwnProperty;
define("cs!core/objects/Buildings",["Underscore","libs/namespace","cs!core/objects/BuildingBlock","cs!core/utils/Rc4Random","Three"],function(){function a(){this.constructor=f}function b(){this.createTexture=Ke(this.createTexture,this);this.cm=Ke(this.cm,this);this.Tl=Ke(this.Tl,this);this.fk=Ke(this.fk,this);this.wn=Ke(this.wn,this);this.Ul=Ke(this.Ul,this);this.nj=Ke(this.nj,this);this.update=Ke(this.update,this);this.bo=Ke(this.bo,this);var a,c,e,f;b.ub.constructor.apply(this,arguments);this.Ph=
60;this.ac=1;this.Fc=[];this.ne=v;this.random=new Next.Ec.ah("Lorem ipusm dolor sit amet.");this.dw=new Next.Ec.ah("rBPvyBA1MUhvJVT4kNH6sLsAz6dRfwL6");this.oq=new Next.Ec.ah("6s13LsAz6drBPvsdfayBAJVT4kNHRfwL1MUhv6");this.Ul();this.dp=new A.Q;this.ne===r&&(this.qq=new A.Q);this.uh=new A.sc(1,1,1,1,1,1,this.T);f=this.uh.l;a=c=0;for(e=f.length;c<e;a=++c)a=f[a],a.pa=1;this.ne===r&&(this.nb=new A.cd(1,1,1,1),this.nb.T=this.T,this.nb.l[0].pa=2);for(c=e=this.st=0;10>=e;c=++e)this.nj(220*c+135,c);for(c=e=
0;10>=e;c=++e)this.nj(-220*c-290,c);this.mh=new A.C(this.dp,this.F);this.add(this.mh);this.ne===r&&(this.gw=new A.C(this.qq,this.pq),this.add(this.gw))}var c=namespace,e,f=b;e=A.D;for(var h in e)Le.call(e,h)&&(f[h]=e[h]);a.prototype=e.prototype;f.prototype=new a;f.ub=e.prototype;e=(b.prototype.bo=function(a,b,c){var e,f,h,p,s;if(-1!==this.Fc[a][b])return this.Fc[a][b]*=0.98,0.05>=this.Fc[a][b]&&(this.Fc[a][b]=0),c&&0===this.Fc[a][b]&&0.4>Math.random()&&(this.Fc[a][b]=1),e=1-this.Fc[a][b],p=this.ac+
a*(this.Le+this.ac)-1,s=b*(this.Le+this.ac)-1,h=this.Le+2-this.ac,f=this.Le+2-this.ac,this.lj.fillStyle="rgba(0, 0, 0, "+e+")",this.lj.fillRect(p,s,h,f)},b.prototype.update=function(a){var b,c,e,f,h;if(window.wz!==v){this.lj.drawImage(this.canvas,0,0);this.t.Aa=r;h=[];b=e=0;for(f=this.Ph-1;0<=f?e<=f:e>=f;b=0<=f?++e:--e)h.push(function(){var e,f,h;h=[];c=e=0;for(f=this.Ph-1;0<=f?e<=f:e>=f;c=0<=f?++e:--e)h.push(this.bo(b,c,a));return h}.call(this));return h}},b.prototype.nj=function(a,b){var c,e,f,
h,p;e=-2E3;0<a&&(e=-1640);p=[];for(f=h=0;40>=h;f=++h)3>b||3>f||37<f?(c=new Next.qa.Cr(this.T,this.F,this.uh,this.nb,this.dw,this.ne),c.sf.position.x=parseInt(0-c.vh/2-a+30*this.random.za()),0===a&&0.4>this.random.za()&&(c.sf.position.x*=50*this.random.za()),e+=c.ig/2,c.sf.position.a=e,e+=parseInt(c.ig/2+10+20*this.random.za()),A.ka.mb(this.dp,c.sf),this.ne===r&&(c.Vh.position.x=c.sf.position.x,c.Vh.position.a=c.sf.position.a,A.ka.mb(this.qq,c.Vh)),p.push(this.st++)):p.push(d);return p},b.prototype.Ul=
function(){return this.vr="#050505",this.createTexture(),this.Tl(),this.ne===r&&(this.pq=new A.ua({map:A.vd.ue("textures/building_road_reflection4.png"),N:r,Ma:r,wa:A.Jb,Jd:v,color:0,opacity:0.7})),this.bv=new A.tc({map:this.t,xb:7829367,N:r,Y:v}),this.cv=new A.tc({map:this.zq,N:r,Y:v}),this.xe=new A.ua({color:15658734,N:r,ha:r,Y:r}),this.T=[],this.T.push(this.bv),this.T.push(this.cv),this.T.push(this.pq),this.F=new A.We},b.prototype.wn=function(a,b,c,e,f,h){var p,s,o;return a==u&&(a=0),b==u&&(b=
0),c==u&&(c=0),e==u&&(e=1),f==u&&(f=1),h==u&&(h=1),o=("0"+Math.floor(Math.random()*(256-a)*e+a).toString(16)).substr(-2),s=("0"+Math.floor(Math.random()*(256-b)*f+b).toString(16)).substr(-2),p=("0"+Math.floor(Math.random()*(256-c)*h+c).toString(16)).substr(-2),"#"+o+s+p},b.prototype.fk=function(a,b){var c;return a==u&&(a=0),b==u&&(b=1),c=("0"+Math.floor(Math.random()*(256-a)*b+a).toString(16)).substr(-2),"#"+c+c+c},b.prototype.Tl=function(){var a,b;return this.Cc=32,a=document.createElement("canvas"),
b=a.getContext("2d"),a.width=this.Cc,a.height=this.Cc,b.fillStyle=this.vr,b.fillRect(0,0,this.Cc,this.Cc),this.zq=new A.uc(a),this.zq.Aa=r},b.prototype.cm=function(a,b,c,e,f){var h,p,s,o,n,t,w;0.7<this.oq.za()?a.fillStyle=this.wn(240,230,160,1,0.9,0.6):a.fillStyle=this.fk(5,0.4);a.fillRect(b,c,e,f);a.fillStyle=this.fk(5,0.2);w=[];n=0;for(t=parseInt(5*Math.random());0<=t?n<=t:n>=t;0<=t?++n:--n)p=e-parseInt(Math.random()*e),h=parseInt(f/2-Math.random()*(f/2)),s=parseInt(Math.random()*(e-p))+b,o=parseInt(f-
h)+c,w.push(a.fillRect(s,o,p,h));return w},b.prototype.createTexture=function(){var a,b,c,e,f,h,p,s,o,n,t,w,z;this.Cc=512;a=document.createElement("canvas");c=a.getContext("2d");a.width=this.Cc;a.height=this.Cc;b=document.createElement("canvas");this.lj=b.getContext("2d");b.width=this.Cc;b.height=this.Cc;this.Le=(this.Cc-2*this.ac)/this.Ph-this.ac;c.fillStyle=this.vr;c.fillRect(0,0,this.Cc,this.Cc);s=n=0;for(w=this.Ph-1;0<=w?n<=w:n>=w;s=0<=w?++n:--n){this.Fc[s]=[];o=t=0;for(z=this.Ph-1;0<=z?t<=z:
t>=z;o=0<=z?++t:--t)this.Fc[s][o]=-1,0.5>this.oq.za()&&(this.Fc[s][o]=1,0.05>Math.random()&&(this.Fc[s][o]=-1),h=this.ac+s*(this.Le+this.ac),p=o*(this.Le+this.ac),f=this.Le-this.ac,e=this.Le-this.ac,this.cm(c,h,p,f,e))}return this.vt=b,this.canvas=a,this.lj.drawImage(this.canvas,0,0),this.t=new A.uc(this.vt),this.t.dc=A.Ic,this.t.ec=A.Ic,this.t.Aa=r},b);return c("Next.objects",{Dr:e})});function Me(a,b){return function(){return a.apply(b,arguments)}}var Ne={}.hasOwnProperty;
define("cs!core/objects/Tree",["Underscore","libs/namespace","cs!core/objects/BuildingBlock","Three"],function(){function a(){this.constructor=f}function b(a,c){this.nb=a;this.Sm=c;this.Hl=Me(this.Hl,this);this.Il=Me(this.Il,this);b.ub.constructor.apply(this,arguments);this.ri=(27+10*Math.random())/1.5;this.dr=(3+2*Math.random())/1.5;this.Hj=(30+10*Math.random())/1.5;this.Il();this.Hl()}var c=namespace,e,f=b;e=A.Q;for(var h in e)Ne.call(e,h)&&(f[h]=e[h]);a.prototype=e.prototype;f.prototype=new a;
f.ub=e.prototype;e=(b.prototype.Il=function(){var a,b;return a=new A.C(this.nb,this.Sm),a.scale.set(this.ri,1,this.dr),a.rotation.a=0.5*Math.PI,a.position.y=this.ri/2,A.ka.mb(this,a),b=new A.C(this.nb,this.Sm),b.scale.set(this.ri,1,this.dr),b.rotation.a=0.5*Math.PI,b.rotation.y=0.5*Math.PI,b.position.y=this.ri/2,A.ka.mb(this,b)},b.prototype.Hl=function(){var a,b,c,e;a=this.Hj/2;e=[];for(c=0;50>=c;++c)b=new A.C(this.nb,this.Sm),b.scale.set(1+7*Math.random(),1,1+7*Math.random()),b.rotation.set(10*Math.random(),
10*Math.random(),10*Math.random()),b.position.set(-a+Math.random()*this.Hj,this.ri-5+Math.random()*this.Hj,-a+Math.random()*this.Hj),e.push(A.ka.mb(this,b));return e},b);return c("Next.objects",{ws:e})});function Oe(a,b){return function(){return a.apply(b,arguments)}}var Pe={}.hasOwnProperty;
define("cs!core/objects/Cars",["Underscore","libs/namespace","Three"],function(){function a(){this.constructor=f}function b(a,c,e){var f,h,q;this.we=a;this.nb=c;this.reverse=e!=u?e:v;this.update=Oe(this.update,this);this.sj=Oe(this.sj,this);this.xc=Oe(this.xc,this);b.ub.constructor.apply(this,arguments);this.Um=40;this.xn=20;this.Zi=[];h=0;for(q=this.Um-1;0<=q?h<=q:h>=q;0<=q?++h:--h)f=new A.C(this.nb,this.we),f.ha=r,f.scale.set(1+2*Math.random(),1,100+150*Math.random()),f.position.y=-400,f.position.x=
Math.random()*this.xn-0.5*this.xn,f.rotation.a=Math.PI/2,this.reverse===r&&(f.position.x*=-1,f.rotation.a*=-1),this.Zi.push(f),this.add(f)}var c=namespace,e,f=b;e=A.D;for(var h in e)Pe.call(e,h)&&(f[h]=e[h]);a.prototype=e.prototype;f.prototype=new a;f.ub=e.prototype;e=(b.prototype.xc=function(){var a;if(0!==this.Zi.length&&(a=this.Zi.splice(0,1),a=a[0],a.position.y=4,a.position.a=300+100*Math.random(),this.reverse===r&&(a.position.a-=1200),0.4>Math.random()))return this.xc()},b.prototype.sj=function(a){return a.position.y=
-400,this.Zi.push(a)},b.prototype.update=function(a){var b,c,e,f;c=2500*a;e=this.children;f=[];for(b in e)a=e[b],0<a.position.y?this.reverse===r?(a.position.a+=c,300<a.position.a?f.push(this.sj(a)):f.push(d)):(a.position.a-=c,-1E3>a.position.a?f.push(this.sj(a)):f.push(d)):f.push(d);return f},b);return c("Next.objects",{vi:e})});function Qe(a,b){return function(){return a.apply(b,arguments)}}var cf={}.hasOwnProperty;
define("cs!core/objects/Planes",["Underscore","libs/namespace","Three"],function(){function a(){this.constructor=f}function b(a,c){this.we=a;this.nb=c;this.xc=Qe(this.xc,this);this.update=Qe(this.update,this);b.ub.constructor.apply(this,arguments);this.random=new Next.Ec.ah("dLorem ipusm dolor sit amet.");this.Um=100;this.xn=2400;this.yq=18E3;this.xc()}var c=namespace,e,f=b;e=A.D;for(var h in e)cf.call(e,h)&&(f[h]=e[h]);a.prototype=e.prototype;f.prototype=new a;f.ub=e.prototype;e=(b.prototype.update=
function(a){var b,c,e,f;b=this.children.slice(0,this.children.length);f=[];for(c in b)e=b[c],4<e.scale.x?f.push(e.scale.x*=0.96):(e.scale.x=1E-4,a&&4>e.scale.x&&0.2>Math.random()?f.push(e.scale.x=20+189*this.random.za()):f.push(d));return f},b.prototype.xc=function(){var a;if(!(this.children.length>=this.Um))return a=new A.C(this.nb,this.we),a.ha=r,a.scale.set(0.0010,1,13E4),a.position.y=2E3,a.position.x=this.random.za()*this.yq-0.5*this.yq,a.rotation.x=0.5*Math.PI,a.rotation.y=-1.5E-4*a.position.x,
this.reverse===r&&(a.position.x*=-1,a.position.a-=1200,a.rotation.a*=-1),this.add(a),this.xc()},b);return c("Next.objects",{gs:e})});function df(a,b){return function(){return a.apply(b,arguments)}}var ef={}.hasOwnProperty;function ff(a,b){function c(){this.constructor=a}for(var e in b)ef.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.ub=b.prototype}
define("cs!core/utils/Skeleton",["Underscore","libs/namespace","Three"],function(){function a(b,c,e,f,l,m,q){var p,s,o,n,t,w,z,y,x;this.Hh=b;this.xe=c;this.o=e;this.b=f;this.count=l!=u?l:3;this.ra=m!=u?m:2;this.direction=q!=u?q:new A.d(1,0,0);this.update=df(this.update,this);a.ub.constructor.apply(this,arguments);p=this.Fw;x=this.qa;s=w=0;for(y=x.length;w<y;s=++w){n=x[s];s=p/6;for(o=z=5;1<=z;o=--z)t=new A.C(this.th,this.Hh),t.ha=r,t.scale=new A.d(0.2,0.2,0.2),t.position.a=o*s,t.rotation.x=0.5*Math.PI,
n.add(t)}}function b(a,c,e,f,l,m,q){var p,s,o,n,t;this.Hh=a;this.xe=c;this.o=e;this.b=f;this.count=l!=u?l:3;this.ra=m!=u?m:1;this.direction=q!=u?q:new A.d(1,0,0);this.update=df(this.update,this);this.xl=df(this.xl,this);b.ub.constructor.apply(this,arguments);this.qa=[];this.Wm=[];this.th=new A.sc(2,2,2);this.Wp=this.b.e().Ia(this.o).length();this.object=new A.C(this.th,this.Hh);this.object.ha=r;this.object.position=this.o;this.add(this.object);this.tf=this.count-2;this.ac=o=this.b.e().Ia(this.o).pc(this.count-
1);this.Fw=o.length();p=new A.D;p.position=this.o;this.qa.push(p);for(p=n=t=this.tf;1>=t?1>=n:1<=n;p=1>=t?++n:--n)s=this.xl(this.o.e().L(o.e().X(p))),p=new A.D,p.position=s.position,this.qa.push(p);t=this.qa;o=0;for(n=t.length;o<n;o++)p=t[o],this.add(p);this.Ce=new A.C(this.th,this.Hh);this.Ce.position=this.b;this.Ce.ha=r;this.add(this.Ce)}var c,e=namespace,f=c=(ff(b,A.D),b.prototype.xl=function(a){var b;return b=new A.C(this.th,this.Hh),b.position=a,this.add(b),this.Wm.push(b),b},b.prototype.update=
function(){var a,b,c,e,f,m,q,p;for(a=e=f=this.qa.length-1;1>=f?1>=e:1<=e;a=1>=f?++e:--e)this.qa[a-1].oa(this.qa[a].position);this.qa[this.qa.length-1].oa(this.b);a=this.b.e().Ia(this.o);a.length()>this.Wp&&(c=this.b.e().Ia(this.o),b=1-a.length()/this.Wp,this.b.L(c.X(0.65*b)));c=this.b.e().Ia(this.o).pc(this.count-1);b=c.e().Ia(this.ac);b=this.direction.e().X(b.length());a=1/(this.count-1);p=[];for(e=m=q=this.tf;1>=q?1>=m:1<=m;e=1>=q?++m:--m)f=e*a,0.5<f&&(f=-1*(f-0.5)+0.5),p.push(this.Wm[e-1].position=
this.o.e().L(c.e().X(e)).L(b.e().X(f)));return p},b);c=(ff(a,c),a.prototype.update=function(){var b,c,e,f,l;l=this.qa;b=e=0;for(f=l.length;e<f;b=++e)c=l[b],0<b&&(c.position=this.Wm[b-1].position);return a.ub.update.apply(this,arguments)},a);return e("Next.utils",{Lx:f,dh:c})});var gf={}.hasOwnProperty;
define("cs!core/objects/Biped",["Underscore","libs/namespace","cs!core/utils/Skeleton","Three"],function(){function a(){this.constructor=f}function b(a,c,e){var f;this.by=a;this.F=c;this.xe=e;var h=this.update,q=this;this.update=function(){return h.apply(q,arguments)};b.ub.constructor.apply(this,arguments);this.qf=15*Math.random()+30;this.Zq=7*Math.random()+22;this.Yi=10*Math.random()+22;this.Nq=4*Math.random()+5;this.width=4+5*Math.random();this.ug=new Next.Ec.dh(this.F,this.xe,new A.d(0,this.qf,
-this.width),new A.d(0,0,-this.width-0.2),3,1);this.add(this.ug);this.Gg=new Next.Ec.dh(this.F,this.xe,new A.d(0,this.qf,this.width),new A.d(0,0,this.width+0.2),3,1);this.add(this.Gg);this.hb=new Next.Ec.dh(this.F,this.xe,new A.d(0,this.qf,0),new A.d(0,this.qf+this.Zq,0),5,3,new A.d(-1,0,0));this.add(this.hb);this.head=new A.D;f=new A.sc(5,6.5,5);f=new A.C(f,this.F);f.ha=r;this.head.add(f);this.add(this.head);this.tg=new Next.Ec.dh(this.F,this.xe,new A.d(this.hb.b.x,this.hb.b.y,-this.width),new A.d(0,
this.hb.b.y-this.Yi,-this.width-1.5),3,1,new A.d(-1,0,0));this.add(this.tg);this.Fg=new Next.Ec.dh(this.F,this.xe,new A.d(this.hb.b.x,this.hb.b.y,this.width),new A.d(0,this.hb.b.y-this.Yi,this.width+1.5),3,1,new A.d(-1,0,0));this.add(this.Fg);this.rotation.y=0.5*Math.PI}var c=namespace,e,f=b;e=A.D;for(var h in e)gf.call(e,h)&&(f[h]=e[h]);a.prototype=e.prototype;f.prototype=new a;f.ub=e.prototype;e=(b.prototype.update=function(a){var b;return b=100*a,this.ug.o.y=0.8*this.qf+-0.2*Math.sin(0.0072*b),
this.ug.b.y=Math.max(0,Math.sin(0.0072*b)*this.Nq),this.ug.b.x=-13*Math.cos(0.0072*b),this.ug.update(),this.Gg.o.y=0.8*this.qf+-0.2*Math.sin(0.0072*b+Math.PI),this.Gg.b.y=Math.max(0,Math.sin(0.0072*b+Math.PI)*this.Nq),this.Gg.b.x=-13*Math.cos(0.0072*b+Math.PI),this.Gg.update(),this.hb.o.y=(this.Gg.o.y+this.ug.o.y)/2,this.hb.b.y=0.5*Math.cos(0.0072*b+Math.PI)+this.qf+this.Zq-10,this.hb.b.x=0.5*Math.sin(0.0072*b+Math.PI)+5,this.hb.update(),this.tg.o.y=this.hb.b.y-2,this.tg.o.x=this.hb.b.x,this.tg.b.x=
1*Math.sin(0.0072*b+Math.PI)+4,this.tg.b.y=this.hb.b.y-this.Yi+2+0.3*Math.sin(0.0072*b+Math.PI),this.tg.update(),this.Fg.o.y=this.hb.b.y-2,this.Fg.o.x=this.hb.b.x,this.Fg.b.x=1*Math.sin(0.0072*b)+4,this.Fg.b.y=this.hb.b.y-this.Yi+2+0.3*Math.sin(0.0072*b),this.Fg.update(),this.head.position.y=this.hb.b.y+6,this.head.position.x=this.hb.b.x+3+0.5*Math.sin(0.0072*b+Math.PI),this.head.rotation.a=0.05*Math.sin(0.0072*b)-0.3},b);return c("Next.shapes",{Ar:e})});
function hf(a,b){return function(){return a.apply(b,arguments)}}var jf={}.hasOwnProperty;
define("cs!core/objects/Bird",["Underscore","libs/namespace","Three"],function(){function a(){this.constructor=f}function b(a){this.speed=a!=u?a:1.2;this.oj=hf(this.oj,this);this.update=hf(this.update,this);b.ub.constructor.apply(this,arguments);this.time=0;this.oj();this.we=new A.ua({color:16777215,xb:8947848});this.ji=new A.D;this.add(this.ji);this.uk=new A.D;this.add(this.uk);this.Ce=new A.C(this.nb,this.we);this.Ce.ha=r;this.Ce.position.x=35;this.ji.add(this.Ce);this.object=new A.C(this.Hf,this.we);
this.object.ha=r;this.object.position.x=35;this.object.position.a=-50;this.Ce.add(this.object);this.Uj=new A.C(this.nb,this.we);this.Uj.ha=r;this.Uj.position.x=-35;this.uk.add(this.Uj);this.Qh=new A.C(this.Hf,this.we);this.Qh.ha=r;this.Qh.position.x=-35;this.Qh.position.a=-50;this.Uj.add(this.Qh)}var c=namespace,e,f=b;e=A.D;for(var h in e)jf.call(e,h)&&(f[h]=e[h]);a.prototype=e.prototype;f.prototype=new a;f.ub=e.prototype;e=(b.prototype.update=function(a){return this.time+=12*a,this.ji.position.y=
10*(Math.sin(0.3*this.time*this.speed)+Math.PI-0.2),this.uk.position.y=this.ji.position.y,this.ji.rotation.a=0.4*Math.sin(0.3*this.time*this.speed)+0.1,this.object.rotation.a=0.5*Math.sin(0.3*this.time*this.speed+Math.PI+0.3)-0.3,this.uk.rotation.a=-0.4*Math.sin(0.3*this.time*this.speed)-0.1,this.Qh.rotation.a=-0.5*Math.sin(0.3*this.time*this.speed+Math.PI+0.3)+0.3+Math.PI},b.prototype.oj=function(){return this.Hf=new A.Q,this.Hf.g.push(new A.d(0,0,0)),this.Hf.g.push(new A.d(0,0,100)),this.Hf.g.push(new A.d(150,
0,-42)),this.Hf.l.push(new A.ga(0,1,2)),Xd(this.Hf),this.nb=new A.cd(70,100)},b);return c("Next.objects",{Br:e})});
define("text",["module"],function(a){var b=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],c=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,e=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f="undefined"!=typeof location&&location.href,h=f&&location.protocol&&location.protocol.replace(/\:/,""),g=f&&location.hostname,i=f&&(location.port||d),j=[],l=a.Bt(),m,q;return m={version:"2.0.0",xk:function(a){if(a){var a=a.replace(c,""),b=a.match(e);b&&(a=b[1])}else a="";return a},Eu:function(a){return a.replace(/(['\\])/g,
"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},ip:function(){var a,c,e;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(c=0;3>c;c++){e=b[c];try{a=new ActiveXObject(e)}catch(f){}if(a){b=[e];break}}return a},hq:function(a){var b=v,c=a.indexOf("."),e=a.substring(0,c),a=a.substring(c+1,a.length);return c=a.indexOf("!"),-1!==c&&(b=a.substring(c+1,a.length),b="strip"===b,
a=a.substring(0,c)),{Oj:e,xj:a,xk:b}},mx:/^((\w+)\:)?\/\/([^\/\\]+)/,nr:function(a,b,c,e){var a=m.mx.exec(a),f,g,h;return a?(f=a[2],g=a[3],g=g.split(":"),h=g[1],g=g[0],(!f||f===b)&&(!g||g===c)&&(!h&&!g||h===e)):r},up:function(a,b,c,e){c=b?m.xk(c):c;l.Dm&&(j[a]=c);e(c)},load:function(a,b,c,e){if(e.Dm&&!e.Bz)c();else{l.Dm=e.Dm;var j=m.hq(a),e=j.Oj+"."+j.xj,q=b.Yw(e),z=l.nr||m.nr;!f||z(q,h,g,i)?m.get(q,function(b){m.up(a,j.xk,b,c)},function(a){c.error&&c.error(a)}):b([e],function(a){m.up(j.Oj+"."+j.xj,
j.xk,a,c)})}},write:function(a,b){j.hasOwnProperty(b)&&m.Eu(j[b])},hC:function(a,b,c,e,f){var b=m.hq(b),g=b.Oj+"."+b.xj,h=c.Yw(b.Oj+"."+b.xj)+".js";m.load(g,c,function(){function b(a){return e(h,a)}b.Zs=function(a){return e.Zs(a)};m.write(a,g,b,f)},f)}},"undefined"!=typeof process&&process.gx&&process.gx.cn?(q=require.qA("fs"),m.get=function(a,b){var c=q.MA(a,"utf8");0===c.indexOf("\ufeff")&&(c=c.substring(1));b(c)}):m.ip()?m.get=function(a,b,c){var e=m.ip();e.open("GET",a,r);l.Nv&&l.Nv(e,a);e.onreadystatechange=
function(){var f,g;4===e.readyState&&(f=e.status,399<f&&600>f?(g=Error(a+" HTTP status: "+f),g.iC=e,c(g)):b(e.responseText))};e.send(u)}:"undefined"!=typeof Packages&&(m.get=function(a,b){var c=new java.Bm.yx(a),e=java.lang.Px.mz("line.separator"),c=new java.Bm.qx(new java.Bm.Ex(new java.Bm.zx(c),"utf-8")),f,g,h="";try{f=new java.lang.Ox;(g=c.fw())&&g.length()&&65279===g.charAt(0)&&(g=g.substring(1));for(f.append(g);(g=c.fw())!==u;)f.append(e),f.append(g);h=String(f.toString())}finally{c.close()}b(h)}),
m});define("text!core/../../shaders/basic.vert",[],Ba("varying vec2 vUv;\n\nvoid main() {\n\tvUv = vec2( uv.x, 1.0 - uv.y );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"));define("text!core/../../shaders/glitch.frag",[],Ba("#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D tDiffuse;\nuniform sampler2D tLensDirt;\nuniform sampler2D tGlitch;\n\nvarying vec2 vUv;\n\nuniform float time;\nuniform vec3 resolution;\n\nuniform float glitch_intensity;\nuniform vec3 offset_color;\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade(vec2 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec2 P)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod289(Pi); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute(permute(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy = abs(gx) - 0.5 ;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec2 P, vec2 rep)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod(Pi, rep.xyxy); // To create noise with explicit period\n  Pi = mod289(Pi); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute(permute(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy = abs(gx) - 0.5 ;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\nvoid main(void)\n{\n  vec4 colorDirt = texture2D(tLensDirt, vUv);\n  vec4 glitchDisplace = texture2D(tGlitch, vec2(mod(mod(time, 142.0) * 0.1 + vUv.x * 0.05, 1.0), vUv.y));\n  vec4 glitchColor = texture2D(tGlitch, vec2(mod(mod(time, 242.0) * 0.03 + vUv.x * 0.1, 1.0), vUv.y));\n  vec4 glitchImage = texture2D(tGlitch, vec2(mod(mod(time, 42.0) * 0.5 + vUv.x * 0.1, 1.0), vUv.y));\n  //vec4 colorBlur = getBlur();\n  vec2 uvDisp = vec2(mod(vUv.x + glitchDisplace.r * 0.01, 1.0), mod(vUv.y + glitchColor.b * 0.01, 1.0));\n  //vec2 uvDiff = uvDisp - vUv;\n  float noiseOffset = cnoise(vec2(vUv.x * 10.0 + time, vUv.y * 10.0)) * glitch_intensity;\n  vec4 colorR = texture2D( tDiffuse, vec2(mod(uvDisp.x + offset_color.x * noiseOffset, 1.0), uvDisp.y) );\n  vec4 colorG = texture2D( tDiffuse, vec2(mod((vUv.x + uvDisp.x) / 2.0 + offset_color.y * noiseOffset, 1.0), uvDisp.y) );\n  vec4 colorB = texture2D( tDiffuse, vec2(mod(vUv.x + offset_color.z * noiseOffset, 1.0), uvDisp.y) );\n  \n  \n  float darkDirtMult = 0.05;\n  colorR = colorR - colorDirt * darkDirtMult;\n  colorG = colorG - colorDirt * darkDirtMult;\n  colorB = colorB - colorDirt * darkDirtMult;\n  \n\tgl_FragColor = vec4(colorR.r, colorG.g, colorB.b, 1.0);\n  //gl_FragColor = vec4(colorBlur.r, colorBlur.g, colorBlur.b, 1.0);\n  //gl_FragColor = vec4(noiseOffset, noiseOffset, noiseOffset, 1.0);\n  //gl_FragColor = vec4(colorDirt.r, colorDirt.g, colorDirt.b, 1.0);\n  //gl_FragColor = vec4(glitchDisplace.r, glitchDisplace.g, glitchDisplace.b, 1.0);\n}\n"));
define("cs!core/shaders/Glitch",["text!../../../shaders/basic.vert","text!../../../shaders/glitch.frag","Three"],function(a,b){return namespace("Next.shaders",{Nr:{n:{time:{type:"f",value:0},mu:{type:"f",value:0.1},ek:{type:"v3",value:new A.d(0,0,0)},Fv:{type:"v3",value:new A.d(0.0050,0,0)},Ba:{type:"t",value:0,t:u},Vw:{type:"t",value:1,t:u},Uw:{type:"t",value:2,t:u}},B:a,A:b}})});function kf(a,b){return function(){return a.apply(b,arguments)}}
define("cs!core/utils/AudioManager",["Underscore","libs/namespace"],function(a){function b(b,c){var e=this;this.fq=c;this.vn=kf(this.vn,this);this.play=kf(this.play,this);this.pause=kf(this.pause,this);this.Vl=kf(this.Vl,this);this.load=kf(this.load,this);this.update=kf(this.update,this);this.zh=512;this.Bj={};this.Sh=r;this.Xq=this.now=0;this.ya=new webkitAudioContext;this.wc=this.ya.Ft();this.wc.zh=this.zh;this.source=this.ya.Gt();a.vj({eg:{type:0,Cj:120,Fi:1.2,Dj:2},tf:{type:2,Cj:400,Fi:1.2,Dj:4},
cr:{type:1,Cj:2E3,Fi:1.2,Dj:3}},function(a,b){var c;return c=e.ya.Ey(),c.key=b,c.type=a.type,c.Cj=a.Cj,c.Fi.value=a.Fi,c.wc=e.ya.Ft(),c.wc.zh=e.zh,c.rj=e.ya.Ht(),c.rj.Ot.value=0,c.rm=e.ya.Hy(),c.rm.Dj.value=a.Dj,e.Bj[b]=c});this.jg=this.ya.Ht();this.jg.Ot.value=2*this.zh/this.ya.SA;this.source.Id(this.wc);this.wc.Id(this.jg);this.jg.Id(this.ya.Qy);a.vj(this.Bj,function(a){return e.source.Id(a.rj),a.rj.Id(a),a.Id(a.rm),a.rm.Id(a.wc)});this.Bq=this.wc.gz;this.data={eu:new Uint8Array(this.Bq),time:new Uint8Array(this.Bq),
filter:{eg:new Uint8Array(256),tf:new Uint8Array(256),cr:new Uint8Array(256)}};this.load(b)}var c=namespace,e;e=(b.prototype.update=function(){var b,c,e,i,j=this;this.wc.jB=0;this.wc.kz(this.data.eu);this.wc.hu(this.data.time);a.vj(this.Bj,function(a){return a.wc.hu(j.data.filter[a.key])});b=[0,0,0,0];e=[this.data.time,this.data.filter.eg,this.data.filter.tf,this.data.filter.cr];for(c=i=0;3>=i;c=++i)b[c]=this.vn(e[c]);return this.eg=b[1],this.tf=b[2],this.Hp=b[3],this.now=this.ya.currentTime-this.Xq},
b.prototype.load=function(a){var b,c=this;return b=new XMLHttpRequest,b.open("GET",a,r),b.responseType="arraybuffer",b.onload=function(){return c.buffer=c.ya.createBuffer(b.response,v),c.source.buffer=c.buffer,c.source.loop=v,c.play()},b.send()},b.prototype.Vl=function(){var b;return b=this.ya.Gt(),this.buffer&&(b.buffer=this.buffer),b.Id(this.wc),a.vj(this.Bj,function(a){return b.Id(a.rj)}),b},b.prototype.pause=function(){return this.source&&(this.source.uA(0),this.source.Sy(0),this.source=v),this.Sh=
v},b.prototype.play=function(){this.Sh=r;this.Xq=this.ya.currentTime-this.now;this.source||(this.source=this.Vl());this.source.buffer&&this.source.tA(0,this.now,this.buffer.duration-this.now);if(this.fq)return this.fq()},b.prototype.vn=function(a){var b,c,e,j,l;e=a.length;c=j=b=0;for(l=e-1;0<=l?j<=l:j>=l;c=0<=l?++j:--j)c=(a[c]-128)/128,b+=c*c;return Math.sqrt(b/e)},b);return c("Next.utils",{yr:e})});
define("cs!core/utils/LensFlareContainer",["Underscore","libs/namespace","Three"],function(){function a(a,b){var c,g,i;this.I=a;this.Ke=b;var j=this.$n,l=this;this.$n=function(){return j.apply(l,arguments)};c=A.vd.ue("textures/flare0.png");g=A.vd.ue("textures/flare2.png");i=A.vd.ue("textures/flare3.png");this.$b=new A.Ve(c,512,0,A.Jb,new A.v(16777215));this.$b.add(g,512,0,A.Jb);this.$b.add(g,1024,0,A.Jb);this.$b.add(g,512,0,A.Jb);this.$b.add(i,60,0.6,A.Jb);this.$b.add(i,70,0.7,A.Jb);this.$b.add(i,
120,0.9,A.Jb);this.$b.add(i,70,1,A.Jb);this.$b.position=this.Ke.position;this.$b.Yl=this.$n;this.I.add(this.$b)}var b=namespace,c;c=(a.prototype.$n=function(a){var b,c,g,i,j,l;this.$b.position.y=this.Ke.position.y;g=2*-a.c.x;i=2*-a.c.y;b=j=0;for(l=a.Sc.length-1;0<=l?j<=l:j>=l;b=0<=l?++j:--j)c=a.Sc[b],c.x=a.c.x+g*c.kb,c.y=a.c.y+i*c.kb,c.rotation=0,0===b?c.scale=0.15:c.scale=0.7;return a.Sc[2].y+=0.025,a.Sc[1].rotation=0.4*a.c.x-15*Math.PI/180,a.Sc[3].rotation=0.5*a.c.x+45*Math.PI/180},a);return b("Next.utils",
{Rr:c})});function lf(a,b){return function(){return a.apply(b,arguments)}}var mf={}.hasOwnProperty;
define("cs!core/App","Underscore Three libs/namespace cs!core/utils/ThreeApp cs!core/objects/Buildings cs!core/objects/Tree cs!core/objects/Cars cs!core/objects/Planes cs!core/objects/Biped cs!core/objects/Bird cs!core/shaders/Glitch cs!core/utils/AudioManager cs!core/utils/Rc4Random cs!core/utils/LensFlareContainer".split(" "),function(){function a(){this.constructor=f}function b(){this.Og=lf(this.Og,this);this.xq=lf(this.xq,this);this.rh=lf(this.rh,this);this.ym=lf(this.ym,this);this.hn=lf(this.hn,
this);this.hg=lf(this.hg,this);var a=this;this.Zm={x:0,y:0};this.Em=this.Sh=v;this.jb=[];this.gq=v;b.ub.constructor.apply(this,arguments);$("#container canvas").bu(0);this.Mc=new Next.Ec.yr("audio/walk_in_a_fog.mp3",this.hn);$("body").aq(function(b){var c,e,f,h;return h=document.width,f=document.height,c=b.pageX,e=b.pageY,a.Zm.x=c/h-0.5,a.Zm.y=e/f-0.5});document.addEventListener("webkitvisibilitychange",this.ym,v)}var c=namespace,e,f=b;e=Next.vs;for(var h in e)mf.call(e,h)&&(f[h]=e[h]);a.prototype=
e.prototype;f.prototype=new a;f.ub=e.prototype;e=(b.prototype.hg=function(){var a,b,c,e,f,h,p,s,o,n;this.I.N=new A.xi(1053203,0.0035);this.Ke=new A.tb(16512466,0);this.Ke.position.set(0,-200,-7220);this.I.add(this.Ke);h=new A.Uf(200,20,20);e=new A.ua({color:16512466,N:v});this.ni=new A.C(h,e);this.ni.position.set(0,-200,-8E3);this.I.add(this.ni);this.$b=new Next.Ec.Rr(this.I,this.Ke);this.mh=new Next.qa.Dr;this.mh.position.a=-6E3;this.I.add(this.mh);new A.ua({color:3355443,N:r,ha:r});h=new A.tc({color:3355443,
N:r,ha:r});p=new A.ua({color:5592405,N:r,ha:r,Y:r});o=new A.cd(1,1,1,1);e=new A.ua({color:16724787,N:r,wa:A.Jb,Ma:r});f=new A.ua({color:16777215,N:r,wa:A.Jb,Ma:r});a=new A.ua({color:window.XB,N:v,wa:A.Jb,Ma:r});this.ln=new Next.qa.gs(a,o);this.ln.position.a=-10400;this.I.add(this.ln);a=new A.sc(1,1,1);this.oh=new Next.qa.vi(e,a);this.oh.position.x=30;this.I.add(this.oh);this.ph=new Next.qa.vi(f,a,r);this.ph.position.x=-30;this.I.add(this.ph);this.ef=new Next.qa.vi(e,a);this.ef.scale.x=0.6;this.ef.position.x=
300;this.ef.position.a=-2120;this.ef.rotation.y=Math.PI*0.5;this.I.add(this.ef);this.ff=new Next.qa.vi(f,a);this.ff.scale.x=0.6;this.ff.position.x=-300;this.ff.position.a=-2270;this.ff.rotation.y=Math.PI*-0.5;this.I.add(this.ff);e=[];for(f=0;f<=10;++f)e.push(new Next.qa.ws(o,h,p));o=new Next.Ec.ah("42z6drBPvsdfayBAJVT4kNHR");this.Xn=new A.Q;for(p=f=0;f<=40;p=++f){a=e[parseInt(o.za()*10)];a=new A.C(a,h);a.position.x=60;a.position.a=-9E3+p*220+o.za()*30;a.ha=r;A.ka.mb(this.Xn,a);a=e[parseInt(o.za()*
10)];a=new A.C(a,h);a.position.x=-60;a.position.a=p*220+-8890+o.za()*30;a.ha=r;A.ka.mb(this.Xn,a)}return this.Yn=new A.C(this.Xn,h),this.Yn.ha=r,this.Yn.position.a=700,this.I.add(this.Yn),this.dv=new A.Db({color:328965,N:r}),this.nb=new A.cd(3E4,3E4,10,10),b=new A.C(this.nb,this.dv),this.I.add(b),c=new A.Db({color:16777215,N:r}),s=new A.ua({color:16777215,N:r,Y:r}),this.Gf=new Next.cB.Ar(this,c,s),this.Gf.scale.set(0.3,0.3,0.3),this.I.add(this.Gf),this.Gf.position.y=0,this.Gf.position.a=240,this.je=
new Next.qa.Br,this.je.position.a=-3E3,this.je.scale.set(0.02,0.02,0.02),this.je.position.y=12,this.je.position.x=300,this.I.add(this.je),this.Xw=A.vd.ue("textures/sunrise.png"),this.Rp=new A.ua({map:this.Xw,N:v,Ma:r,opacity:0}),n=new A.cd(1,1,1,1),this.li=new A.C(n,this.Rp),this.li.position.a=-10900,this.li.position.y=5E3,this.li.rotation.x=Math.PI*0.5,this.li.scale.set(1E4,1,1E4),this.I.add(this.li)},b.prototype.hn=function(){return this.Sh=r,$("#container canvas").jg(20).au(3E3)},b.prototype.ym=
function(){if(this.mm!==r)return document.fC?(this.Mc.pause(),this.Em=r):(this.Mc.play(),this.Em=v)},b.prototype.rh=function(a){var b,c;return b=a.toString(16),(c=b.length===1)!=u?c:"0"+{uz:b}},b.prototype.xq=function(a,b,c){return"#"+this.rh(a)+this.rh(b)+this.rh(c)},b.prototype.Og=function(a,b){var c,e,f,h=this;this.time=a;if(this.Em!==r&&this.Sh!==v&&this.Mc){e=this.Mc.now;this.Mc.update();e>16&&(this.oh.update(b),this.ph.update(b),this.ef.update(b),this.ff.update(b),this.Mc.eg>0.32&&Math.random()>
0.89&&this.oh.xc(),this.Mc.Hp>0.37&&Math.random()>0.86&&this.ph.xc(),this.Mc.eg>0.32&&Math.random()>0.8&&this.ef.xc(),this.Mc.tf>0.33&&Math.random()>0.52&&this.ff.xc());e>80&&this.ln.update(this.Mc.Hp>0.37&&Math.random()>0.82);f=0;e>112&&e<120&&(f=-1210);e>144&&(f=1E3,this.ve.n.Fv.value.x=0.02,this.ve.n.mu.value=0.3);e>137&&(this.Rp.opacity=(e-137)*0.01);e>140&&(this.ni.position.y=this.ni.position.y+b*10,this.Ke.position.y=this.ni.position.y+100,this.Ke.nd=(e-140)/10,c=new A.v,ac(c,0.06667+(e-140)*
0.0010,0.08235+(e-144)*1E-4,0.090196+(e-144)*3E-4),this.Bc.kk(c),this.I.N.color=c);e>133&&(this.je.update(b),this.je.position.x=3,this.je.position.a=-3260+(e-133)*30);this.Gf.update(a);this.Gf.position.a=240-e*18+f;this.jb.update(e,this.Gf,this.Zm);this.rq.W=this.jb.Ka;e>162&&this.gq===v&&(this.gq=r,$("body").Ky("background-color","#fff"),_gaq.push(["_trackEvent","Animation","completed"]),$("#container canvas").bu(7E3,function(){return h.mm=r,$("body").append('<a href="/" id="replay">Replay</a>'),
$("#replay").vz().au(300),$("footer .right").Us("finished"),$("body").append($("footer .right"))}));c=50;if(this.jb.Ka===this.jb.cf||this.jb.Ka===this.jb.ld)c=-300;this.oh.position.a=this.jb.Ka.position.a-c;this.ph.position.a=this.jb.Ka.position.a-c;this.mh.update(this.Mc.eg>0.32&&Math.random()>0.82);if(this.ve)return this.ve.n.time.value=a/10,this.ve.n.ek.value=new A.d(window.innerWidth,window.innerHeight,0)}},b);return c("Next",{Fq:{Vv:r,backgroundColor:1119511},xr:e})});
require.Bt({iq:{tx:"libs/coffee-script",Jy:"libs/require/cs"}});require(["cs!core/App"],function(){new Next.xr});define("boot",la());
